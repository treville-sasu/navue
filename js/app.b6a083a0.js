(function(t){function webpackJsonpCallback(e){for(var i,n,s=e[0],o=e[1],u=e[2],l=0,d=[];l<s.length;l++)n=s[l],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);c&&c(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),checkDeferredModules()}function checkDeferredModules(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var o=i[s];0!==a[o]&&(n=!1)}n&&(r.splice(e--,1),t=__webpack_require__(__webpack_require__.s=i[0]))}return t}var e={},i={app:0},a={app:0},r=[];function jsonpScriptSrc(t){return __webpack_require__.p+"js/"+({}[t]||t)+"."+{"chunk-2d0c8dd2":"8f8fabb7","chunk-2d22d746":"600ccf85","chunk-2f5398a4":"9b62be28","chunk-2d221f18":"642092ec","chunk-4b659c3c":"2c30d9a7","chunk-05ee3090":"f83cc76a","chunk-6a3eae22":"748b1fd8","chunk-5ac5a83e":"9a5d33e3"}[t]+".js"}function __webpack_require__(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}__webpack_require__.e=function requireEnsure(t){var e=[],r={"chunk-4b659c3c":1,"chunk-05ee3090":1,"chunk-6a3eae22":1};i[t]?e.push(i[t]):0!==i[t]&&r[t]&&e.push(i[t]=new Promise((function(e,a){for(var r="css/"+({}[t]||t)+"."+{"chunk-2d0c8dd2":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-2f5398a4":"31d6cfe0","chunk-2d221f18":"31d6cfe0","chunk-4b659c3c":"d37a6ea3","chunk-05ee3090":"445a7757","chunk-6a3eae22":"48d2b289","chunk-5ac5a83e":"31d6cfe0"}[t]+".css",n=__webpack_require__.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===n))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){c=l[o],u=c.getAttribute("data-href");if(u===r||u===n)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||n,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete i[t],d.parentNode.removeChild(d),a(s)},d.href=n;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){i[t]=0})));var n=a[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,i){n=a[t]=[e,i]}));e.push(n[2]=s);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,__webpack_require__.nc&&c.setAttribute("nonce",__webpack_require__.nc),c.src=jsonpScriptSrc(t);var u=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var i=a[t];if(0!==i){if(i){var r=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",u.name="ChunkLoadError",u.type=r,u.request=n,i[1](u)}a[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,i){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)__webpack_require__.d(i,a,function(e){return t[e]}.bind(null,a));return i},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t["default"]}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="/",__webpack_require__.oe=function(t){throw console.error(t),t};var n=window["webpackJsonp"]=window["webpackJsonp"]||[],s=n.push.bind(n);n.push=webpackJsonpCallback,n=n.slice();for(var o=0;o<n.length;o++)webpackJsonpCallback(n[o]);var c=s;r.push([0,"chunk-vendors"]),checkDeferredModules()})({0:function(t,e,i){t.exports=i("56d7")},"00b4":function(t,e,i){"use strict";i.d(e,"a",(function(){return Flight}));var a=i("bd67"),r=i("f9de");class Flight extends a["a"]{constructor({name:t,notes:e,checked:i=[],milestones:a=[]}={},...n){n.every(t=>t instanceof r["a"])?n=[n]:n.every(t=>t instanceof Array&&t.every(t=>t instanceof Array))&&(n=n.flat()),super({name:t,notes:e,locations:n,checked:i,milestones:a})}addLocation(t){return this.locations[this.locations.length-1].push(r["a"].from(t)),this}addTrace(...t){return t.every(t=>t instanceof Array)&&(t=t.flat()),0==this.locations[0].length?this.locations[0]=t:this.locations.push(t),this}get geom(){return this.locations.map(t=>t.map(({latitude:t,longitude:e,altitude:i})=>[t,e,Number(i)]))}toGeoJSON(t="Feature"){const{locations:e,...i}=this;switch(t){case"Feature":return{type:t,properties:{...i},geometry:this.toGeoJSON("MultiLineString")};case"MultiLineString":return{type:t,coordinates:this.geom};case"MultiPoint":return{type:t,coordinates:this.geom.flat()};default:throw"not a valid GeoJSON object"}}toBounds(){return this.locations.flat().reduce((t,{latitude:e,longitude:i},a)=>0==a?[[e,i],[e,i]]:[[Math.min(e,t[0][0]),Math.min(i,t[0][1])],[Math.max(e,t[1][0]),Math.max(i,t[1][1])]],void 0)}static from({type:t,locations:e,_id:i,_rev:a,...n}={}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{e&&(e=e.map(t=>t.map(t=>r["a"].from(t))));let t=new this(n,...e);return i&&a&&Object.assign(t,{_id:i,_rev:a}),t}}}},"039a":function(t,e,i){"use strict";var a=i("7174"),r=i.n(a);r.a},"08df":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return s}));const a={data(){return{envelopesDataset:{showLines:!0,showLine:!0,fill:"start",borderWidth:2,pointRadius:5,pointHoverRadius:5,tension:0},cgDataset:{borderWidth:2,pointRadius:5,pointHoverRadius:5}}}},r={methods:{readTextFileAsync(t){return new Promise((e,i)=>{let a=new FileReader;a.onload=()=>{e(a.result)},a.onerror=i,a.readAsText(t)})},downloadJSON(t,e){let i=new Blob([JSON.stringify(t,void 0,2)],{type:"application/json",name:e});const a=document.createElement("a");a.href=URL.createObjectURL(i),a.download=e,a.click()},async uploadJSON(t){let e;return e=JSON.parse(await this.readTextFileAsync(t)),e}}},n={methods:{openWarning(t){return this.$buefy.snackbar.open({position:"is-bottom",type:"is-danger",duration:5e3,queue:!1,...t})},confirmAction(t){return this.$buefy.dialog.confirm({type:"is-danger",hasIcon:!0,...t})}}},s={data(){return{wakeLock:null}},mixins:[n],mounted(){"wakeLock"in navigator&&(this.requestWakeLock(),document.addEventListener("visibilitychange",this.requestWakeLock))},beforeDestroy(){"wakeLock"in navigator&&(document.removeEventListener("visibilitychange",this.requestWakeLock),this.wakeLock&&this.wakeLock.release())},methods:{async requestWakeLock(){"visible"===document.visibilityState&&(this.wakeLock=await navigator.wakeLock.request("screen"))}}}},"0c9a":function(t,e,i){"use strict";i.d(e,"a",(function(){return Moment}));var a=i("bd67"),r=i("3634");class Moment extends a["a"]{constructor(t,e,i={}){super({mass:new r["i"](t),lever:new r["d"](e),...i})}get value(){return this.mass.value*this.lever.value}get _value(){return this.mass*this.lever}valueOf(){return this._value}get unit(){return`${this.mass.unit}.${this.lever.unit}`}toJSON(){return{...this,type:this.constructor.name}}static from({type:t,mass:e,lever:i,...a}={}){if(arguments[0]instanceof this)return arguments[0];if(t==this.name)return e&&(e=r["i"].from(e)),i&&(i=r["d"].from(i)),new this(e,i,a);throw`Invalid data : 'type' should be '${this.name}' got '${t}'`}static linearCoG(...t){let e=t.flat().reduce((t,{mass:e,lever:i})=>(t.mass=t.mass.add(e,{precision:e.precision}),t.lever=t.lever.add(new r["d"](i).prod(e),{precision:i.precision}),t),new Moment(0,0));return e.lever=e.lever.prod(1/e.mass),e}}},1:function(t,e){},"1caf":function(t,e,i){"use strict";i.d(e,"a",(function(){return Navigation}));var a=i("bd67"),r=i("f9de");class Navigation extends a["a"]{constructor({name:t,notes:e}={},...i){i=new a["b"]({},...i).keep(t=>t.keep(t=>t instanceof r["b"]?t:void 0)),super({name:t,notes:e,routes:i})}get waypoints(){return this.routes.items.map(t=>t.items).flat()}get poi(){return this.waypoints.map(t=>t.name).filter(t=>/^[A-Z]{4}$/.test(t))}addRoute(...t){return this.routes.add(new a["b"]({},...t)),this.routes.last}removeRoute(t){return this.routes.remove(t)}clearRoute(t){if(t=this.getRoute(t),t&&0==t.length)return this.removeRoute(t),!0}addWaypoint({insertBefore:t,...e}={},i){return i=this.getRoute(i),i.add(r["b"].from({...e,type:"Waypoint"}),t)}removeWaypoint(t,e){return e=this.getRoute(e),Number.isInteger(t)?e.remove(void 0,t):e.remove(t)}getNextWaypoint(t){const e=this.waypoints.indexOf(t);return this.waypoints[e+1]}getRoute(t){return t instanceof a["b"]?t:isFinite(t)?this.routes.items[t]:this.last}getRouteId(t){return t instanceof a["b"]?this.routes.indexOf(t):Number.isInteger(t)?t:this.routes.length-1}toBounds(){return this.waypoints.reduce((t,{latitude:e,longitude:i},a)=>0==a?[[e,i],[e,i]]:[[Math.min(e,t[0][0]),Math.min(i,t[0][1])],[Math.max(e,t[1][0]),Math.max(i,t[1][1])]],void 0)}static from({type:t,routes:e,_id:i,_rev:n,...s}={}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{e&&(e=a["b"].from(e,a["b"],r["b"]));let t=new this(s,...e);return i&&n&&Object.assign(t,{_id:i,_rev:n}),t}}}},"1db5":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var a=i("08df");const r={mixins:[a["b"],a["c"]],props:{create:Boolean,edit:Boolean,persistent:Boolean,exist:Boolean},data(){return{search:"",upload:[]}},mounted(){!this.persistent&&!this.exist||this.selectedData||this.createData()},computed:{dataType(){return this.constructor.name},fromDB(){return this.selectedData&&this.selectedData._id&&this.selectedData._rev},selectedData:{get(){return this.$store.state[this.storeKey]},set(t){try{this.$store.commit(this.storeKey,t)}catch(e){0,this.$buefy.dialog.alert({title:"Cannot load item",message:"Selected record is corrupted. It will be purged from database. Do you want to download it localy before ?",type:"is-danger",hasIcon:!0,trapFocus:!0,icon:"cloud-download-outline",confirmText:"Download & Delete",onConfirm:()=>{this.downloadJSON(t,"navue-corrupted-item.json")},canCancel:!0,cancelText:"Just delete it"}),this.$store.dispatch("deleteFromDB",t)}}},selectedName(){return this.selectedData?this.selectedData[this.searchedProperty]:void 0}},pouch:{availableData(){let t={type:this.dataType};return t[this.searchedProperty]={$regex:RegExp(this.search,"i")},{database:"navue",selector:t}}},methods:{createData(t){this.selectedData=new this.constructor(t)},async saveData(){try{this.selectedData=await this.$store.dispatch("saveToDB",this.selectedData),this.openWarning({message:`"${this.selectedName}" saved`})}catch(t){this.dispatchError(t)}},discardData(){this.selectedData=void 0},async deleteData(){try{await this.$store.dispatch("deleteFromDB",this.selectedData),this.selectedData=null,this.openWarning({message:`"${this.selectedName}" deleted`})}catch(t){this.dispatchError(t)}},async importData(t){try{let e=await this.uploadJSON(t);this.selectedData=this.cloneData(e),this.openWarning({message:`"${this.selectedName}" imported`})}catch(e){this.dispatchError(e)}},exportData(){this.selectedData&&this.downloadJSON(this.selectedData,this.selectedName+".json")},cloneData(t){let e=t.clone();return delete e._id,delete e._rev,e.name&&(e.name+="-1"),e.registration&&(e.registration+="(cloned)"),e},dispatchError(t){console.error(t),this.openWarning(t)}}}},3634:function(t,e,i){"use strict";i.d(e,"d",(function(){return Distance})),i.d(e,"a",(function(){return Altitude})),i.d(e,"g",(function(){return Speed})),i.d(e,"c",(function(){return Consumption})),i.d(e,"i",(function(){return Weight})),i.d(e,"b",(function(){return Azimuth})),i.d(e,"f",(function(){return Pressure})),i.d(e,"h",(function(){return Temperature})),i.d(e,"e",(function(){return Frequency}));var a=i("bd67");class Quantity extends a["a"]{constructor(t,e,{type:i,unit:a,precision:r,...n}={}){if(arguments[0]instanceof Quantity)return arguments[0];super(n),e?this.unit=e:this._unit=void 0,t||0===t?this.value=t:(this._value=void 0,this.precision=void 0),r&&(this.precision=r),a&&(this.unit=a)}get value(){return this.constructor.significantValue(this._to(this._value),this.precision)}set value(t){let e=Number(t);if(Number.isNaN(e))throw`\`${t}\` could not be coerced to a number`;this._value=this._from(e),this.precision=this.constructor.significantFigures(t)}get unit(){return this._unit||this.constructor.baseUnit}set unit(t){if(!this.constructor.units[t])throw`'${t}' is not an available unit`;this._unit=t}get factor(){return this.constructor.units[this.unit]}_from(t,e=this.unit){return Number(t)/this._factor(e)}_to(t,e=this.unit){return Number(t)*this._factor(e)}_factor(t){if(this.constructor.units[t])return this.constructor.units[t];throw`'${t}' is not an available unit`}to(t){return this._to(this.value,t)}as(t,e){return Object.assign(this.constructor.from(this),{unit:t,precision:e})}add(t,e){if("number"==typeof t||t instanceof this.constructor)return new this.constructor(this+t,void 0,{precision:Math.min(this.precision,t.precision),unit:this._unit,...e});throw"operands should be of the same type"}prod(t,e){return new this.constructor(this*t,void 0,{precision:Math.min(this.precision,t.precision||this.constructor.significantFigures(t)),unit:this._unit,...e})}valueOf(){return this._value}toString(){let t=Math.max(1,Math.min(this.precision||0,21));return`${isNaN(this.value)?"-":this.value.toLocaleString(void 0,{minimumSignificantDigits:t,maximumSignificantDigits:t})} ${this.unit}`}toJSON(){let{_value:t,_unit:e,...i}=this;return{...i,value:this.value,unit:this.unit,type:this.constructor.name}}static significantFigures(t){let e;if(0===t)return 0;if("number"===typeof t)e=Math.abs(t).toExponential();else{if("string"!==typeof t||Number.isNaN(Number(t)))return;e=t.replace(/^\+|-/,"").replace(/^0+/,"")}e=e.replace(".","");const i=e.lastIndexOf("e");return i>0?i:e.length}static significantValue(t,e=1){if(0===t)return 0;const i=Math.pow(10,e-Math.floor(Math.log(t<0?-t:t)/Math.LN10)-1);return Math.round(t*i)/i}static get units(){throw"list of available units should be set on constructor."}static get baseUnit(){return Object.keys(this.units)[Object.values(this.units).indexOf(1)]}static from({type:t,value:e,unit:i,...a}={}){if(!t||this.name==t)return new this(e,i,a)}}class Distance extends Quantity{static get units(){return{m:1,Km:.001,ft:3.28084,NM:539957e-9,mi:621371e-9,yd:1.09361}}}class Altitude extends Distance{constructor(t,e,{reference:i,...a}={}){if("FL"==e)i="QNE";else if(e&&!i)throw`property 'reference' should be given, got '${i}'`;super(t,e,{...a,reference:i})}get value(){return"FL"==this.unit?this.constructor.significantValue(this._to(this._value),2):this._to(this._value)}set value(t){super.value=t}toString(){return"FL"==this.unit?"FL"+String(this.value).padStart(3,"0"):this.value&&this.reference?`${super.toString()} ${this.reference}`:void 0}static get references(){return["MSL","AGL","QNH","QNE","QFE","WGS84"]}static get units(){return{m:1,ft:3.28084,FL:.0328084}}}class Speed extends Quantity{static get units(){return{"m/s":1,"km/h":3.6,"ft/min":196.85,kt:1.94384,mph:2.23694}}}class Volume extends Quantity{static get units(){return{m3:1,L:1e3,"gal US":264.172,"gal Imp":219.969}}}class Consumption extends Volume{static get references(){return["h","1000ft","u"]}toString(t){return`${super.toString(t)}/${this.reference}`}}class Weight extends Quantity{static get units(){return{kg:1,lb:2.20462,t:.001,"L-avgas":1/.721,"L-JetA1":1.25}}}class Angle extends Quantity{static get units(){return{rad:1,"°":180/Math.PI,gon:200/Math.PI,rev:.5/Math.PI,"₥":3200/Math.PI}}}class Azimuth extends Angle{get value(){return this._to((this._value+2*Math.PI)%(2*Math.PI))}set value(t){super.value=t}}class Pressure extends Quantity{static get units(){return{Pa:1,hPa:.01,Psi:1/6894.76,atm:1/101325,bar:1e-5,inHg:1/3386.389}}}class Temperature extends Quantity{static get units(){return{"°C":[1,0],K:[1,273.15],"°F":[9/5.32]}}_from(t,e=this.unit){return Number(t)/this._factor(e)[0]+this._factor(e)[1]}_to(t,e=this.unit){return(Number(t)-this._factor(e)[1])*this._factor(e)[0]}}class Frequency extends Quantity{static get units(){return{Hz:1,KHz:.001,MHz:1e-5,GHz:1e-8}}}},"56d7":function(t,e,i){"use strict";i.r(e);var a=i("2b0e"),render=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Navbar"),i("router-view")],1)},r=[],Navbarvue_type_template_id_b1053282_render=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-navbar",{staticClass:"is-radiusless",attrs:{"fixed-top":""}},[i("template",{slot:"brand"},[i("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[i("img",{attrs:{src:"img/icons/android-chrome-192x192.png",alt:"Navue, a navigation tool for general aviation."}})])],1),i("template",{slot:"start"},[i("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Briefing"}}},[t._v("Briefing")]),i("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Fly"}}},[t._v("Fly")]),i("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Debriefing"},disabled:""}},[t._v("Debriefing")]),i("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Monitor"}}},[t._v("Monitor")])],1),i("template",{slot:"end"},[i("b-navbar-item",[i("AircraftManager",{attrs:{triggers:["click","hover"]},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.selected;return[i("b-button",{attrs:{type:"is-primary","icon-right":"chevron-down"}},[t._v(" "+t._s(a?a.registration:"Select an aircraft")+" ")])]}}])})],1),i("b-navbar-dropdown",{attrs:{hoverable:"",collapsible:"",right:""}},[i("template",{slot:"label"},[i("b-icon",{attrs:{icon:"account"}})],1),i("b-navbar-item",{staticStyle:{"min-width":"30vw"},attrs:{tag:"div"}},[i("Login")],1)],2)],1)],2)},n=[],s=i("7226"),Loginvue_type_template_id_bffc7274_render=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("nav",{staticClass:"level"},[i("div",{staticClass:"level-item has-text-centered"},[i("div",[i("p",{staticClass:"heading"},[t._v("Aircrafts")]),i("p",{staticClass:"title"},[t._v(t._s(t.userStats.Aircraft||0))])])]),i("div",{staticClass:"level-item has-text-centered"},[i("div",[i("p",{staticClass:"heading"},[t._v("Navigations")]),i("p",{staticClass:"title"},[t._v(t._s(t.userStats.Navigation||0))])])]),i("div",{staticClass:"level-item has-text-centered"},[i("div",[i("p",{staticClass:"heading"},[t._v("Flights")]),i("p",{staticClass:"title"},[t._v(t._s(t.userStats.Flight||0))])])]),i("div",{staticClass:"level-item has-text-centered"},[i("div",[i("p",{staticClass:"heading"},[t._v("Storage")]),i("p",{staticClass:"title"},[t._v(t._s(t._f("percent")(t.userStats.storage||0)))])])])]),i("b-loading",{attrs:{"is-full-page":!1,active:!!t.error}}),t.currentUser?i("div",[i("nav",{staticClass:"level is-mobile"},[i("div",{staticClass:"level-item has-text-centered"},[i("b-icon",{attrs:{icon:t.syncIcons[t.syncStatus]}})],1),i("div",{staticClass:"level-item has-text-centered"},[i("h5",{staticClass:"title is-5"},[t._v(t._s(t.currentUser.name))])])]),i("nav",{staticClass:"level"},[i("div",{staticClass:"level-item has-text-centered"},[i("b-button",{attrs:{type:"is-primary","icon-left":"account-arrow-right-outline"},on:{click:t.logoutUser}},[t._v("Sign out")])],1),i("div",{staticClass:"level-item has-text-centered"},[i("b-button",{attrs:{type:"is-primary is-light","icon-left":"account-edit-outline"},on:{click:t.openDetails}},[t._v("Edit")])],1)])]):i("fieldset",[i("b-field",{attrs:{label:"Email",horizontal:""}},[i("b-input",{attrs:{type:"email",icon:"email",placeholder:"pilote@navue.io",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),i("b-field",{attrs:{label:"Password",horizontal:""}},[i("b-input",{attrs:{type:"password",icon:"lock",placeholder:"*******",required:"","password-reveal":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("b-field",{attrs:{"is-grouped":""}},[i("b-button",{staticClass:"is-primary",attrs:{"icon-left":"account-arrow-left-outline",expanded:""},on:{click:function(e){return t.loginUser(t.username,t.password)}}},[t._v("Sign in")]),i("b-button",{staticClass:"is-primary is-light",attrs:{"icon-left":"account-plus-outline"},on:{click:function(e){return t.createUser(t.username,t.password)}}},[t._v("Create Account")]),t.gotLocalData?i("b-button",{staticClass:"is-danger is-light",attrs:{"icon-left":"database-remove"},on:{click:t.cleanLocal}},[t._v("Clear device")]):t._e()],1)],1)],1)},o=[],UserDetailsvue_type_template_id_2fe7fb40_render=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-card"},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v(t._s(t.value.name))]),i("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),i("fieldset",{staticClass:"modal-card-body"},[i("b-taglist",t._l(t.value.roles,(function(e){return i("b-tag",{key:e,attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(e))])})),1),i("b-field",{attrs:{label:"Licences"}},[i("b-taginput",{attrs:{ellipsis:"",icon:"label",placeholder:"Add a Licence","aria-close-label":"Delete this tag"},model:{value:t.value.licences,callback:function(e){t.$set(t.value,"licences",e)},expression:"value.licences"}})],1),i("b-field",{attrs:{label:"Organization"}},[i("b-input",{attrs:{type:"text",icon:"domain"},model:{value:t.value.organization,callback:function(e){t.$set(t.value,"organization",e)},expression:"value.organization"}})],1),i("b-button",{attrs:{type:"is-primary","icon-left":"account-edit-outline",expanded:""},on:{click:function(e){return t.updateMetadata(t.metadata)}}},[t._v("Save")]),i("div",{staticClass:"divider is-danger"},[t._v("Danger Zone")]),i("b-field",{attrs:{type:"is-warning"}},[i("b-input",{attrs:{type:"password","password-reveal":"",expanded:"",autocomplete:"new-password",icon:"account-key"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),i("p",{staticClass:"control"},[i("b-button",{attrs:{type:"is-warning is-light","icon-left":"lock-reset"},on:{click:function(e){return t.confirmAndupdatePassword(t.newPassword)}}},[t._v("Change Password")])],1)],1),i("b-button",{attrs:{expanded:"",type:"is-danger","icon-left":"account-remove"},on:{click:function(e){return t.confirmAnddeleteUser()}}},[t._v("Delete Account")])],1),i("footer",{staticClass:"modal-card-foot"},[t._v(" Member since "+t._s(t._f("asDate")(t.value.created_at))+" ")])])},c=[];const u={data(){return{syncHandle:null,remoteDbUrl:new URL("https://db.treville.fr:8443")}},async created(){let t,e,i,a={_id:"_design/user",views:{"count-items":{map:function({type:t}){emit(t)}.toString(),reduce:"_count"},stats:{map:function({type:t,length:e,duration:i}){switch(t){case"Navigation":emit("NavigationDistance",e||0);break;case"Flight":emit("FlightTime",i||0);break;default:emit(t)}}.toString(),reduce:"_sum"}}};try{({_rev:t,views:e}=await this.$pouch.get(a._id))}catch{i=!0}finally{(i||JSON.stringify(e)!=JSON.stringify(a.views))&&await this.$pouch.put({_rev:t,...a})}},computed:{currentUser:{get(){return this.$store.state.currentUser},set(t){this.$store.commit("currentUser",t)}},remoteDB(){return this.$pouch.getDB(this.remoteDbUrl)}},methods:{async setCurrentUser(){try{const{userCtx:{name:t}}=await this.remoteDB.getSession();if(t)return this.currentUser=await this.remoteDB.getUser(t),this.$pouch.getDB(new URL(this.userDBname(this.currentUser.name),this.remoteDbUrl));new Error("No session available.")}catch(t){console.error(t)}},userDBname(t){return"userdb-"+Array.from(t).map(t=>t.charCodeAt(0)<128?t.charCodeAt(0).toString(16):encodeURIComponent(t).replace(/%/g,"").toLowerCase()).join("")},getUserStats(t){return Promise.allSettled([t.query("user/count-items",{group:!0}).then(({rows:t})=>t.reduce((t,e)=>(t[e.key]=e.value,t),{})),navigator.storage.estimate().then(({usage:t,quota:e})=>({storage:t/e}))]).then(t=>t.reduce((t,{status:e,value:i})=>("fulfilled"==e&&(t={...t,...i}),t),{})).catch(console.error)},startSync(t,e){this.stopSync(),this.syncHandle=this.$pouch.sync(t,{}),e&&this.syncHandle.on("active",t=>e("active",t)).on("change",t=>e("change",t)).on("paused",t=>e("paused",t)).on("complete",t=>e("complete",t)).on("error",t=>e("error",t)).on("denied",t=>e("denied",t))},stopSync(){if(this.syncHandle)return this.syncHandle.cancel()},async cleanLocal(){await this.$pouch.viewCleanup();try{await this.$pouch.destroy()}finally{this.$store.commit("cleanStore")}}}};var l=i("08df"),d={name:"UserDetails",mixins:[u,l["c"]],data(){return{newPassword:null,confirm:{deleteUser:{title:"Deleting account",message:"Are you sure you want to <b>delete</b> your account? This action cannot be undone.",confirmText:"Delete Account"},updatePassword:{type:"is-warning",title:"Change Password",message:"Are you sure you want to <b>change</b> current password.",confirmText:"Change password"}}}},props:["value"],computed:{metadata(){const{_id:t,_rev:e,type:i,name:a,roles:r,...n}=this.value;return n}},methods:{async confirmAnddeleteUser(){const{result:t}=await this.confirmAction(this.confirm.deleteUser);if(t)try{await this.remoteDB.deleteUser(this.value.name),this.$emit("update-user"),this.$emit("close"),this.openWarning({message:"Account deleted."})}catch(e){this.openWarning(e)}},async updateMetadata(t){try{await this.remoteDB.putUser(this.value.name,{metadata:t}),this.$emit("update-user"),this.$emit("close"),this.openWarning({message:"Account saved."})}catch(e){this.openWarning(e)}},async confirmAndupdatePassword(t){const{result:e}=await this.confirmAction(this.confirm.updatePassword);if(e)try{await this.remoteDB.changePassword(this.value.name,t),this.$emit("close"),this.openWarning({message:"Password changed."})}catch(i){this.openWarning(i)}finally{this.newPassword=null}}},filters:{asDate(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"})}}},h=d,p=i("2877"),m=Object(p["a"])(h,UserDetailsvue_type_template_id_2fe7fb40_render,c,!1,null,null,null),f=m.exports,g={name:"Login",mixins:[u,l["c"]],data(){return{statsFeed:void 0,username:null,password:null,userStats:{},importData:{title:"Import data",type:"is-warning",message:"Some data are present in this device. Would you like to import them into your account ?",confirmText:"Yes",cancelText:"No"},syncStatus:"complete",syncIcons:{active:"cloud-sync-outline fade",change:"cloud-sync-outline fade",paused:"cloud-check-outline",complete:"cloud-off-outline",error:"weather-cloudy-alert",denied:"weather-cloudy-alert"},serverPresent:void 0,error:!1}},async mounted(){this.serverPresent=await this.checkServer("navue")},async created(){await this.setupUser()},beforeDestroy(){this.statsFeed&&this.statsFeed.cancel()},computed:{gotLocalData(){return this.userStats.constructor===Object&&Object.keys(this.userStats).length>1}},methods:{async checkServer(t){try{return clearTimeout(this.error),this.error=!1,await this.remoteDB.info()}catch(e){this.error=setTimeout(this.checkServer,3e3,t)}},async createUser(t,e){try{await this.remoteDB.signUp(t,e,{metadata:{created_at:new Date}}),this.openWarning({message:"Welcome on navue !",duration:5e3}),await this.loginUser(t,e)}catch(i){this.openWarning(i)}},async setupUser(){try{this.setUserStats(),this.setStatsFeed();const t=await this.setCurrentUser();if(t)return await this.startSync(t,this.syncHandler),!0}catch(t){console.error(t)}},async loginUser(t,e){this.stopSync();try{if(await this.remoteDB.logIn(t,e),this.gotLocalData){const{result:t}=await this.confirmAction(this.importData);t||this.cleanLocal()}await this.setupUser(),this.openWarning({message:"You're in !",duration:1e3}),this.username=this.password=null}catch(i){this.openWarning(i)}},async logoutUser(){this.stopSync();try{await this.remoteDB.logOut(),this.currentUser=void 0,this.openWarning({message:"You're out !",duration:1e3})}catch(t){this.openWarning(t)}finally{this.cleanLocal()}},setStatsFeed(){this.statsFeed=this.$pouch.getDB().on("destroyed",t=>{t&&(this.$pouch.getDB(),this.statsFeed&&this.statsFeed.cancel(),this.setUserStats(),this.statsFeed=this.setStatsFeed())}).changes({since:"now",live:!0,view:"user/count-items",filter:"_view"}).on("change",this.setUserStats)},async setUserStats(){this.userStats=await this.getUserStats(this.$pouch)},async checkSession(){try{return await this.setCurrentUser()}catch{this.logoutUser()}},syncHandler(t,e){this.syncStatus=t,t in["error","denied"]&&this.openWarning(e)},openDetails(){this.modal=this.$buefy.modal.open({parent:this,component:f,props:{value:this.currentUser},events:{"update-user":this.checkSession},hasModalCard:!1,trapFocus:!0,"append-to-body":!0})}},filters:{percent(t){return Math.ceil(100*t)+"%"}}},v=g,b=(i("039a"),Object(p["a"])(v,Loginvue_type_template_id_bffc7274_render,o,!1,null,null,null)),y=b.exports,_={name:"Navbar",components:{AircraftManager:s["a"],Login:y},computed:{currentAircraft(){return this.$store.state.currentAircraft}}},w=_,k=Object(p["a"])(w,Navbarvue_type_template_id_b1053282_render,n,!1,null,null,null),S=k.exports,D={components:{Navbar:S}},x=D,$=(i("5c0b"),Object(p["a"])(x,render,r,!1,null,null,null)),N=$.exports,C=i("acfa"),A=i("2c4e");if("serviceWorker"in navigator){const t=new C["a"]("/service-worker.js");t.addEventListener("installed",t=>{t.isUpdate?A["a"].open({type:"is-warning",message:"Loading new version of naVue.",actionText:null,indefinite:!1,duration:1e3}):A["a"].open({type:"is-warning",message:"naVue is now installed on your device.",actionText:null,indefinite:!1,duration:1e3})}),t.addEventListener("waiting",()=>{A["a"].open({type:"is-warning",indefinite:!0,message:"A new version of naVue is available.",actionText:"Use it now",onAction:()=>{t.messageSW({type:"SKIP_WAITING"})}})}),t.addEventListener("controlling",()=>{window.location.reload()}),t.addEventListener("activated",()=>{A["a"].open({type:"is-warning",message:"Welcome to the new version of naVue.",actionText:null,indefinite:!1,duration:1e3})}),t.register()}var L=i("8c4f");a["a"].use(L["a"]);const O=[{path:"/",name:"Home",component:()=>i.e("chunk-5ac5a83e").then(i.bind(null,"bb51"))},{path:"/aircraft",name:"Aircraft",component:()=>Promise.all([i.e("chunk-2f5398a4"),i.e("chunk-2d221f18")]).then(i.bind(null,"cd01"))},{path:"/brief",name:"Briefing",component:()=>Promise.all([i.e("chunk-2f5398a4"),i.e("chunk-4b659c3c"),i.e("chunk-6a3eae22")]).then(i.bind(null,"a0f4"))},{path:"/fly",name:"Fly",component:()=>Promise.all([i.e("chunk-2f5398a4"),i.e("chunk-4b659c3c"),i.e("chunk-05ee3090")]).then(i.bind(null,"ef23"))},{path:"/debrief",name:"Debriefing",component:()=>i.e("chunk-2d0c8dd2").then(i.bind(null,"5760"))},{path:"/monitor",name:"Monitor",component:()=>i.e("chunk-2d0c8dd2").then(i.bind(null,"5760"))},{path:"/about",name:"About",component:()=>i.e("chunk-2d22d746").then(i.bind(null,"f820"))}],F=new L["a"]({mode:"history",routes:O,linkActiveClass:"is-active",scrollBehavior(t){if(t.hash)return{selector:t.hash}}});var P=F,M=i("2f62"),U=i("1caf"),W=i("b98f"),B=i("f9de"),T=i("00b4");a["a"].use(M["a"]);var j=new M["a"].Store({state:{currentUser:void 0,currentAircraft:void 0,currentNavigation:void 0,currentLocation:void 0,currentFlight:void 0},mutations:{currentUser(t,{derived_key:e,iterations:i,password_scheme:a,salt:r,...n}={}){t.currentUser=0==Object.keys(n).length?void 0:n},currentAircraft(t,e){t.currentAircraft=e?W["a"].from(e):e},currentNavigation(t,e){t.currentNavigation=e?U["a"].from(e):e},currentFlight(t,e){t.currentFlight=e?T["a"].from(e):e},currentLocation(t,e){t.currentLocation=e?B["a"].from(e):e},cleanStore(t){t.currentUser=void 0,t.currentAircraft=void 0,t.currentNavigation=void 0,t.currentFlight=void 0,t.currentLocation=void 0}},actions:{async saveToDB(t,e){let i=JSON.parse(JSON.stringify(e));i._id||(i._id=`${i.type}-${Date.now()}`);let{id:a}=await this._vm.$pouch.put(i);return await this._vm.$pouch.get(a,{include_docs:!0})},deleteFromDB(t,e){return this._vm.$pouch.remove(e)}}}),q=i("289d"),E=(i("5363"),i("d6e1")),I=i("fcd3"),J=i("eae4");a["a"].use(q["a"],{defaultProgrammaticPromise:!0}),E["a"].plugin(I["a"]),a["a"].use(J["a"],"navue"),a["a"].config.productionTip=!1,new a["a"]({router:P,store:j,render:t=>t(N)}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var a=i("9c0c"),r=i.n(a);r.a},7174:function(t,e,i){},7226:function(t,e,i){"use strict";var render=function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("b-dropdown",e._b({scopedSlots:e._u([{key:"trigger",fn:function(){return[e._t("default",[a("b-button",[a("b-tooltip",{attrs:{position:"is-bottom",label:e.selectedData?e.selectedData.registration:"Aircraft"}},[a("b-icon",{attrs:{icon:"airplane",type:e.selectedData?"is-success":""}})],1)],1)],{selected:e.selectedData})]},proxy:!0}],null,!0)},"b-dropdown",e.$attrs,!1),[e.selectedData?[e.$slots.header||e.$scopedSlots.header?a("b-dropdown-item",{attrs:{custom:""}},[e._t("header",null,{selected:e.selectedData})],2):e._e(),e.$slots.header||e.$scopedSlots.header?a("b-dropdown-item",{attrs:{separator:""}}):e._e(),e.edit?[a("b-dropdown-item",{on:{click:e.saveData}},[a("b-icon",{attrs:{icon:"cloud-upload-outline",type:"is-warning"}}),e._v(" Save ")],1),a("b-dropdown-item",{on:{click:e.exportData}},[a("b-icon",{attrs:{icon:"download-outline"}}),e._v(" Export ")],1),e.create?a("b-dropdown-item",{attrs:{disabled:!e.fromDB},on:{click:function(t){e.selectedData=e.cloneData(e.selectedData)}}},[a("b-icon",{attrs:{icon:"plus-circle-multiple-outline"}}),e._v(" Clone ")],1):e._e(),a("b-dropdown-item",{attrs:{disabled:!e.fromDB},on:{click:e.deleteData}},[a("b-icon",{attrs:{icon:"delete-outline",type:"is-danger"}}),e._v(" Delete ")],1)]:e._e(),a("b-dropdown-item",e._g({},e.persistent?{click:e.createData}:{click:e.discardData}),[a("b-icon",{attrs:{icon:"selection-off"}}),e._v(" Discard ")],1)]:[a("b-dropdown-item",{attrs:{custom:""}},[a("b-autocomplete",{attrs:{placeholder:"Choose an aircraft",data:e.availableData||[],field:e.searchedProperty,"open-on-focus":"","keep-first":"","clear-on-select":"",clearable:""},on:{select:function(e,i){i.stopPropagation(),t.selectedData=e}},scopedSlots:e._u([e.search?{key:"empty",fn:function(){return[a("i",[e._v(e._s(e.search))]),e._v(" not found ")]},proxy:!0}:{key:"empty",fn:function(){return[e._v(" No aircraft registered ")]},proxy:!0}],null,!0),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.create?a("b-dropdown-item",{on:{click:e.createData}},[a("b-icon",{attrs:{icon:"plus-circle-outline"}}),e._v(" New Aircraft ")],1):e._e(),e.create?a("b-dropdown-item",[a("b-upload",{attrs:{accept:"application/json",expanded:""},on:{input:e.importData},model:{value:e.upload,callback:function(t){e.upload=t},expression:"upload"}},[a("b-icon",{attrs:{icon:"upload"}}),e._v(" Import ")],1)],1):e._e()],"Aircraft"!=e.$route.name?a("b-dropdown-item",{attrs:{"has-link":""}},[a("router-link",{attrs:{to:{name:"Aircraft"}}},[e._v(" Manage Aircrafts ")])],1):e._e()],2)},a=[],r=i("1db5"),n=i("b98f"),s={name:"AircraftManager",mixins:[r["a"]],data(){return{constructor:n["a"],storeKey:"currentAircraft",searchedProperty:"registration"}}},o=s,c=i("2877"),u=Object(c["a"])(o,render,a,!1,null,null,null);e["a"]=u.exports},"9c0c":function(t,e,i){},b98f:function(t,e,i){"use strict";i.d(e,"a",(function(){return Aircraft}));var a=i("bd67"),r=i("3634"),n=i("0c9a");class Aircraft extends a["a"]{constructor({registration:t,manufacturer:e,model:i,paces:s=new a["b"],consumptions:o=new a["b"],balance:c=new a["b"]({date:void 0}),envelopes:u=new a["b"],checklists:l=new a["b"]}={}){s.keep(t=>t instanceof r["g"]?t:void 0),o.keep(t=>t instanceof r["c"]?t:void 0),c.keep(t=>t instanceof n["a"]?t:void 0),u.keep(t=>t instanceof a["b"]?t:void 0),l.keep(t=>t instanceof a["b"]?t:void 0),super({registration:t,manufacturer:e,model:i,paces:s,consumptions:o,balance:c,envelopes:u,checklists:l})}static from({_id:t,_rev:e,type:i,registration:s,manufacturer:o,model:c,paces:u,consumptions:l,balance:d,envelopes:h,checklists:p}={}){if(arguments[0]instanceof this)return arguments[0];if(i!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${i}'`;{u&&(u=a["b"].from(u,r["g"])),l&&(l=a["b"].from(l,r["c"])),d&&(d=a["b"].from(d,n["a"])),h&&(h=a["b"].from(h,a["b"],n["a"])),p&&(p=a["b"].from(p,a["b"]));let i=new this({registration:s,manufacturer:o,model:c,paces:u,consumptions:l,balance:d,envelopes:h,checklists:p});return t&&e&&Object.assign(i,{_id:t,_rev:e}),i}}}},bd67:function(t,e,i){"use strict";i.d(e,"a",(function(){return Model})),i.d(e,"b",(function(){return Store}));class Model{constructor({type:t,...e}={}){Object.assign(this,e)}toJSON(){return{...this,type:this.constructor.name}}clone(){return this.constructor.from(JSON.parse(JSON.stringify(this)))}static from({type:t,...e}={}){if(arguments[0]instanceof this)return arguments[0];if(t==this.name)return new this(e);throw`Invalid data : 'type' should be '${this.name}' got '${t}'`}}class Store{constructor(t={},...e){this.items=e,Object.assign(this,t)}[Symbol.iterator](){return this.items[Symbol.iterator]()}get length(){return this.items.length}valueOf(){return this.items}get properties(){let{items:t,...e}={...this};return e}get first(){return this.items[0]}get last(){return this.items[this.length-1]}add(t,e){return e?this.items.splice(e,0,t):this.items.push(t),this.length}remove(t,e){return void 0===e&&(e=this.items.indexOf(t)),e>=0&&1==this.items.splice(e,1).length}keep(t){let e=this.items.length;while(e--){let i=t.call(this.items,this.items[e]);void 0==i?this.items.splice(e,1):Object.is(i,this.items[e])||this.items.splice(e,1,i)}return this}toJSON(){return{...this.properties,items:this.items,type:this.constructor.name}}static from({type:t,items:e=[],...i},...a){if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{let t=a.shift();return new this(i,...e.map(e=>t?t.from(e,...a):e))}}}},f9de:function(t,e,i){"use strict";i.d(e,"b",(function(){return Waypoint})),i.d(e,"a",(function(){return Location}));var a=i("bd67"),r=i("3634"),n=i("d425");class Waypoint extends a["a"]{constructor(t,e,i,a={}){!i||i instanceof r["a"]||(i=new r["a"](i)),super({latitude:t,longitude:e,altitude:i,...a})}set latlng({lat:t,lng:e}={}){this.latitude=t,this.longitude=e}get latlng(){return{lat:this.latitude,lng:this.longitude}}get point(){return new n["a"](this.latitude,this.longitude)}distanceTo(t,e){return new r["d"](this.point.rhumbDistanceTo(t.point),"m",e)}bearingTo(t,e){return new r["b"](this.point.rhumbBearingTo(t.point),"°",e)}destinationPoint(t,e){let i=this.point.rhumbDestinationPoint(t,e);return new this.constructor(i.lat,i.lng)}toGeoJSON(t="Feature"){const{latitude:e,longitude:i,altitude:a,...r}=this;switch(t){case"Feature":return{type:t,properties:{...r,altitude:a.toJSON()},geometry:this.toGeoJSON("Point")};case"Point":return{type:t,coordinates:this.toGeoJSON("Position")};case"Position":return[e,i,Number(a)];default:throw"not a valid GeoJSON object"}}static from({type:t,latitude:e,longitude:i,altitude:a,latlng:n,...s}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;return a&&(a=r["a"].from(a)),n&&(e=e||n.lat,i=i||n.lng),new this(e,i,a,s)}}class Location extends Waypoint{constructor(t,e,i,{accuracy:a,speed:r,heading:n,timestamp:s,...o}={}){super(t,e,i,{accuracy:a,speed:r,heading:n,timestamp:s,...o})}_delayFrom({timestamp:t}){return this.timestamp-t}_climbFrom({altitude:t}){return this.altitude-t}_speedFrom(t){if(0==this._delayFrom(t))throw"Teleportation is not yet a possibility";return new r["g"](this.distanceTo(t)/this._delayFrom(t)*1e3)}_verticalSpeedFrom(t){if(0==this._delayFrom(t))throw"Teleportation is not yet a possibility";return new r["g"](this._climbFrom(t)/this._delayFrom(t)*1e3)}movementFrom(t){return{speed:this._speedFrom(t),verticalSpeed:this._verticalSpeedFrom(t),heading:t.bearingTo(this)}}toBounds(t=this.accuracy){const e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.latitude);return[[this.latitude-e,this.longitude-i],[this.latitude+e,this.longitude+i]]}positionInSeconds(t,e=this.heading){if(this.speed&&e)return this.destinationPoint(this.speed*t,e.value);throw"cannot calculate futur position, speed & heading should be provided"}static from({accuracy:t,speed:e,heading:i,timestamp:a,...n}={}){return arguments[0]instanceof this?arguments[0]:(t&&(t=r["d"].from(t)),e&&(e=r["g"].from(e)),i&&(i=r["b"].from(i)),delete n._id,delete n._rev,super.from({...n,accuracy:t,speed:e,heading:i,timestamp:a}))}static fromGeolocationPosition(t){let e,i,a,n;return t.coords.altitude&&(e=new r["a"](t.coords.altitude,"m",{reference:"WGS84",accuracy:t.coords.altitudeAccuracy})),t.coords.accuracy&&(n=new r["d"](t.coords.accuracy,"m")),t.coords.speed&&(i=new r["g"](t.coords.speed,"m/s")),t.coords.heading&&(a=new r["b"](t.coords.heading,"°")),this.from({type:"Location",latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:n,altitude:e,speed:i,heading:a,timestamp:t.timestamp})}static fromLocate({latitude:t,longitude:e,accuracy:i,altitude:a,altitudeAccuracy:n,speed:s,heading:o,timestamp:c}){return a&&(a=new r["a"](a,"m",{reference:"WGS84",accuracy:n})),i&&(i=new r["d"](i,"m")),s&&(s=new r["g"](s,"m/s")),o&&(o=new r["b"](o,"°")),this.from({type:"Location",latitude:t,longitude:e,accuracy:i,altitude:a,speed:s,heading:o,timestamp:c})}}}});
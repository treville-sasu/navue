(function(t){function webpackJsonpCallback(e){for(var a,n,s=e[0],o=e[1],u=e[2],l=0,d=[];l<s.length;l++)n=s[l],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);c&&c(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),checkDeferredModules()}function checkDeferredModules(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var o=a[s];0!==i[o]&&(n=!1)}n&&(r.splice(e--,1),t=__webpack_require__(__webpack_require__.s=a[0]))}return t}var e={},a={app:0},i={app:0},r=[];function jsonpScriptSrc(t){return __webpack_require__.p+"js/"+({}[t]||t)+"."+{"chunk-2d0c8dd2":"8f8fabb7","chunk-2d22d746":"5d83d686","chunk-2f5398a4":"e9040b03","chunk-1380797a":"9c0620cc","chunk-6646227c":"64984d17","chunk-ed85a372":"f533177c","chunk-2d221f18":"9c6c34cc","chunk-5ac5a83e":"9a5d33e3"}[t]+".js"}function __webpack_require__(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.e=function requireEnsure(t){var e=[],r={"chunk-1380797a":1,"chunk-6646227c":1,"chunk-ed85a372":1};a[t]?e.push(a[t]):0!==a[t]&&r[t]&&e.push(a[t]=new Promise((function(e,i){for(var r="css/"+({}[t]||t)+"."+{"chunk-2d0c8dd2":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-2f5398a4":"31d6cfe0","chunk-1380797a":"1d4f2a7e","chunk-6646227c":"f9b02d7e","chunk-ed85a372":"48d2b289","chunk-2d221f18":"31d6cfe0","chunk-5ac5a83e":"31d6cfe0"}[t]+".css",n=__webpack_require__.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===n))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){c=l[o],u=c.getAttribute("data-href");if(u===r||u===n)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||n,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[t],d.parentNode.removeChild(d),i(s)},d.href=n;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){a[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=s);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,__webpack_require__.nc&&c.setAttribute("nonce",__webpack_require__.nc),c.src=jsonpScriptSrc(t);var u=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var a=i[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",u.name="ChunkLoadError",u.type=r,u.request=n,a[1](u)}i[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,a){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)__webpack_require__.d(a,i,function(e){return t[e]}.bind(null,i));return a},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t["default"]}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="/",__webpack_require__.oe=function(t){throw console.error(t),t};var n=window["webpackJsonp"]=window["webpackJsonp"]||[],s=n.push.bind(n);n.push=webpackJsonpCallback,n=n.slice();for(var o=0;o<n.length;o++)webpackJsonpCallback(n[o]);var c=s;r.push([0,"chunk-vendors"]),checkDeferredModules()})({0:function(t,e,a){t.exports=a("56d7")},"00b4":function(t,e,a){"use strict";a.d(e,"a",(function(){return Flight}));var i=a("bd67"),r=a("f9de");class Flight extends i["a"]{constructor({name:t,notes:e,checked:a=[],milestones:i=[]}={},...n){n.every(t=>t instanceof r["a"])?n=[n]:n.every(t=>t instanceof Array&&t.every(t=>t instanceof Array))&&(n=n.flat()),super({name:t,notes:e,locations:n,checked:a,milestones:i})}addLocation(t){return this.locations[this.locations.length-1].push(r["a"].from(t)),this}addTrace(...t){return t.every(t=>t instanceof Array)&&(t=t.flat()),0==this.locations[0].length?this.locations[0]=t:this.locations.push(t),this}get geom(){return this.locations.map(t=>t.map(({latitude:t,longitude:e,altitude:a})=>[t,e,Number(a)]))}toGeoJSON(t="Feature"){const{locations:e,...a}=this;switch(t){case"Feature":return{type:t,properties:{...a},geometry:this.toGeoJSON("MultiLineString")};case"MultiLineString":return{type:t,coordinates:this.geom};case"MultiPoint":return{type:t,coordinates:this.geom.flat()};default:throw"not a valid GeoJSON object"}}toBounds(){return this.locations.flat().reduce((t,{latitude:e,longitude:a},i)=>0==i?[[e,a],[e,a]]:[[Math.min(e,t[0][0]),Math.min(a,t[0][1])],[Math.max(e,t[1][0]),Math.max(a,t[1][1])]],void 0)}static from({type:t,locations:e,_id:a,_rev:i,...n}={}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{e&&(e=e.map(t=>t.map(t=>r["a"].from(t))));let t=new this(n,...e);return a&&i&&Object.assign(t,{_id:a,_rev:i}),t}}}},"039a":function(t,e,a){"use strict";var i=a("7174"),r=a.n(i);r.a},"08df":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return s}));const i={data(){return{envelopesDataset:{showLines:!0,showLine:!0,fill:"start",borderWidth:2,pointRadius:5,pointHoverRadius:5,tension:0},cgDataset:{borderWidth:2,pointRadius:5,pointHoverRadius:5}}}},r={methods:{readTextFileAsync(t){return new Promise((e,a)=>{let i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=a,i.readAsText(t)})},downloadJSON(t,e){let a=new Blob([JSON.stringify(t,void 0,2)],{type:"application/json",name:e});const i=document.createElement("a");i.href=URL.createObjectURL(a),i.download=e,i.click()},async uploadJSON(t){let e;return e=JSON.parse(await this.readTextFileAsync(t)),e}}},n={methods:{openWarning(t){return this.$buefy.snackbar.open({position:"is-bottom",type:"is-danger",duration:5e3,queue:!1,...t})},confirmAction(t){return this.$buefy.dialog.confirm({type:"is-danger",hasIcon:!0,...t})}}},s={data(){return{wakeLock:null}},mixins:[n],mounted(){this.requestWakeLock(),document.addEventListener("visibilitychange",this.requestWakeLock)},beforeDestroy(){document.removeEventListener("visibilitychange",this.requestWakeLock),this.wakeLock&&this.wakeLock.release()},methods:{async requestWakeLock(){try{if(!("wakeLock"in navigator)||"visible"!==document.visibilityState)throw"WakeLock unavaliable";this.wakeLock=await navigator.wakeLock.request("screen")}catch(t){this.openWarning(t)}}}}},1:function(t,e){},"1caf":function(t,e,a){"use strict";a.d(e,"a",(function(){return Navigation}));var i=a("bd67"),r=a("f9de");class Navigation extends i["a"]{constructor({name:t,notes:e}={},...a){a=new i["b"]({},...a).keep(t=>t.keep(t=>t instanceof r["b"]?t:void 0)),super({name:t,notes:e,routes:a})}get waypoints(){return this.routes.items.map(t=>t.items).flat()}get poi(){return this.waypoints.map(t=>t.name).filter(t=>/^[A-Z]{4}$/.test(t))}addRoute(...t){return this.routes.add(new i["b"]({},...t)),this.routes.last}removeRoute(t){return this.routes.remove(t)}clearRoute(t){if(t=this.getRoute(t),t&&0==t.length)return this.removeRoute(t),!0}addWaypoint({insertBefore:t,...e}={},a){return a=this.getRoute(a),a.add(r["b"].from({...e,type:"Waypoint"}),t)}removeWaypoint(t,e){return e=this.getRoute(e),Number.isInteger(t)?e.remove(void 0,t):e.remove(t)}getNextWaypoint(t){const e=this.waypoints.indexOf(t);return this.waypoints[e+1]}getRoute(t){return t instanceof i["b"]?t:isFinite(t)?this.routes.items[t]:this.last}getRouteId(t){return t instanceof i["b"]?this.routes.indexOf(t):Number.isInteger(t)?t:this.routes.length-1}toBounds(){return this.waypoints.reduce((t,{latitude:e,longitude:a},i)=>0==i?[[e,a],[e,a]]:[[Math.min(e,t[0][0]),Math.min(a,t[0][1])],[Math.max(e,t[1][0]),Math.max(a,t[1][1])]],void 0)}static from({type:t,routes:e,_id:a,_rev:n,...s}={}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{e&&(e=i["b"].from(e,i["b"],r["b"]));let t=new this(s,...e);return a&&n&&Object.assign(t,{_id:a,_rev:n}),t}}}},"1db5":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("08df");const r={mixins:[i["b"],i["c"]],props:{create:Boolean,edit:Boolean,persistent:Boolean,exist:Boolean},data(){return{search:"",upload:[]}},mounted(){!this.persistent&&!this.exist||this.selectedData||this.createData()},computed:{dataType(){return this.constructor.name},fromDB(){return this.selectedData&&this.selectedData._id&&this.selectedData._rev},selectedData:{get(){return this.$store.state[this.storeKey]},set(t){try{this.$store.commit(this.storeKey,t)}catch(e){0,this.$buefy.dialog.alert({title:"Cannot load item",message:"Selected record is corrupted. It will be purged from database. Do you want to download it localy before ?",type:"is-danger",hasIcon:!0,trapFocus:!0,icon:"cloud-download-outline",confirmText:"Download & Delete",onConfirm:()=>{this.downloadJSON(t,"navue-corrupted-item.json")},canCancel:!0,cancelText:"Just delete it"}),this.$store.dispatch("deleteFromDB",t)}}},selectedName(){return this.selectedData?this.selectedData[this.searchedProperty]:void 0}},pouch:{availableData(){let t={type:this.dataType};return t[this.searchedProperty]={$regex:RegExp(this.search,"i")},{database:"navue",selector:t}}},methods:{createData(t){this.selectedData=new this.constructor(t)},async saveData(){try{this.selectedData=await this.$store.dispatch("saveToDB",this.selectedData),this.openWarning({message:`"${this.selectedName}" saved`})}catch(t){this.dispatchError(t)}},discardData(){this.selectedData=void 0},async deleteData(){try{await this.$store.dispatch("deleteFromDB",this.selectedData),this.selectedData=null,this.openWarning({message:`"${this.selectedName}" deleted`})}catch(t){this.dispatchError(t)}},async importData(t){try{let e=await this.uploadJSON(t);this.selectedData=this.cloneData(e),this.openWarning({message:`"${this.selectedName}" imported`})}catch(e){this.dispatchError(e)}},exportData(){this.selectedData&&this.downloadJSON(this.selectedData,this.selectedName+".json")},cloneData(t){let e=t.clone();return delete e._id,delete e._rev,e.name&&(e.name+="-1"),e.registration&&(e.registration+="(cloned)"),e},dispatchError(t){console.error(t),this.openWarning(t)}}}},3634:function(t,e,a){"use strict";a.d(e,"d",(function(){return Distance})),a.d(e,"a",(function(){return Altitude})),a.d(e,"h",(function(){return Speed})),a.d(e,"c",(function(){return Consumption})),a.d(e,"j",(function(){return Weight})),a.d(e,"b",(function(){return Azimuth})),a.d(e,"g",(function(){return Pressure})),a.d(e,"i",(function(){return Temperature})),a.d(e,"e",(function(){return Frequency})),a.d(e,"f",(function(){return Moment}));var i=a("bd67");class Quantity extends i["a"]{constructor(t,e,{type:a,_precision:i,...r}={}){super(r),e?this.unit=e:this._unit=void 0,t||0===t?this.value=t:this._value=void 0,i&&(this.precision=i)}get value(){return this.constructor.significantValue(this._to(this._value),this._precision)}set value(t){if(isNaN(t))throw t+" is not a number";this._value=this._from(t),this.precision=this.constructor.getSignificativeDigits(t)}get unit(){return this._unit||this.constructor.baseUnit}set unit(t){if(!this.constructor.units[t])throw`'${t}' is not an available unit`;this._unit=t}get factor(){return this.constructor.units[this.unit]}get precision(){return this._precision}set precision(t){this._precision=Math.max(1,Math.min(21,parseInt(t)))}_from(t,e=this.unit){return Number(t)/this._factor(e)}_to(t,e=this.unit){return Number(t)*this._factor(e)}_factor(t){if(this.constructor.units[t])return this.constructor.units[t];throw`'${t}' is not an available unit`}to(t){return this._to(this.value,t)}as(t,e){return Object.assign(this.constructor.from(this),{_unit:t,_precision:e})}valueOf(){return this._value}toString(){return`${isNaN(this.value)?"-":this.value.toLocaleString(void 0,{minimumSignificantDigits:this.precision,maximumSignificantDigits:this.precision})} ${this.unit}`}toJSON(){let{_value:t,_unit:e,_precision:a,...i}=this;return{...i,value:this.value,unit:this.unit,type:this.constructor.name}}static getSignificativeDigits(t){let e=Math.abs(t);if(0===e)return 0;let a=Math.floor(Math.log10(e))+1;return a>0?e/=10**a:a<0&&(e*=10**-a),e=Math.round(1e16*e)/1e16,String(e).length-2}static significantValue(t,e=1){if(0===t)return 0;const a=Math.pow(10,e-Math.floor(Math.log(t<0?-t:t)/Math.LN10)-1);return Math.round(t*a)/a}static get units(){throw"list of available units should be set on constructor."}static get baseUnit(){return Object.keys(this.units)[Object.values(this.units).indexOf(1)]}static from({type:t,value:e,unit:a,...i}={}){if(!t||this.name==t)return new this(e,a,i)}}class Distance extends Quantity{static get units(){return{m:1,Km:.001,ft:3.28084,NM:539957e-9,mi:621371e-9,yd:1.09361}}}class Altitude extends Distance{constructor(t,e,{reference:a,...i}={}){if("FL"==e)a="QNE";else if(e&&!a)throw`property 'reference' should be given, got '${a}'`;super(t,e,{...i,reference:a})}get value(){return"FL"==this.unit?this.constructor.significantValue(this._to(this._value),2):this._to(this._value)}set value(t){super.value=t}toString(){return"FL"==this.unit?"FL"+String(this.value).padStart(3,"0"):this.value&&this.reference?`${super.toString()} ${this.reference}`:void 0}static get references(){return["MSL","AGL","QNH","QNE","QFE","WGS84"]}static get units(){return{m:1,ft:3.28084,FL:.0328084}}}class Speed extends Quantity{static get units(){return{"m/s":1,"km/h":3.6,"ft/min":196.85,kt:1.94384,mph:2.23694}}}class Volume extends Quantity{static get units(){return{m3:1,L:1e3,"gal US":264.172,"gal Imp":219.969}}}class Consumption extends Volume{static get references(){return["h","1000ft","u"]}toString(t){return`${super.toString(t)}/${this.reference}`}}class Weight extends Quantity{static get units(){return{kg:1,lb:2.20462,t:.001,"L-avgas":.7,"L-JetA1":.8}}}class Angle extends Quantity{static get units(){return{rad:1,"°":180/Math.PI,gon:200/Math.PI,rev:.5/Math.PI,"₥":3200/Math.PI}}}class Azimuth extends Angle{get value(){return this._to((this._value+2*Math.PI)%(2*Math.PI))}set value(t){super.value=t}}class Pressure extends Quantity{static get units(){return{Pa:1,hPa:100,Psi:6894.76,atm:101325,bar:1e5,mmHg:101325/760}}}class Temperature extends Quantity{static get units(){return{"°C":[1,0],K:[1,273.15],"°F":[9/5.32]}}_from(t,e=this.unit){return Number(t)/this._factor(e)[0]+this._factor(e)[1]}_to(t,e=this.unit){return(Number(t)-this._factor(e)[1])*this._factor(e)[0]}}class Frequency extends Quantity{static get units(){return{Hz:1,KHz:1e3,MHz:1e5,GHz:1e8}}}class Moment extends i["a"]{constructor(t,e,a={}){t||(t=new Weight),e||(e=new Distance),super({mass:t,lever:e,...a})}get value(){return this.mass.value*this.lever.value}get _value(){return this.mass*this.lever}valueOf(){return this._value}toJSON(){return{...this,type:this.constructor.name}}toCoords(){return{x:this.lever.value,y:this.mass.value}}static from({type:t,mass:e,lever:a,...i}={}){if(arguments[0]instanceof this)return arguments[0];if(t==this.name)return e&&(e=Weight.from(e)),a&&(a=Distance.from(a)),new this(e,a,i);throw`Invalid data : 'type' should be '${this.name}' got '${t}'`}}},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),render=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Navbar"),a("router-view")],1)},r=[],Navbarvue_type_template_id_b54308fe_render=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{staticClass:"is-radiusless",attrs:{"fixed-top":""}},[a("template",{slot:"brand"},[a("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[a("img",{attrs:{src:"img/icons/android-chrome-192x192.png",alt:"Navue, a navigation tool for general aviation."}})])],1),a("template",{slot:"start"},[a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Route"}}},[t._v("Briefing")]),a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"MovingMap"}}},[t._v("Fly")]),a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Replay"},disabled:""}},[t._v("Debriefing")]),a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Radar"}}},[t._v("Monitor")])],1),a("template",{slot:"end"},[a("b-navbar-item",[a("AircraftManager",{attrs:{triggers:["click","hover"]},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.selected;return[a("b-button",{attrs:{type:"is-primary","icon-right":"chevron-down"}},[t._v(" "+t._s(i?i.registration:"Select an aircraft")+" ")])]}}])})],1),a("b-navbar-dropdown",{attrs:{hoverable:"",collapsible:"",right:""}},[a("template",{slot:"label"},[a("b-icon",{attrs:{icon:"account"}})],1),a("b-navbar-item",{staticStyle:{"min-width":"30vw"},attrs:{tag:"div"}},[a("Login")],1)],2)],1)],2)},n=[],s=a("7226"),Loginvue_type_template_id_bffc7274_render=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("Aircrafts")]),a("p",{staticClass:"title"},[t._v(t._s(t.userStats.Aircraft||0))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("Navigations")]),a("p",{staticClass:"title"},[t._v(t._s(t.userStats.Navigation||0))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("Flights")]),a("p",{staticClass:"title"},[t._v(t._s(t.userStats.Flight||0))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("Storage")]),a("p",{staticClass:"title"},[t._v(t._s(t._f("percent")(t.userStats.storage||0)))])])])]),a("b-loading",{attrs:{"is-full-page":!1,active:!!t.error}}),t.currentUser?a("div",[a("nav",{staticClass:"level is-mobile"},[a("div",{staticClass:"level-item has-text-centered"},[a("b-icon",{attrs:{icon:t.syncIcons[t.syncStatus]}})],1),a("div",{staticClass:"level-item has-text-centered"},[a("h5",{staticClass:"title is-5"},[t._v(t._s(t.currentUser.name))])])]),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{attrs:{type:"is-primary","icon-left":"account-arrow-right-outline"},on:{click:t.logoutUser}},[t._v("Sign out")])],1),a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{attrs:{type:"is-primary is-light","icon-left":"account-edit-outline"},on:{click:t.openDetails}},[t._v("Edit")])],1)])]):a("fieldset",[a("b-field",{attrs:{label:"Email",horizontal:""}},[a("b-input",{attrs:{type:"email",icon:"email",placeholder:"pilote@navue.io",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),a("b-field",{attrs:{label:"Password",horizontal:""}},[a("b-input",{attrs:{type:"password",icon:"lock",placeholder:"*******",required:"","password-reveal":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("b-field",{attrs:{"is-grouped":""}},[a("b-button",{staticClass:"is-primary",attrs:{"icon-left":"account-arrow-left-outline",expanded:""},on:{click:function(e){return t.loginUser(t.username,t.password)}}},[t._v("Sign in")]),a("b-button",{staticClass:"is-primary is-light",attrs:{"icon-left":"account-plus-outline"},on:{click:function(e){return t.createUser(t.username,t.password)}}},[t._v("Create Account")]),t.gotLocalData?a("b-button",{staticClass:"is-danger is-light",attrs:{"icon-left":"database-remove"},on:{click:t.cleanLocal}},[t._v("Clear device")]):t._e()],1)],1)],1)},o=[],UserDetailsvue_type_template_id_2fe7fb40_render=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.value.name))]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),a("fieldset",{staticClass:"modal-card-body"},[a("b-taglist",t._l(t.value.roles,(function(e){return a("b-tag",{key:e,attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(e))])})),1),a("b-field",{attrs:{label:"Licences"}},[a("b-taginput",{attrs:{ellipsis:"",icon:"label",placeholder:"Add a Licence","aria-close-label":"Delete this tag"},model:{value:t.value.licences,callback:function(e){t.$set(t.value,"licences",e)},expression:"value.licences"}})],1),a("b-field",{attrs:{label:"Organization"}},[a("b-input",{attrs:{type:"text",icon:"domain"},model:{value:t.value.organization,callback:function(e){t.$set(t.value,"organization",e)},expression:"value.organization"}})],1),a("b-button",{attrs:{type:"is-primary","icon-left":"account-edit-outline",expanded:""},on:{click:function(e){return t.updateMetadata(t.metadata)}}},[t._v("Save")]),a("div",{staticClass:"divider is-danger"},[t._v("Danger Zone")]),a("b-field",{attrs:{type:"is-warning"}},[a("b-input",{attrs:{type:"password","password-reveal":"",expanded:"",autocomplete:"new-password",icon:"account-key"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),a("p",{staticClass:"control"},[a("b-button",{attrs:{type:"is-warning is-light","icon-left":"lock-reset"},on:{click:function(e){return t.confirmAndupdatePassword(t.newPassword)}}},[t._v("Change Password")])],1)],1),a("b-button",{attrs:{expanded:"",type:"is-danger","icon-left":"account-remove"},on:{click:function(e){return t.confirmAnddeleteUser()}}},[t._v("Delete Account")])],1),a("footer",{staticClass:"modal-card-foot"},[t._v(" Member since "+t._s(t._f("asDate")(t.value.created_at))+" ")])])},c=[];const u={data(){return{syncHandle:null,remoteDbUrl:new URL("https://db.treville.fr:8443")}},async created(){let t,e,a,i={_id:"_design/user",views:{"count-items":{map:function({type:t}){emit(t)}.toString(),reduce:"_count"},stats:{map:function({type:t,length:e,duration:a}){switch(t){case"Navigation":emit("NavigationDistance",e||0);break;case"Flight":emit("FlightTime",a||0);break;default:emit(t)}}.toString(),reduce:"_sum"}}};try{({_rev:t,views:e}=await this.$pouch.get(i._id))}catch{a=!0}finally{(a||JSON.stringify(e)!=JSON.stringify(i.views))&&await this.$pouch.put({_rev:t,...i})}},computed:{currentUser:{get(){return this.$store.state.currentUser},set(t){this.$store.commit("currentUser",t)}},remoteDB(){return this.$pouch.getDB(this.remoteDbUrl)}},methods:{async setCurrentUser(){try{const{userCtx:{name:t}}=await this.remoteDB.getSession();if(t)return this.currentUser=await this.remoteDB.getUser(t),this.$pouch.getDB(new URL(this.userDBname(this.currentUser.name),this.remoteDbUrl));new Error("No session available.")}catch(t){console.error(t)}},userDBname(t){return"userdb-"+Array.from(t).map(t=>t.charCodeAt(0)<128?t.charCodeAt(0).toString(16):encodeURIComponent(t).replace(/%/g,"").toLowerCase()).join("")},getUserStats(t){return Promise.allSettled([t.query("user/count-items",{group:!0}).then(({rows:t})=>t.reduce((t,e)=>(t[e.key]=e.value,t),{})),navigator.storage.estimate().then(({usage:t,quota:e})=>({storage:t/e}))]).then(t=>t.reduce((t,{status:e,value:a})=>("fulfilled"==e&&(t={...t,...a}),t),{})).catch(console.error)},startSync(t,e){this.stopSync(),this.syncHandle=this.$pouch.sync(t,{}),e&&this.syncHandle.on("active",t=>e("active",t)).on("change",t=>e("change",t)).on("paused",t=>e("paused",t)).on("complete",t=>e("complete",t)).on("error",t=>e("error",t)).on("denied",t=>e("denied",t))},stopSync(){if(this.syncHandle)return this.syncHandle.cancel()},async cleanLocal(){await this.$pouch.viewCleanup();try{await this.$pouch.destroy()}finally{0}}}};var l=a("08df"),d={name:"UserDetails",mixins:[u,l["c"]],data(){return{newPassword:null,confirm:{deleteUser:{title:"Deleting account",message:"Are you sure you want to <b>delete</b> your account? This action cannot be undone.",confirmText:"Delete Account"},updatePassword:{type:"is-warning",title:"Change Password",message:"Are you sure you want to <b>change</b> current password.",confirmText:"Change password"}}}},props:["value"],computed:{metadata(){const{_id:t,_rev:e,type:a,name:i,roles:r,...n}=this.value;return n}},methods:{async confirmAnddeleteUser(){const{result:t}=await this.confirmAction(this.confirm.deleteUser);if(t)try{await this.remoteDB.deleteUser(this.value.name),this.$emit("update-user"),this.$emit("close"),this.openWarning({message:"Account deleted."})}catch(e){this.openWarning(e)}},async updateMetadata(t){try{await this.remoteDB.putUser(this.value.name,{metadata:t}),this.$emit("update-user"),this.$emit("close"),this.openWarning({message:"Account saved."})}catch(e){this.openWarning(e)}},async confirmAndupdatePassword(t){const{result:e}=await this.confirmAction(this.confirm.updatePassword);if(e)try{await this.remoteDB.changePassword(this.value.name,t),this.$emit("close"),this.openWarning({message:"Password changed."})}catch(a){this.openWarning(a)}finally{this.newPassword=null}}},filters:{asDate(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"})}}},h=d,p=a("2877"),m=Object(p["a"])(h,UserDetailsvue_type_template_id_2fe7fb40_render,c,!1,null,null,null),f=m.exports,g={name:"Login",mixins:[u,l["c"]],data(){return{statsFeed:void 0,username:null,password:null,userStats:{},importData:{title:"Import data",type:"is-warning",message:"Some data are present in this device. Would you like to import them into your account ?",confirmText:"Yes",cancelText:"No"},syncStatus:"complete",syncIcons:{active:"cloud-sync-outline fade",change:"cloud-sync-outline fade",paused:"cloud-check-outline",complete:"cloud-off-outline",error:"weather-cloudy-alert",denied:"weather-cloudy-alert"},serverPresent:void 0,error:!1}},async mounted(){this.serverPresent=await this.checkServer("navue")},async created(){await this.setupUser()},beforeDestroy(){this.statsFeed&&this.statsFeed.cancel()},computed:{gotLocalData(){return this.userStats.constructor===Object&&Object.keys(this.userStats).length>1}},methods:{async checkServer(t){try{return clearTimeout(this.error),this.error=!1,await this.remoteDB.info()}catch(e){this.error=setTimeout(this.checkServer,3e3,t)}},async createUser(t,e){try{await this.remoteDB.signUp(t,e,{metadata:{created_at:new Date}}),this.openWarning({message:"Welcome on navue !",duration:5e3}),await this.loginUser(t,e)}catch(a){this.openWarning(a)}},async setupUser(){try{this.setUserStats(),this.setStatsFeed();const t=await this.setCurrentUser();if(t)return await this.startSync(t,this.syncHandler),!0}catch(t){console.error(t)}},async loginUser(t,e){this.stopSync();try{if(await this.remoteDB.logIn(t,e),this.gotLocalData){const{result:t}=await this.confirmAction(this.importData);t||this.cleanLocal()}await this.setupUser(),this.openWarning({message:"You're in !",duration:1e3}),this.username=this.password=null}catch(a){this.openWarning(a)}},async logoutUser(){this.stopSync();try{await this.remoteDB.logOut(),this.currentUser=void 0,this.openWarning({message:"You're out !",duration:1e3})}catch(t){this.openWarning(t)}finally{this.cleanLocal()}},setStatsFeed(){this.statsFeed=this.$pouch.getDB().on("destroyed",t=>{t&&(this.$pouch.getDB(),this.statsFeed&&this.statsFeed.cancel(),this.setUserStats(),this.statsFeed=this.setStatsFeed())}).changes({since:"now",live:!0,view:"user/count-items",filter:"_view"}).on("change",this.setUserStats)},async setUserStats(){this.userStats=await this.getUserStats(this.$pouch)},async checkSession(){try{return await this.setCurrentUser()}catch{this.logoutUser()}},syncHandler(t,e){this.syncStatus=t,t in["error","denied"]&&this.openWarning(e)},openDetails(){this.modal=this.$buefy.modal.open({parent:this,component:f,props:{value:this.currentUser},events:{"update-user":this.checkSession},hasModalCard:!1,trapFocus:!0,"append-to-body":!0})}},filters:{percent(t){return Math.ceil(100*t)+"%"}}},v=g,b=(a("039a"),Object(p["a"])(v,Loginvue_type_template_id_bffc7274_render,o,!1,null,null,null)),_=b.exports,y={name:"Navbar",components:{AircraftManager:s["a"],Login:_},computed:{currentAircraft(){return this.$store.state.currentAircraft}}},w=y,k=Object(p["a"])(w,Navbarvue_type_template_id_b54308fe_render,n,!1,null,null,null),S=k.exports,D={components:{Navbar:S}},x=D,$=(a("5c0b"),Object(p["a"])(x,render,r,!1,null,null,null)),N=$.exports,C=a("acfa"),A=a("2c4e");if("serviceWorker"in navigator){const t=new C["a"]("/service-worker.js");t.addEventListener("installed",t=>{t.isUpdate?A["a"].open({type:"is-warning",message:"Loading new version of naVue.",actionText:null,indefinite:!1,duration:1e3}):A["a"].open({type:"is-warning",message:"naVue is now installed on your device.",actionText:null,indefinite:!1,duration:1e3})}),t.addEventListener("waiting",()=>{A["a"].open({type:"is-warning",indefinite:!0,message:"A new version of naVue is available.",actionText:"Use it now",onAction:()=>{t.messageSW({type:"SKIP_WAITING"})}})}),t.addEventListener("controlling",()=>{window.location.reload()}),t.addEventListener("activated",()=>{A["a"].open({type:"is-warning",message:"Welcome to the new version of naVue.",actionText:null,indefinite:!1,duration:1e3})}),t.register()}var L=a("8c4f");i["a"].use(L["a"]);const O=[{path:"/",name:"Home",component:()=>a.e("chunk-5ac5a83e").then(a.bind(null,"bb51"))},{path:"/aircraft/:id?",name:"Aircraft",component:()=>Promise.all([a.e("chunk-2f5398a4"),a.e("chunk-2d221f18")]).then(a.bind(null,"cd01"))},{path:"/route/:id?",name:"Route",component:()=>Promise.all([a.e("chunk-2f5398a4"),a.e("chunk-1380797a"),a.e("chunk-ed85a372")]).then(a.bind(null,"b59c"))},{path:"/moving-map/:id?",name:"MovingMap",component:()=>Promise.all([a.e("chunk-2f5398a4"),a.e("chunk-1380797a"),a.e("chunk-6646227c")]).then(a.bind(null,"3935"))},{path:"/replay",name:"Replay",component:()=>a.e("chunk-2d0c8dd2").then(a.bind(null,"5760"))},{path:"/radar/:id?",name:"Radar",component:()=>a.e("chunk-2d0c8dd2").then(a.bind(null,"5760"))},{path:"/about",name:"About",component:()=>a.e("chunk-2d22d746").then(a.bind(null,"f820"))}],P=new L["a"]({mode:"history",routes:O,linkActiveClass:"is-active",scrollBehavior(t){if(t.hash)return{selector:t.hash}}});var M=P,F=a("2f62"),U=a("1caf"),W=a("b98f"),T=a("f9de"),j=a("00b4");i["a"].use(F["a"]);var B=new F["a"].Store({state:{currentUser:void 0,currentAircraft:void 0,currentNavigation:void 0,currentLocation:void 0,currentFlight:void 0},mutations:{currentUser:(t,{derived_key:e,iterations:a,password_scheme:i,salt:r,...n}={})=>{t.currentUser=0==Object.keys(n).length?void 0:n},currentAircraft(t,e){t.currentAircraft=e?W["a"].from(e):e},currentNavigation(t,e){t.currentNavigation=e?U["a"].from(e):e},currentFlight(t,e){t.currentFlight=e?j["a"].from(e):e},currentLocation(t,e){t.currentLocation=e?T["a"].from(e):e}},actions:{async saveToDB(t,e){let a=JSON.parse(JSON.stringify(e));a._id||(a._id=`${a.type}-${Date.now()}`);let{id:i}=await this._vm.$pouch.put(a);return await this._vm.$pouch.get(i,{include_docs:!0})},deleteFromDB(t,e){return this._vm.$pouch.remove(e)}}}),q=a("289d"),E=(a("5363"),a("d6e1")),I=a("fcd3"),J=a("eae4");i["a"].use(q["a"],{defaultProgrammaticPromise:!0}),E["a"].plugin(I["a"]),i["a"].use(J["a"],"navue"),i["a"].config.productionTip=!1,new i["a"]({router:M,store:B,render:t=>t(N)}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var i=a("9c0c"),r=a.n(i);r.a},7174:function(t,e,a){},7226:function(t,e,a){"use strict";var render=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("b-dropdown",e._b({scopedSlots:e._u([{key:"trigger",fn:function(){return[e._t("default",[i("b-button",[i("b-tooltip",{attrs:{position:"is-bottom",label:e.selectedData?e.selectedData.registration:"Aircraft"}},[i("b-icon",{attrs:{icon:"airplane",type:e.selectedData?"is-success":""}})],1)],1)],{selected:e.selectedData})]},proxy:!0}],null,!0)},"b-dropdown",e.$attrs,!1),[e.selectedData?[e.$slots.header||e.$scopedSlots.header?i("b-dropdown-item",{attrs:{custom:""}},[e._t("header",null,{selected:e.selectedData})],2):e._e(),e.$slots.header||e.$scopedSlots.header?i("b-dropdown-item",{attrs:{separator:""}}):e._e(),e.edit?[i("b-dropdown-item",{on:{click:e.saveData}},[i("b-icon",{attrs:{icon:"cloud-upload-outline",type:"is-warning"}}),e._v(" Save ")],1),i("b-dropdown-item",{on:{click:e.exportData}},[i("b-icon",{attrs:{icon:"download-outline"}}),e._v(" Export ")],1),e.create?i("b-dropdown-item",{attrs:{disabled:!e.fromDB},on:{click:function(t){e.selectedData=e.cloneData(e.selectedData)}}},[i("b-icon",{attrs:{icon:"plus-circle-multiple-outline"}}),e._v(" Clone ")],1):e._e(),i("b-dropdown-item",{attrs:{disabled:!e.fromDB},on:{click:e.deleteData}},[i("b-icon",{attrs:{icon:"delete-outline",type:"is-danger"}}),e._v(" Delete ")],1)]:e._e(),i("b-dropdown-item",e._g({},e.persistent?{click:e.createData}:{click:e.discardData}),[i("b-icon",{attrs:{icon:"selection-off"}}),e._v(" Discard ")],1)]:[i("b-dropdown-item",{attrs:{custom:""}},[i("b-autocomplete",{attrs:{placeholder:"Choose an aircraft",data:e.availableData||[],field:e.searchedProperty,"open-on-focus":"","keep-first":"","clear-on-select":"",clearable:""},on:{select:function(e,a){a.stopPropagation(),t.selectedData=e}},scopedSlots:e._u([e.search?{key:"empty",fn:function(){return[i("i",[e._v(e._s(e.search))]),e._v(" not found ")]},proxy:!0}:{key:"empty",fn:function(){return[e._v(" No aircraft registered ")]},proxy:!0}],null,!0),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.create?i("b-dropdown-item",{on:{click:e.createData}},[i("b-icon",{attrs:{icon:"plus-circle-outline"}}),e._v(" New Aircraft ")],1):e._e(),e.create?i("b-dropdown-item",[i("b-upload",{attrs:{accept:"application/json",expanded:""},on:{input:e.importData},model:{value:e.upload,callback:function(t){e.upload=t},expression:"upload"}},[i("b-icon",{attrs:{icon:"upload"}}),e._v(" Import ")],1)],1):e._e()],"Aircraft"!=e.$route.name?i("b-dropdown-item",{attrs:{"has-link":""}},[i("router-link",{attrs:{to:{name:"Aircraft"}}},[e._v(" Manage Aircrafts ")])],1):e._e()],2)},i=[],r=a("1db5"),n=a("b98f"),s={name:"AircraftManager",mixins:[r["a"]],data(){return{constructor:n["a"],storeKey:"currentAircraft",searchedProperty:"registration"}}},o=s,c=a("2877"),u=Object(c["a"])(o,render,i,!1,null,null,null);e["a"]=u.exports},"9c0c":function(t,e,a){},b98f:function(t,e,a){"use strict";a.d(e,"a",(function(){return Aircraft}));var i=a("bd67"),r=a("3634");class Aircraft extends i["a"]{constructor({registration:t,manufacturer:e,model:a,paces:n=new i["b"],consumptions:s=new i["b"],balance:o=new i["b"]({date:void 0}),envelopes:c=new i["b"],checklists:u=new i["b"]}={}){n.keep(t=>t instanceof r["h"]?t:void 0),s.keep(t=>t instanceof r["c"]?t:void 0),o.keep(t=>t instanceof r["f"]?t:void 0),c.keep(t=>t instanceof i["b"]?t:void 0),u.keep(t=>t instanceof i["b"]?t:void 0),super({registration:t,manufacturer:e,model:a,paces:n,consumptions:s,balance:o,envelopes:c,checklists:u})}static from({_id:t,_rev:e,type:a,registration:n,manufacturer:s,model:o,paces:c,consumptions:u,balance:l,envelopes:d,checklists:h}={}){if(arguments[0]instanceof this)return arguments[0];if(a!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${a}'`;{c&&(c=i["b"].from(c,r["h"])),u&&(u=i["b"].from(u,r["c"])),l&&(l=i["b"].from(l,r["f"])),d&&(d=i["b"].from(d,i["b"],r["f"])),h&&(h=i["b"].from(h,i["b"]));let a=new this({registration:n,manufacturer:s,model:o,paces:c,consumptions:u,balance:l,envelopes:d,checklists:h});return t&&e&&Object.assign(a,{_id:t,_rev:e}),a}}}},bd67:function(t,e,a){"use strict";a.d(e,"a",(function(){return Model})),a.d(e,"b",(function(){return Store}));class Model{constructor({type:t,...e}={}){Object.assign(this,e)}toJSON(){return{...this,type:this.constructor.name}}clone(){return this.constructor.from(JSON.parse(JSON.stringify(this)))}static from({type:t,...e}={}){if(arguments[0]instanceof this)return arguments[0];if(t==this.name)return new this(e);throw`Invalid data : 'type' should be '${this.name}' got '${t}'`}}class Store{constructor(t={},...e){this.items=e,Object.assign(this,t)}[Symbol.iterator](){return this.items[Symbol.iterator]()}get length(){return this.items.length}valueOf(){return this.items}get properties(){let{items:t,...e}={...this};return e}get first(){return this.items[0]}get last(){return this.items[this.length-1]}add(t,e){return e?this.items.splice(e,0,t):this.items.push(t),this.length}remove(t,e){return void 0===e&&(e=this.items.indexOf(t)),e>=0&&1==this.items.splice(e,1).length}keep(t){let e=this.items.length;while(e--){let a=t.call(this.items,this.items[e]);void 0==a?this.items.splice(e,1):Object.is(a,this.items[e])||this.items.splice(e,1,a)}return this}toJSON(){return{...this.properties,items:this.items,type:this.constructor.name}}static from({type:t,items:e=[],...a},...i){if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{let t=i.shift();return new this(a,...e.map(e=>t?t.from(e,...i):e))}}}},f9de:function(t,e,a){"use strict";a.d(e,"b",(function(){return Waypoint})),a.d(e,"a",(function(){return Location}));var i=a("bd67"),r=a("3634"),n=a("d425");class Waypoint extends i["a"]{constructor(t,e,a,i={}){!a||a instanceof r["a"]||(a=new r["a"](a)),super({latitude:t,longitude:e,altitude:a,...i})}set latlng({lat:t,lng:e}={}){this.latitude=t,this.longitude=e}get latlng(){return{lat:this.latitude,lng:this.longitude}}get point(){return new n["a"](this.latitude,this.longitude)}distanceTo(t){return new r["d"](this.point.rhumbDistanceTo(t.point),"m")}bearingTo(t){return new r["b"](this.point.rhumbBearingTo(t.point),"°",{_precision:3})}destinationPoint(t,e){let a=this.point.rhumbDestinationPoint(t,e);return new this.constructor(a.lat,a.lng)}toGeoJSON(t="Feature"){const{latitude:e,longitude:a,altitude:i,...r}=this;switch(t){case"Feature":return{type:t,properties:{...r,altitude:i.toJSON()},geometry:this.toGeoJSON("Point")};case"Point":return{type:t,coordinates:this.toGeoJSON("Position")};case"Position":return[e,a,Number(i)];default:throw"not a valid GeoJSON object"}}static from({type:t,latitude:e,longitude:a,altitude:i,latlng:n,...s}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;return i&&(i=r["a"].from(i)),n&&(e=e||n.lat,a=a||n.lng),new this(e,a,i,s)}}class Location extends Waypoint{constructor(t,e,a,{accuracy:i,speed:r,heading:n,timestamp:s,...o}={}){super(t,e,a,{accuracy:i,speed:r,heading:n,timestamp:s,...o})}_delayFrom({timestamp:t}){return this.timestamp-t}_climbFrom({altitude:t}){return this.altitude-t}_speedFrom(t){if(0==this._delayFrom(t))throw"Teleportation is not yet a possibility";return new r["h"](this.distanceTo(t)/this._delayFrom(t)*1e3)}_verticalSpeedFrom(t){if(0==this._delayFrom(t))throw"Teleportation is not yet a possibility";return new r["h"](this._climbFrom(t)/this._delayFrom(t)*1e3)}movementFrom(t){return{speed:this._speedFrom(t),verticalSpeed:this._verticalSpeedFrom(t),heading:t.bearingTo(this)}}toBounds(t=this.accuracy){const e=180*t/40075017,a=e/Math.cos(Math.PI/180*this.latitude);return[[this.latitude-e,this.longitude-a],[this.latitude+e,this.longitude+a]]}positionInSeconds(t,e=this.heading){if(this.speed&&e)return this.destinationPoint(this.speed*t,e.value);throw"cannot calculate futur position, speed & heading should be provided"}static from({accuracy:t,speed:e,heading:a,timestamp:i,...n}={}){return arguments[0]instanceof this?arguments[0]:(t&&(t=r["d"].from(t)),e&&(e=r["h"].from(e)),a&&(a=r["b"].from(a)),delete n._id,delete n._rev,super.from({...n,accuracy:t,speed:e,heading:a,timestamp:i}))}static fromGeolocationPosition(t){let e,a,i,n;return t.coords.altitude&&(e=new r["a"](t.coords.altitude,"m",{reference:"WGS84",accuracy:t.coords.altitudeAccuracy})),t.coords.accuracy&&(n=new r["d"](t.coords.accuracy,"m")),t.coords.speed&&(a=new r["h"](t.coords.speed,"m/s")),t.coords.heading&&(i=new r["b"](t.coords.heading,"°")),this.from({type:"Location",latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:n,altitude:e,speed:a,heading:i,timestamp:t.timestamp})}static fromLocate({latitude:t,longitude:e,accuracy:a,altitude:i,altitudeAccuracy:n,speed:s,heading:o,timestamp:c}){return i&&(i=new r["a"](i,"m",{reference:"WGS84",accuracy:n})),a&&(a=new r["d"](a,"m")),s&&(s=new r["h"](s,"m/s")),o&&(o=new r["b"](o,"°")),this.from({type:"Location",latitude:t,longitude:e,accuracy:a,altitude:i,speed:s,heading:o,timestamp:c})}}}});
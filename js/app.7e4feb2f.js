(function(e){function t(t){for(var n,s,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var o=a[s];0!==r[o]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},s={app:0},r={app:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2c88a3c4":"83cd80eb","chunk-2d22d746":"159355ca","chunk-4e8f34a9":"be2826a5","chunk-27572792":"a0d01955","chunk-59f8f64c":"257addec","chunk-d95709e8":"60beaf0c","chunk-6e0952b6":"939a4288","chunk-00e749d9":"c0f32792","chunk-bf374756":"026cc4b4","chunk-70fb28ef":"cefda297","chunk-2d21ab15":"70f03102","chunk-66bef6a2":"df3e2306","chunk-711914f4":"c441c452"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-4e8f34a9":1,"chunk-59f8f64c":1,"chunk-d95709e8":1,"chunk-6e0952b6":1,"chunk-00e749d9":1,"chunk-bf374756":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-2c88a3c4":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-4e8f34a9":"74064865","chunk-27572792":"31d6cfe0","chunk-59f8f64c":"42a4b553","chunk-d95709e8":"836a135b","chunk-6e0952b6":"23c16a91","chunk-00e749d9":"48d2b289","chunk-bf374756":"3f78fcb6","chunk-70fb28ef":"31d6cfe0","chunk-2d21ab15":"31d6cfe0","chunk-66bef6a2":"31d6cfe0","chunk-711914f4":"31d6cfe0"}[e]+".css",r=c.p+n,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var l=i[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===r))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){l=d[o],u=l.getAttribute("data-href");if(u===n||u===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete s[e],h.parentNode.removeChild(h),a(i)},h.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){s[e]=0})));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(h);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",d.name="ChunkLoadError",d.type=n,d.request=s,a[1](d)}r[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=u;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"039a":function(e,t,a){"use strict";var n=a("7174"),s=a.n(n);s.a},"08df":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i}));const n={data(){return{envelopesDataset:{showLines:!0,showLine:!0,fill:"start",borderWidth:2,pointRadius:5,pointHoverRadius:5,tension:0},cgDataset:{borderWidth:2,pointRadius:5,pointHoverRadius:5}}}},s={methods:{readTextFileAsync(e){return new Promise((t,a)=>{let n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=a,n.readAsText(e)})},downloadJSON(e,t){let a=new Blob([JSON.stringify(e,void 0,2)],{type:"application/json",name:t});const n=document.createElement("a");n.href=URL.createObjectURL(a),n.download=t,n.click()},async uploadJSON(e){let t;return t=JSON.parse(await this.readTextFileAsync(e)),t}}},r={methods:{openWarning(e,t,a){this.$buefy.snackbar.open({message:e,position:"is-bottom",type:"is-danger",duration:5e3,actionText:t,onAction:a})}}},i={data(){return{wakeLock:null}},mixins:[r],mounted(){this.requestWakeLock(),document.addEventListener("visibilitychange",this.requestWakeLock)},beforeDestroy(){document.removeEventListener("visibilitychange",this.requestWakeLock),this.wakeLock&&this.wakeLock.release()},methods:{async requestWakeLock(){try{if(!("wakeLock"in navigator)||"visible"!==document.visibilityState)throw"WakeLock unavaliable";this.wakeLock=await navigator.wakeLock.request("screen")}catch(e){this.openWarning(e)}}}}},1:function(e,t){},1928:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("7fae"),s=a.n(n),r=a("08df");const i={mixins:[r["b"],r["c"]],props:{value:Object},data(){return{search:"",upload:[]}},computed:{isSaved(){return!this.value||s()(this.selectedData,this.value)},fromDB(){return this.value&&this.value._id&&this.value._rev}},pouch:{availableData(){return{database:"navue",selector:{type:this.dataType,registration:{$regex:RegExp(this.search,"i")}}}}},methods:{useData(e){this.selectedData=e,this.$emit("input",this.selectedData)},discardData(){this.useData(this.selectedData)},saveData(){this.$store.dispatch("saveToDB",{_id:`${this.dataType}-${Date.now()}`,...this.value}).then(e=>{this.useData({...this.value,_id:e.id,_rev:e.rev}),this.openWarning("Saved")}).catch(e=>{console.debug(e),this.openWarning(e)})},deleteData(){this.$store.dispatch("deleteFromDB",this.value).then(()=>{this.useData(null),this.openWarning("Deleted")}).catch(e=>{console.debug(e),this.openWarning(e)})},importData(e){this.uploadJSON(e).then(e=>{this.useData(this.cloneData(e))})},exportData(){this.value&&this.downloadJSON(this.value,this.value.name+".json")},cloneData(e){const{_id:t,_rev:a,...n}=e;return n}}}},2:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Navbar"),a("router-view")],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{staticClass:"is-radiusless",attrs:{"fixed-top":""}},[a("template",{slot:"brand"},[a("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[a("img",{attrs:{src:"img/icons/android-chrome-192x192.png",alt:"Navue, a navigation tool for general aviation."}})])],1),a("template",{slot:"start"},[a("b-navbar-dropdown",{attrs:{label:"Briefing",collapsible:"",hoverable:""}},[a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Route"}}},[e._v("Navigation route")]),a("b-navbar-item",{attrs:{tag:"router-link",to:"approach"}},[e._v("Approach Charts")]),a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Weather"}}},[e._v("Weather")]),a("b-navbar-item",{attrs:{tag:"router-link",to:"notam"}},[e._v("NOTAM, AZBA")]),a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Balance"}}},[e._v("Weight and Balance")]),a("hr",{staticClass:"navbar-divider"}),a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Aircraft"}}},[e._v("Aircrafts")])],1),a("b-navbar-dropdown",{attrs:{label:"Flying",hoverable:"",collapsible:""}},[a("b-navbar-item",{attrs:{tag:"router-link",to:"checklists"}},[e._v("Checklists")]),a("b-navbar-item",{attrs:{tag:"router-link",to:{name:"MovingMap"}}},[e._v("Moving Map")]),a("hr",{staticClass:"navbar-divider"})],1)],1),a("template",{slot:"end"},[a("b-navbar-item",{on:{click:function(t){e.isAircraftSelectActive=!0}}},[e._v(e._s(e.currentAircraft?e.currentAircraft.registration:"Aircraft"))]),a("b-modal",{attrs:{"trap-focus":"","destroy-on-hide":"","has-modal-card":"","aria-role":"dialog","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"modal-card"},[a("AircraftSelect",{attrs:{select:""},on:{input:e.close}})],1)]}}]),model:{value:e.isAircraftSelectActive,callback:function(t){e.isAircraftSelectActive=t},expression:"isAircraftSelectActive"}}),a("b-navbar-dropdown",{attrs:{hoverable:"",collapsible:"",right:""}},[a("template",{slot:"label"},[a("b-icon",{attrs:{icon:"account"}})],1),a("div",{staticClass:"navbar-item"},[a("Login")],1)],2)],1)],2)},o=[],c=a("b4f7"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{"min-width":"30vw"}},[a("b-loading",{attrs:{"is-full-page":!1,active:!!e.error}},[a("b-notification",{attrs:{"has-icon":"",icon:"alert-circle-outline",closable:!1,"aria-close-label":"Close notification"}},[a("h4",{staticClass:"title"},[e._v("Navue User Server Unavailable")]),a("p",{staticClass:"heading"},[e._v(" Check your connection ")])])],1),e.currentUser?a("div",[a("nav",{staticClass:"level is-mobile"},[a("div",{staticClass:"level-item has-text-centered"},[a("b-icon",{attrs:{icon:e.syncIcon}})],1),a("div",{staticClass:"level-item has-text-centered"},[a("h5",{staticClass:"title is-5"},[e._v(e._s(e.currentUser.name))])])]),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[e._v("Aircrafts")]),a("p",{staticClass:"title"},[e._v(e._s(e.userStats.aircraft||0))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[e._v("Navigations")]),a("p",{staticClass:"title"},[e._v(e._s(e.userStats.navigation||0))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[e._v("Flight hours")]),a("p",{staticClass:"title"},[e._v(e._s(e.userStats.flightduration||0))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[e._v("Storage Quota")]),a("p",{staticClass:"title"},[e._v(e._s(e._f("percent")(e.userStats.quota||0)))])])])]),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{attrs:{type:"is-primary","icon-left":"account-arrow-right-outline"},on:{click:e.logoutUser}},[e._v("Sign out")])],1),a("div",{staticClass:"level-item has-text-centered"},[a("b-button",{attrs:{type:"is-primary is-light","icon-left":"account-edit-outline"},on:{click:function(t){e.openDetails=!0}}},[e._v("Edit")])],1)]),e.currentUser?a("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("UserEdit",{on:{close:t.close,"update-user":e.checkSession},model:{value:e.currentUser,callback:function(t){e.currentUser=t},expression:"currentUser"}})]}}],null,!1,388751030),model:{value:e.openDetails,callback:function(t){e.openDetails=t},expression:"openDetails"}}):e._e()],1):a("fieldset",[a("b-field",{attrs:{label:"Email"}},[a("b-input",{attrs:{type:"email",icon:"email",placeholder:"pilote@navue.io",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("b-field",{attrs:{label:"Password"}},[a("b-input",{attrs:{type:"password",icon:"lock",placeholder:"*******",required:"","password-reveal":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("b-field",{attrs:{"is-grouped":""}},[a("b-button",{staticClass:"is-primary",attrs:{"icon-left":"account-arrow-left-outline",expanded:""},on:{click:function(t){return e.loginUser(e.username,e.password)}}},[e._v("Sign in")]),a("b-button",{staticClass:"is-primary is-light",attrs:{"icon-left":"account-plus-outline"},on:{click:function(t){return e.newUser(e.username,e.password)}}},[e._v("Create Account")]),e.gotLocalData?a("b-button",{staticClass:"is-danger is-light",attrs:{"icon-left":"database-remove"},on:{click:e.cleanLocal}},[e._v("Clear device")]):e._e()],1)],1)],1)},u=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-card",staticStyle:{width:"max-content"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.value.name))]),a("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}})]),a("fieldset",{staticClass:"modal-card-body"},[a("b-taglist",e._l(e.value.roles,(function(t){return a("b-tag",{key:t,attrs:{type:"is-primary",size:"is-medium"}},[e._v(e._s(t))])})),1),a("b-field",{attrs:{label:"Licences"}},[a("b-taginput",{attrs:{ellipsis:"",icon:"label",placeholder:"Add a Licence","aria-close-label":"Delete this tag"},model:{value:e.value.licences,callback:function(t){e.$set(e.value,"licences",t)},expression:"value.licences"}})],1),a("b-field",{attrs:{label:"Organization"}},[a("b-input",{attrs:{type:"text",icon:"domain"},model:{value:e.value.organization,callback:function(t){e.$set(e.value,"organization",t)},expression:"value.organization"}})],1),a("div",{staticClass:"divider is-danger"},[e._v("Danger Zone")]),a("b-field",{attrs:{label:"New Password",type:"is-warning"}},[a("b-input",{attrs:{type:"password","password-reveal":"",autocomplete:"new-password",icon:"account-key"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),a("p",{staticClass:"control"},[a("b-button",{attrs:{type:"is-warning is-light","icon-left":"lock-reset"},on:{click:function(t){return e.updatePassword(e.value.name,e.newPassword)}}},[e._v("Change Password")])],1)],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("b-button",{attrs:{type:"is-primary","icon-left":"account-edit-outline",expanded:""},on:{click:function(t){return e.updateUser(e.value.name,e.metadata)}}},[e._v("Save")]),a("b-button",{attrs:{type:"is-danger","icon-left":"account-remove"},on:{click:function(t){return e.deleteUser(e.value.name)}}},[e._v("Delete Account")])],1)])},h=[];const p={data(){return{syncHandle:null,remoteDbUrl:new URL("https://db.treville.fr:8443")}},computed:{remoteDB(){return this.$pouch.getDB(this.remoteDbUrl)}},methods:{getCurrentUser(){return this.remoteDB.getSession().then(e=>new Promise((t,a)=>{e.userCtx.name?t(e.userCtx.name):a(new Error("No session available."))})).then(e=>this.remoteDB.getUser(e))},userDBname(e){return"userdb-"+Array.from(e).map(e=>e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()).join("")},getUserStats(e){return e.query({map:(e,t)=>{t(e.type)},reduce:"_count"},{group:!0}).then(e=>e.rows.reduce((e,t)=>(e[t.key]=t.value,e),{})).catch(console.error)},stopSync(){if(this.syncHandle)return this.syncHandle.cancel()},confirmAction(e){return this.$buefy.dialog.confirm({type:"is-danger",hasIcon:!0,...e})},openToast(e){this.$buefy.toast.open({duration:2e3,position:"is-top",type:"is-danger",...e})}}};var m={name:"UserEdit",mixins:[p],data(){return{newPassword:null,confirm:{deleteUser:{title:"Deleting account",message:"Are you sure you want to <b>delete</b> your account? This action cannot be undone.",confirmText:"Delete Account"},updatePassword:{title:"Change Password",message:"Are you sure you want to <b>change</b> current password.",confirmText:"Change password"}}}},props:["value"],computed:{metadata(){return{licences:this.value.licences,organization:this.value.organization}}},methods:{deleteUser(e){return this.confirmAction(this.confirm.deleteUser).then(()=>this.remoteDB.deleteUser(e)).then(()=>{this.$emit("update-user"),this.$emit("close")}).catch(this.openToast)},updateUser(e,t){return this.remoteDB.putUser(e,{metadata:t}).then(()=>{this.$emit("update-user"),this.$emit("close")}).catch(this.openToast)},updatePassword(e,t){return this.confirmAction(this.confirm.updatePassword).then(()=>this.remoteDB.changePassword(e,t)).then(()=>{this.$emit("close")}).finally(()=>{this.newPassword=null}).catch(this.openToast)}}},f=m,v=a("2877"),b=Object(v["a"])(f,d,h,!1,null,null,null),g=b.exports,y={name:"Login",components:{UserEdit:g},mixins:[p],data(){return{openDetails:!1,username:null,password:null,userStats:{},syncIcon:"cloud-off-outline",serverPresent:void 0,error:!1}},async mounted(){this.serverPresent=await this.checkServer("navue")},computed:{currentUser:{get(){return this.$store.state.currentUser},set(e){this.$store.commit("currentUser",e)}},gotLocalData(){return this.userStats.constructor===Object&&Object.keys(this.userStats).length>0}},created(){this.setCurrentUser().then(this.startSync).catch(e=>{console.info(e.message)}).finally(this.setUserStats)},methods:{async checkServer(e){try{return clearTimeout(this.error),this.error=!1,await this.remoteDB.info()}catch(t){this.error=setTimeout(this.checkServer,3e3,e)}},newUser(e,t){return this.remoteDB.signUp(e,t).then(this.loginUser(e,t)).catch(this.openToast)},loginUser(e,t){return this.remoteDB.logIn(e,t).catch(this.openToast).then(this.setCurrentUser).then(this.startSync).finally(()=>{this.username=this.password=null})},logoutUser(){return this.remoteDB.logOut().then(this.stopSync).catch(this.openToast).finally(this.cleanLocal)},setCurrentUser(){return this.getCurrentUser().then(e=>(this.currentUser=e,this.$pouch.getDB(new URL(this.userDBname(e.name),this.remoteDbUrl))))},setUserStats(){return this.getUserStats(this.$pouch).then(e=>this.userStats={...e}).finally(()=>{navigator.storage.estimate().then(e=>{this.userStats.quota=e.usage/e.quota})})},checkSession(){return this.setCurrentUser().catch(this.logoutUser)},startSync(e){this.syncHandle&&this.stopSync(),this.syncHandle=this.$pouch.sync(e).on("active",()=>this.syncIcon="cloud-sync-outline fade").on("active",()=>console.info("Syncing.")).on("change",()=>this.syncIcon="cloud-sync-outline fade").on("change",this.setUserStats).on("paused",()=>this.syncIcon="cloud-check-outline").on("complete",()=>this.syncIcon="cloud-off-outline").on("error",this.openToast).on("error",()=>this.syncIcon="weather-cloudy-alert").on("denied",this.openToast).on("denied",()=>this.syncIcon="weather-cloudy-alert"),Promise.resolve(this.syncHandle)},cleanLocal(){return this.$pouch.destroy().then(()=>{this.userStats={},this.currentUser=null}).then(()=>this.$pouch.getDB("trace").destroy()).then(console.info("Browser cleaned."))}},filters:{percent(e){return Math.ceil(100*e)+"%"}}},k=y,w=(a("039a"),Object(v["a"])(k,l,u,!1,null,null,null)),_=w.exports,x={name:"Navbar",components:{AircraftSelect:c["a"],Login:_},data(){return{isAircraftSelectActive:!1}},computed:{currentAircraft(){return this.$store.state.currentAircraft}}},C=x,D=Object(v["a"])(C,i,o,!1,null,null,null),S=D.exports,A={components:{Navbar:S}},U=A,P=(a("5c0b"),Object(v["a"])(U,s,r,!1,null,null,null)),T=P.exports,L=a("acfa"),$=a("2c4e");if("serviceWorker"in navigator){const e=new L["a"]("/service-worker.js");e.addEventListener("installed",e=>{e.isUpdate?$["a"].open({type:"is-warning",message:"Loading new version of naVue.",actionText:null,indefinite:!1,duration:1e3}):$["a"].open({type:"is-warning",message:"naVue is now installed on your device.",actionText:null,indefinite:!1,duration:1e3})}),e.addEventListener("waiting",()=>{$["a"].open({type:"is-warning",indefinite:!0,message:"A new version of naVue is available.",actionText:"Use it now",onAction:()=>{e.messageSW({type:"SKIP_WAITING"})}})}),e.addEventListener("controlling",()=>{window.location.reload()}),e.addEventListener("activated",()=>{$["a"].open({type:"is-warning",message:"Welcome to the new version of naVue.",actionText:null,indefinite:!1,duration:1e3})}),e.register()}var B=a("8c4f");n["a"].use(B["a"]);const O=[{path:"/",name:"Home",component:()=>a.e("chunk-711914f4").then(a.bind(null,"bb51"))},{path:"/aircraft/:id?",name:"Aircraft",component:()=>Promise.all([a.e("chunk-70fb28ef"),a.e("chunk-66bef6a2")]).then(a.bind(null,"cd01"))},{path:"/moving-map/:id?",name:"MovingMap",component:()=>Promise.all([a.e("chunk-6e0952b6"),a.e("chunk-bf374756")]).then(a.bind(null,"3935"))},{path:"/checklists",name:"Checklists",component:()=>a.e("chunk-2c88a3c4").then(a.bind(null,"7f53"))},{path:"/route/:id?",name:"Route",component:()=>Promise.all([a.e("chunk-6e0952b6"),a.e("chunk-00e749d9")]).then(a.bind(null,"b59c"))},{path:"/weather",name:"Weather",component:()=>Promise.all([a.e("chunk-4e8f34a9"),a.e("chunk-d95709e8")]).then(a.bind(null,"6a05"))},{path:"/notam",name:"Notam",component:()=>Promise.all([a.e("chunk-4e8f34a9"),a.e("chunk-59f8f64c")]).then(a.bind(null,"1625"))},{path:"/approach",name:"approach",component:()=>Promise.all([a.e("chunk-4e8f34a9"),a.e("chunk-27572792")]).then(a.bind(null,"5831"))},{path:"/balance/:id?",name:"Balance",component:()=>Promise.all([a.e("chunk-70fb28ef"),a.e("chunk-2d21ab15")]).then(a.bind(null,"bd30"))},{path:"/about",name:"About",component:()=>a.e("chunk-2d22d746").then(a.bind(null,"f820"))}],E=new B["a"]({mode:"history",routes:O,linkActiveClass:"is-active",scrollBehavior(e){if(e.hash)return{selector:e.hash}}});var N=E,j=a("2f62"),W=a("bd67"),R=a("f9de");class I extends W["a"]{constructor({name:e,notes:t,routes:a=[]}={}){a.forEach((e,t)=>{if(!(e instanceof Array))throw`'${e}' cannot be coerced in a route`;e.forEach((e,n)=>{a[t][n]=new R["b"](e)})}),super({name:e,notes:t,routes:a}),this.type="navigation"}addRoute(...e){return this.routes.push(e),this.routes[this.routes.length-1]}removeRoute(e){return this.routes.splice(this.getRouteId(e),1)}clearRoute(e){if(e=this.getRoute(e),0==e.length)return this.removeRoute(e),!0}addWaypoint({insertBefore:e,...t}={},a){return a=this.getRoute(a),t=new R["b"](t),e?a.splice(e,0,t):a.push(t)}removeWaypoint(e,t){return t=this.getRoute(t),e instanceof R["b"]?t.splice(t.indexOf(e),1):t.splice(e,1)}getNextWaypoint(e){const t=this.routes.flat().indexOf(e);return this.routes.flat()[t+1]}getRoute(e){return e instanceof Array?e:isFinite(e)?this.routes[e]:this.routes[this.routes.length-1]}getRouteId(e){return e instanceof Array?this.routes.indexOf(e):isFinite(e)?e:this.routes.length-1}static import(e){if("navigation"==e.type){let t=new this(e);return e._id&&(t._id=e._id),e._rev&&(t._rev=e._rev),t}throw`Invalid data : 'type' should be 'navigation' got '${e.type}'`}}class M extends W["a"]{constructor({registration:e,manufacturer:t,model:a,paces:n=[],balance:s=[],envelopes:r=[],consumptions:i=[],checklists:o=[]}={}){super({registration:e,manufacturer:t,model:a,paces:n,balance:s,envelopes:r,consumptions:i,checklists:o}),this.type="aircraft"}setId(e,t){return this._id=e,this._rev=t,this}addPace(e,t,a){return this.paces.push({name:e,unit:a,value:t})}addWeight({name:e,arm:t,value:a,min:n,max:s,density:r,tank:i}={tank:!1}){return this.balance.weights.push({name:e,arm:t,value:a,min:n,max:s,density:r,tank:i})}addEnvelope({name:e,values:t}={values:[]}){return this.envelopes.push({name:e,values:t})}addEnvelopePoint({x:e,y:t},a){return this.envelopes[a].push({x:e,y:t})}addConsumption({name:e,value:t,unit:a,part:n}={}){return this.consumptions.push({name:e,value:t,unit:a,part:n})}addChecklist({name:e,items:t}={items:[]}){return this.checklists.push({name:e,items:t})}addChecklistItem({name:e,expect:t,type:a,action:n}={action:!0},s){return this.checklists[s].push({name:e,expect:t,type:a,action:n})}static import(e){if("aircraft"==e.type){let t=new this(e);return e._id&&(t._id=e._id),e._rev&&(t._rev=e._rev),t}throw`Invalid data : 'type' should be 'aircraft' got '${e.type}'`}}n["a"].use(j["a"]);var q=new j["a"].Store({state:{currentUser:null,currentAircraft:null,currentNavigation:null},mutations:{currentUser:(e,t)=>{if(t){let{derived_key:a,iterations:n,password_scheme:s,salt:r,...i}=t;e.currentUser=i}else e.currentUser=null},currentAircraft(e,t){e.currentAircraft=t?M.import(t):t},currentNavigation(e,t){e.currentNavigation=t?I.import(t):t}},actions:{saveToDB(e,t){return this._vm.$pouch.put(t)},deleteFromDB(e,t){return this._vm.$pouch.remove(t)}}}),F=a("289d"),J=(a("5363"),a("d6e1")),H=a("fcd3"),z=a("eae4");n["a"].use(F["a"],{defaultProgrammaticPromise:!0}),J["a"].plugin(H["a"]),n["a"].use(z["a"],"navue"),n["a"].config.productionTip=!1,new n["a"]({router:N,store:q,render:e=>e(T)}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),s=a.n(n);s.a},7174:function(e,t,a){},"9c0c":function(e,t,a){},b4f7:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columns is-multiline is-centered"},[e.select?a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[e.value?e._e():a("b-field",{attrs:{label:"Choose an aircraft"}},[a("b-autocomplete",{attrs:{placeholder:"F-Pxx, Nxxx",data:e.availableData||[],icon:"magnify",field:"registration","open-on-focus":"","keep-first":"","clear-on-select":"",clearable:""},on:{select:e.useData},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[e.create?a("template",{slot:"header"},[a("a",{on:{click:function(t){return e.useData({type:"aircraft"})}}},[a("span",[e._v(" Create a new one... ")])])]):e._e(),a("template",{slot:"empty"},[e._v(" No results for "+e._s(e.search))])],2)],1),e.value?a("b-button",{attrs:{"icon-left":"selection-off",type:"is-primary",expanded:"",label:"Discard"},on:{click:function(t){return e.useData(null)}}}):e._e(),"Aircraft"!=e.$route.name?a("b-button",{attrs:{tag:"router-link",to:{name:"Aircraft"},"icon-left":"circle-edit-outline",type:"is-primary",expanded:"",label:"Manage Aircrafts"}}):e._e()],1)]):e._e(),e.create?a("div",{staticClass:"column"},[a("div",{staticClass:"box"},[e.value?e._e():a("b-field",{staticClass:"file"},[a("b-upload",{attrs:{accept:"application/json","drag-drop":"",expanded:""},on:{input:e.importData},model:{value:e.upload,callback:function(t){e.upload=t},expression:"upload"}},[a("div",{staticClass:"content has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),a("p",[e._v("Upload Aircraft data")])])])],1),e.value?a("b-button",{attrs:{"icon-left":"plus-circle-multiple-outline",type:"is-primary",expanded:"",label:"Clone aircraft"},on:{click:function(t){e.useData(e.cloneData(e.value))}}}):e._e()],1)]):e._e(),e.value&&e.save?a("div",{staticClass:"column"},[a("div",{staticClass:"box buttons"},[e.isSaved?a("b-button",{attrs:{"icon-left":"download-outline",type:"is-primary",expanded:"",label:"Download"},on:{click:e.exportData}}):e._e(),e.isSaved?e._e():a("b-button",{attrs:{"icon-left":"cloud-upload-outline",type:"is-warning",expanded:"",label:"Save"},on:{click:e.saveData}}),e.fromDB?a("b-button",{attrs:{"icon-left":"delete-outline",type:"is-danger",expanded:"",label:"Delete"},on:{click:e.deleteData}}):e._e()],1)]):e._e()])},s=[],r=a("1928"),i={name:"AircraftSelect",mixins:[r["a"]],props:{select:Boolean,create:Boolean,save:Boolean},data(){return{dataType:"aircraft"}},computed:{selectedData:{get(){return this.$store.state.currentAircraft},set(e){this.$store.commit("currentAircraft",e)}}}},o=i,c=a("2877"),l=Object(c["a"])(o,n,s,!1,null,null,null);t["a"]=l.exports},bd67:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(e){if(arguments[0]instanceof this.constructor)return arguments[0];Object.assign(this,e)}static parse(e){return new this(JSON.parse(e))}}},f9de:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i}));var n=a("bd67"),s=a("d425");class r extends n["a"]{constructor({name:e,latitude:t,longitude:a,altitude:n,notes:s,latlng:r}={}){super({name:e,latitude:t,longitude:a,altitude:n,notes:s}),r&&(this.latlng=r)}set latlng({lat:e,lng:t}={}){this.latitude=e,this.longitude=t}get latlng(){return{lat:this.latitude,lng:this.longitude}}get point(){return new s["a"](this.latitude,this.longitude)}distanceTo(e){return this.point.rhumbDistanceTo(e.point)}bearingTo(e){return this.point.rhumbBearingTo(e.point)}destinationPoint(e,t){return this.point.rhumbDestinationPoint(e,t)}toGeoJSON(){const{latitude:e,longitude:t,...a}={...this};return{type:"Feature",properties:a,geometry:this.point.toGeoJSON()}}static from(e){return e.name|=e.position,e.altitude={ref:"AMSL",...e.altitude},super.import(e)}}class i extends r{constructor({name:e,latitude:t,longitude:a,altitude:n,notes:s,latlng:r,accuracy:i,heading:o,speed:c,timestamp:l}={}){super({name:e,latitude:t,longitude:a,altitude:n,notes:s,latlng:r}),this.type="location",this.timestamp=l,this.accuracy=i,o&&(this.heading=o%360),this.speed=c}computeMovementFrom(e){this.heading=e.bearingTo(this),this.speed=this.distanceTo(e)/(this.timestamp-e.timestamp)*1e3,this.verticalSpeed=(this.altitude.value-e.altitude.value)/(this.timestamp-e.timestamp)*1e3}toBounds(e=this.accuracy){const t=180*e/40075017,a=t/Math.cos(Math.PI/180*this.latitude);return[[this.latitude-t,this.longitude-a],[this.latitude+t,this.longitude+a]]}static from({latitude:e,longitude:t,accuracy:a,altitude:n,altitudeAccuracy:s,speed:r,heading:i,timestamp:o}={}){return new this({latitude:e,longitude:t,accuracy:a,altitude:{value:n,accuracy:s,unit:"m",ref:"WGS84"},speed:r,heading:i,timestamp:o})}}}});
(function(t){function webpackJsonpCallback(e){for(var r,n,s=e[0],o=e[1],u=e[2],l=0,d=[];l<s.length;l++)n=s[l],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);c&&c(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),checkDeferredModules()}function checkDeferredModules(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,s=1;s<r.length;s++){var o=r[s];0!==i[o]&&(n=!1)}n&&(a.splice(e--,1),t=__webpack_require__(__webpack_require__.s=r[0]))}return t}var e={},r={app:0},i={app:0},a=[];function jsonpScriptSrc(t){return __webpack_require__.p+"js/"+({}[t]||t)+"."+{"chunk-005ab131":"887e7546","chunk-2f5398a4":"b57cb3a9","chunk-b6b35876":"aa014675","chunk-03abcb2e":"226f465c","chunk-62628b26":"d1ca2746","chunk-4eb1fb42":"776d61f6","chunk-0fc0d246":"da387f66","chunk-2d0c8dd2":"1f2e823d","chunk-2d221f18":"a727933e","chunk-698fb2b4":"0a883ac2"}[t]+".js"}function __webpack_require__(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.e=function requireEnsure(t){var e=[],a={"chunk-005ab131":1,"chunk-b6b35876":1,"chunk-03abcb2e":1,"chunk-62628b26":1,"chunk-4eb1fb42":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,i){for(var a="css/"+({}[t]||t)+"."+{"chunk-005ab131":"e5fee7d8","chunk-2f5398a4":"31d6cfe0","chunk-b6b35876":"fbf42266","chunk-03abcb2e":"c0c95ae5","chunk-62628b26":"087493d1","chunk-4eb1fb42":"917d8e77","chunk-0fc0d246":"31d6cfe0","chunk-2d0c8dd2":"31d6cfe0","chunk-2d221f18":"31d6cfe0","chunk-698fb2b4":"31d6cfe0"}[t]+".css",n=__webpack_require__.p+a,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===n))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){c=l[o],u=c.getAttribute("data-href");if(u===a||u===n)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var a=e&&e.target&&e.target.src||n,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[t],d.parentNode.removeChild(d),i(s)},d.href=n;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){r[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=s);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,__webpack_require__.nc&&c.setAttribute("nonce",__webpack_require__.nc),c.src=jsonpScriptSrc(t);var u=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var r=i[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",u.name="ChunkLoadError",u.type=a,u.request=n,r[1](u)}i[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)__webpack_require__.d(r,i,function(e){return t[e]}.bind(null,i));return r},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t["default"]}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="/",__webpack_require__.oe=function(t){throw console.error(t),t};var n=window["webpackJsonp"]=window["webpackJsonp"]||[],s=n.push.bind(n);n.push=webpackJsonpCallback,n=n.slice();for(var o=0;o<n.length;o++)webpackJsonpCallback(n[o]);var c=s;a.push([0,"chunk-vendors"]),checkDeferredModules()})({0:function(t,e,r){t.exports=r("56d7")},"00b4":function(t,e,r){"use strict";r.d(e,"a",(function(){return Flight}));var i=r("bd67"),a=r("f9de");class Flight extends i["a"]{constructor({name:t,notes:e,checked:r=[],milestones:i=[]}={},...n){n.every(t=>t instanceof a["a"])?n=[n]:n.every(t=>t instanceof Array&&t.every(t=>t instanceof Array))&&(n=n.flat()),super({name:t,notes:e,locations:n,checked:r,milestones:i})}addLocation(t){return this.locations[this.locations.length-1].push(a["a"].from(t)),this}addTrace(...t){return t.every(t=>t instanceof Array)&&(t=t.flat()),0==this.locations[0].length?this.locations[0]=t:this.locations.push(t),this}get geom(){return this.locations.map(t=>t.map(({latitude:t,longitude:e,altitude:r})=>[t,e,Number(r)]))}toGeoJSON(t="Feature"){const{locations:e,...r}=this;switch(t){case"Feature":return{type:t,properties:{...r},geometry:this.toGeoJSON("MultiLineString")};case"MultiLineString":return{type:t,coordinates:this.geom};case"MultiPoint":return{type:t,coordinates:this.geom.flat()};default:throw"not a valid GeoJSON object"}}toBounds(){return this.locations.flat().reduce((t,{latitude:e,longitude:r},i)=>0==i?[[e,r],[e,r]]:[[Math.min(e,t[0][0]),Math.min(r,t[0][1])],[Math.max(e,t[1][0]),Math.max(r,t[1][1])]],void 0)}static from({type:t,locations:e,_id:r,_rev:i,...n}={}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{e&&(e=e.map(t=>t.map(t=>a["a"].from(t))));let t=new this(n,...e);return r&&i&&Object.assign(t,{_id:r,_rev:i}),t}}}},"039a":function(t,e,r){"use strict";r("7174")},"08df":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return s}));const i={data(){return{envelopesDataset:{showLines:!0,showLine:!0,fill:"start",borderWidth:2,pointRadius:5,pointHoverRadius:5,tension:0},cgDataset:{borderWidth:2,pointRadius:5,pointHoverRadius:5}}}},a={methods:{readTextFileAsync(t){return new Promise((e,r)=>{let i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=r,i.readAsText(t)})},downloadJSON(t,e){let r=new Blob([JSON.stringify(t,void 0,2)],{type:"application/json",name:e});const i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=e,i.click()},async uploadJSON(t){let e;return e=JSON.parse(await this.readTextFileAsync(t)),e}}},n={methods:{openWarning(t){return this.$buefy.snackbar.open({position:"is-bottom",type:"is-danger",duration:5e3,queue:!1,...t})},confirmAction(t){return this.$buefy.dialog.confirm({type:"is-danger",hasIcon:!0,...t})}}},s={data(){return{wakeLock:null}},mixins:[n],mounted(){"wakeLock"in navigator&&(this.requestWakeLock(),document.addEventListener("visibilitychange",this.requestWakeLock))},beforeDestroy(){"wakeLock"in navigator&&(document.removeEventListener("visibilitychange",this.requestWakeLock),this.wakeLock&&this.wakeLock.release())},methods:{async requestWakeLock(){"visible"===document.visibilityState&&(this.wakeLock=await navigator.wakeLock.request("screen"))}}}},"0c9a":function(t,e,r){"use strict";r.d(e,"a",(function(){return Moment}));var i=r("bd67"),a=r("3634");class Moment extends i["a"]{constructor(t,e,r={}){super({mass:new a["i"](t),lever:new a["d"](e),...r})}get value(){return this.mass.value*this.lever.value}get _value(){return this.mass*this.lever}valueOf(){return this._value}get unit(){return`${this.mass.unit}.${this.lever.unit}`}toJSON(){return{...this,type:this.constructor.name}}static from({type:t,mass:e,lever:r,...i}={}){if(arguments[0]instanceof this)return arguments[0];if(t==this.name)return e&&(e=a["i"].from(e)),r&&(r=a["d"].from(r)),new this(e,r,i);throw`Invalid data : 'type' should be '${this.name}' got '${t}'`}static linearCoG(...t){let e=t.flat().reduce((t,{mass:e,lever:r})=>(t.mass=t.mass.add(e,{precision:e.precision}),t.lever=t.lever.add(new a["d"](r).prod(e),{precision:r.precision}),t),new Moment(0,0));return e.lever=e.lever.prod(1/e.mass),e}}},1:function(t,e){},"1caf":function(t,e,r){"use strict";r.d(e,"a",(function(){return Navigation}));var i=r("bd67"),a=r("f9de");class Navigation extends i["a"]{constructor({name:t,notes:e,assets:r={}}={},...n){n=new i["b"]({},...n).keep(t=>t.keep(t=>t instanceof a["b"]?t:void 0)),super({name:t,notes:e,assets:r,routes:n})}get waypoints(){return this.routes.items.map(t=>t.items).flat()}get poi(){return this.waypoints.map(t=>t.name).filter(t=>/^[A-Z]{4}$/.test(t))}addRoute(...t){return this.routes.add(new i["b"]({},...t)),this.routes.last}removeRoute(t){return this.routes.remove(t)}clearRoute(t){if(t=this.getRoute(t),t&&0==t.length)return this.removeRoute(t),!0}addWaypoint({insertBefore:t,...e}={},r){return r=this.getRoute(r),r.add(a["b"].from({...e,type:"Waypoint"}),t)}removeWaypoint(t,e){return e=this.getRoute(e),Number.isInteger(t)?e.remove(void 0,t):e.remove(t)}getNextWaypoint(t){const e=this.waypoints.indexOf(t);return this.waypoints[e+1]}getRoute(t){return t instanceof i["b"]?t:isFinite(t)?this.routes.items[t]:this.last}getRouteId(t){return t instanceof i["b"]?this.routes.indexOf(t):Number.isInteger(t)?t:this.routes.length-1}toBounds(){return this.waypoints.reduce((t,{latitude:e,longitude:r},i)=>0==i?[[e,r],[e,r]]:[[Math.min(e,t[0][0]),Math.min(r,t[0][1])],[Math.max(e,t[1][0]),Math.max(r,t[1][1])]],void 0)}static from({type:t,routes:e,_id:r,_rev:n,...s}={}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{e&&(e=i["b"].from(e,i["b"],a["b"]));let t=new this(s,...e);return r&&n&&Object.assign(t,{_id:r,_rev:n}),t}}}},"1db5":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("08df");const a={mixins:[i["b"],i["c"]],props:{create:Boolean,edit:Boolean,persistent:Boolean,exist:Boolean},data(){return{search:"",upload:[]}},mounted(){!this.persistent&&!this.exist||this.selectedData||this.createData()},computed:{dataType(){return this.constructor.name},fromDB(){return this.selectedData&&this.selectedData._id&&this.selectedData._rev},selectedData:{get(){return this.$store.state[this.storeKey]},set(t){try{this.$store.commit(this.storeKey,t)}catch(e){0,this.$buefy.dialog.alert({title:"Cannot load item",message:"Selected record is corrupted. It will be purged from database. Do you want to download it localy before ?",type:"is-danger",hasIcon:!0,trapFocus:!0,icon:"cloud-download-outline",confirmText:"Download & Delete",onConfirm:()=>{this.downloadJSON(t,"navue-corrupted-item.json")},canCancel:!0,cancelText:"Just delete it"}),this.$store.dispatch("deleteFromDB",t)}}},selectedName(){return this.selectedData?this.selectedData[this.searchedProperty]:void 0}},pouch:{availableData(){let t={type:this.dataType};return t[this.searchedProperty]={$regex:RegExp(this.search,"i")},{database:"navue",selector:t}}},methods:{createData(t){this.selectedData=new this.constructor(t)},async saveData(){try{this.selectedData=await this.$store.dispatch("saveToDB",this.selectedData),this.openWarning({message:`"${this.selectedName}" saved`})}catch(t){this.dispatchError(t)}},discardData(){this.selectedData=void 0},async deleteData(){try{await this.$store.dispatch("deleteFromDB",this.selectedData),this.selectedData=null,this.openWarning({message:`"${this.selectedName}" deleted`})}catch(t){this.dispatchError(t)}},async importData(t){try{let e=await this.uploadJSON(t);this.selectedData=this.cloneData(e),this.openWarning({message:`"${this.selectedName}" imported`})}catch(e){this.dispatchError(e)}},exportData(){this.selectedData&&this.downloadJSON(this.selectedData,this.selectedName+".json")},cloneData(t){let e=t.clone();return delete e._id,delete e._rev,e.name&&(e.name+="-1"),e.registration&&(e.registration+="(cloned)"),e},dispatchError(t){console.error(t),this.openWarning(t)}}}},3634:function(t,e,r){"use strict";r.d(e,"d",(function(){return Distance})),r.d(e,"a",(function(){return Altitude})),r.d(e,"g",(function(){return Speed})),r.d(e,"c",(function(){return Consumption})),r.d(e,"i",(function(){return Weight})),r.d(e,"b",(function(){return Azimuth})),r.d(e,"f",(function(){return Pressure})),r.d(e,"h",(function(){return Temperature})),r.d(e,"e",(function(){return Frequency}));var i=r("bd67");class Quantity extends i["a"]{constructor(t,e,{type:r,unit:i,precision:a,...n}={}){if(arguments[0]instanceof Quantity)return arguments[0];super(n),e?this.unit=e:this._unit=void 0,t||0===t?this.value=t:(this._value=void 0,this.precision=void 0),a&&(this.precision=a),i&&(this.unit=i)}get value(){return this.constructor.significantValue(this._to(this._value),this.precision)}set value(t){let e=Number(t);if(Number.isNaN(e))throw`\`${t}\` could not be coerced to a number`;this._value=this._from(e),this.precision=this.constructor.significantFigures(t)}get unit(){return this._unit||this.constructor.baseUnit}set unit(t){if(!this.constructor.units[t])throw`'${t}' is not an available unit`;this._unit=t}get factor(){return this.constructor.units[this.unit]}_from(t,e=this.unit){return Number(t)/this._factor(e)}_to(t,e=this.unit){return Number(t)*this._factor(e)}_factor(t){if(this.constructor.units[t])return this.constructor.units[t];throw`'${t}' is not an available unit`}to(t){return this._to(this.value,t)}as(t,e){return Object.assign(this.constructor.from(this),{unit:t,precision:e})}add(t,e){if("number"==typeof t||t instanceof this.constructor)return new this.constructor(this+t,void 0,{precision:Math.min(this.precision,t.precision),unit:this._unit,...e});throw"operands should be of the same type"}prod(t,e){return new this.constructor(this*t,void 0,{precision:Math.min(this.precision,t.precision||this.constructor.significantFigures(t)),unit:this._unit,...e})}valueOf(){return this._value}toString(){let t=Math.max(1,Math.min(this.precision||0,21));return`${isNaN(this.value)?"-":this.value.toLocaleString(void 0,{minimumSignificantDigits:t,maximumSignificantDigits:t})} ${this.unit}`}toJSON(){let{_value:t,_unit:e,...r}=this;return{...r,value:this.value,unit:this.unit,type:this.constructor.name}}static significantFigures(t){let e;if(0===t)return 0;if("number"===typeof t)e=Math.abs(t).toExponential();else{if("string"!==typeof t||Number.isNaN(Number(t)))return;e=t.replace(/^\+|-/,"").replace(/^0+/,"")}e=e.replace(".","");const r=e.lastIndexOf("e");return r>0?r:e.length}static significantValue(t,e=1){if(0===t)return 0;const r=Math.pow(10,e-Math.floor(Math.log(t<0?-t:t)/Math.LN10)-1);return Math.round(t*r)/r}static get units(){throw"list of available units should be set on constructor."}static get baseUnit(){return Object.keys(this.units)[Object.values(this.units).indexOf(1)]}static from({type:t,value:e,unit:r,...i}={}){if(!t||this.name==t)return new this(e,r,i)}}class Distance extends Quantity{static get units(){return{m:1,Km:.001,ft:3.28084,NM:539957e-9,mi:621371e-9,yd:1.09361}}}class Altitude extends Distance{constructor(t,e,{reference:r,...i}={}){if("FL"==e)r="QNE";else if(e&&!r)throw`property 'reference' should be given, got '${r}'`;super(t,e,{...i,reference:r})}get value(){return"FL"==this.unit?this.constructor.significantValue(this._to(this._value),2):this._to(this._value)}set value(t){super.value=t}toString(){return"FL"==this.unit?"FL"+String(this.value).padStart(3,"0"):this.value&&this.reference?`${super.toString()} ${this.reference}`:void 0}static get references(){return["MSL","AGL","QNH","QNE","QFE","WGS84"]}static get units(){return{m:1,ft:3.28084,FL:.0328084}}}class Speed extends Quantity{static get units(){return{"m/s":1,"km/h":3.6,"ft/min":196.85,kt:1.94384,mph:2.23694}}}class Volume extends Quantity{static get units(){return{m3:1,L:1e3,"gal US":264.172,"gal Imp":219.969}}}class Consumption extends Volume{static get references(){return["h","1000ft","u"]}toString(t){return`${super.toString(t)}/${this.reference}`}}class Weight extends Quantity{static get units(){return{kg:1,lb:2.20462,t:.001,"L-avgas":1/.721,"L-JetA1":1.25}}}class Angle extends Quantity{static get units(){return{rad:1,"°":180/Math.PI,gon:200/Math.PI,rev:.5/Math.PI,"₥":3200/Math.PI}}}class Azimuth extends Angle{get value(){return this._to((this._value+2*Math.PI)%(2*Math.PI))}set value(t){super.value=t}}class Pressure extends Quantity{static get units(){return{Pa:1,hPa:.01,Psi:1/6894.76,atm:1/101325,bar:1e-5,inHg:1/3386.389}}}class Temperature extends Quantity{static get units(){return{"°C":[1,0],K:[1,273.15],"°F":[9/5.32]}}_from(t,e=this.unit){return Number(t)/this._factor(e)[0]+this._factor(e)[1]}_to(t,e=this.unit){return(Number(t)-this._factor(e)[1])*this._factor(e)[0]}}class Frequency extends Quantity{static get units(){return{Hz:1,KHz:.001,MHz:1e-5,GHz:1e-8}}}},"56d7":function(t,e,r){"use strict";r.r(e);var i=r("2b0e"),render=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Navbar",{staticClass:" is-hidden-printer"}),r("router-view")],1)},a=[],Navbarvue_type_template_id_51df16b2_render=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-navbar",{staticClass:"is-radiusless",attrs:{"fixed-top":""}},[r("template",{slot:"brand"},[r("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[r("img",{attrs:{src:"img/icons/android-chrome-192x192.png",alt:"Navue, a navigation tool for general aviation."}})]),r("b-navbar-item",{attrs:{tag:"span"}},[r("b-tag",{attrs:{type:"is-danger"}},[t._v("beta")])],1)],1),r("template",{slot:"start"},[r("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Briefing"}}},[t._v("Briefing")]),r("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Fly"}}},[t._v("Fly")]),r("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Debriefing"},disabled:""}},[t._v("Debriefing")]),r("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Monitor"}}},[t._v("Monitor")])],1),r("template",{slot:"end"},[r("b-navbar-item",[r("AircraftManager",{attrs:{triggers:["click","hover"]},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.selected;return[r("b-button",{attrs:{type:"is-primary","icon-right":"chevron-down"}},[t._v(" "+t._s(i?i.registration:"Select an aircraft")+" ")])]}}])})],1),r("b-navbar-dropdown",{attrs:{hoverable:"",collapsible:"",right:""}},[r("template",{slot:"label"},[r("b-icon",{attrs:{icon:"account"}})],1),r("b-navbar-item",{staticStyle:{"min-width":"30vw"},attrs:{tag:"div"}},[r("Login")],1)],2)],1)],2)},n=[],s=r("7226"),Loginvue_type_template_id_bffc7274_render=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("nav",{staticClass:"level"},[r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading"},[t._v("Aircrafts")]),r("p",{staticClass:"title"},[t._v(t._s(t.userStats.Aircraft||0))])])]),r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading"},[t._v("Navigations")]),r("p",{staticClass:"title"},[t._v(t._s(t.userStats.Navigation||0))])])]),r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading"},[t._v("Flights")]),r("p",{staticClass:"title"},[t._v(t._s(t.userStats.Flight||0))])])]),r("div",{staticClass:"level-item has-text-centered"},[r("div",[r("p",{staticClass:"heading"},[t._v("Storage")]),r("p",{staticClass:"title"},[t._v(t._s(t._f("percent")(t.userStats.storage||0)))])])])]),r("b-loading",{attrs:{"is-full-page":!1,active:!!t.error}}),t.currentUser?r("div",[r("nav",{staticClass:"level is-mobile"},[r("div",{staticClass:"level-item has-text-centered"},[r("b-icon",{attrs:{icon:t.syncIcons[t.syncStatus]}})],1),r("div",{staticClass:"level-item has-text-centered"},[r("h5",{staticClass:"title is-5"},[t._v(t._s(t.currentUser.name))])])]),r("nav",{staticClass:"level"},[r("div",{staticClass:"level-item has-text-centered"},[r("b-button",{attrs:{type:"is-primary","icon-left":"account-arrow-right-outline"},on:{click:t.logoutUser}},[t._v("Sign out")])],1),r("div",{staticClass:"level-item has-text-centered"},[r("b-button",{attrs:{type:"is-primary is-light","icon-left":"account-edit-outline"},on:{click:t.openDetails}},[t._v("Edit")])],1)])]):r("fieldset",[r("b-field",{attrs:{label:"Email",horizontal:""}},[r("b-input",{attrs:{type:"email",icon:"email",placeholder:"pilote@navue.io",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),r("b-field",{attrs:{label:"Password",horizontal:""}},[r("b-input",{attrs:{type:"password",icon:"lock",placeholder:"*******",required:"","password-reveal":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("b-field",{attrs:{"is-grouped":""}},[r("b-button",{staticClass:"is-primary",attrs:{"icon-left":"account-arrow-left-outline",expanded:""},on:{click:function(e){return t.loginUser(t.username,t.password)}}},[t._v("Sign in")]),r("b-button",{staticClass:"is-primary is-light",attrs:{"icon-left":"account-plus-outline"},on:{click:function(e){return t.createUser(t.username,t.password)}}},[t._v("Create Account")]),t.gotLocalData?r("b-button",{staticClass:"is-danger is-light",attrs:{"icon-left":"database-remove"},on:{click:t.cleanLocal}},[t._v("Clear device")]):t._e()],1)],1)],1)},o=[],UserDetailsvue_type_template_id_2fe7fb40_render=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal-card"},[r("header",{staticClass:"modal-card-head"},[r("p",{staticClass:"modal-card-title"},[t._v(t._s(t.value.name))]),r("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),r("fieldset",{staticClass:"modal-card-body"},[r("b-taglist",t._l(t.value.roles,(function(e){return r("b-tag",{key:e,attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(e))])})),1),r("b-field",{attrs:{label:"Licences"}},[r("b-taginput",{attrs:{ellipsis:"",icon:"label",placeholder:"Add a Licence","aria-close-label":"Delete this tag"},model:{value:t.value.licences,callback:function(e){t.$set(t.value,"licences",e)},expression:"value.licences"}})],1),r("b-field",{attrs:{label:"Organization"}},[r("b-input",{attrs:{type:"text",icon:"domain"},model:{value:t.value.organization,callback:function(e){t.$set(t.value,"organization",e)},expression:"value.organization"}})],1),r("b-button",{attrs:{type:"is-primary","icon-left":"account-edit-outline",expanded:""},on:{click:function(e){return t.updateMetadata(t.metadata)}}},[t._v("Save")]),r("div",{staticClass:"divider is-danger"},[t._v("Danger Zone")]),r("b-field",{attrs:{type:"is-warning"}},[r("b-input",{attrs:{type:"password","password-reveal":"",expanded:"",autocomplete:"new-password",icon:"account-key"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),r("p",{staticClass:"control"},[r("b-button",{attrs:{type:"is-warning is-light","icon-left":"lock-reset"},on:{click:function(e){return t.confirmAndupdatePassword(t.newPassword)}}},[t._v("Change Password")])],1)],1),r("b-button",{attrs:{expanded:"",type:"is-danger","icon-left":"account-remove"},on:{click:function(e){return t.confirmAnddeleteUser()}}},[t._v("Delete Account")])],1),r("footer",{staticClass:"modal-card-foot"},[t._v(" Member since "+t._s(t._f("asDate")(t.value.created_at))+" ")])])},c=[];const u={data(){return{syncHandle:null,remoteDbUrl:new URL("https://db.treville.fr:8443")}},async created(){let t,e,r,i={_id:"_design/user",views:{"count-items":{map:function({type:t}){emit(t)}.toString(),reduce:"_count"},stats:{map:function({type:t,length:e,duration:r}){switch(t){case"Navigation":emit("NavigationDistance",e||0);break;case"Flight":emit("FlightTime",r||0);break;default:emit(t)}}.toString(),reduce:"_sum"}}};try{({_rev:t,views:e}=await this.$pouch.get(i._id))}catch{r=!0}finally{(r||JSON.stringify(e)!=JSON.stringify(i.views))&&await this.$pouch.put({_rev:t,...i})}},computed:{currentUser:{get(){return this.$store.state.currentUser},set(t){this.$store.commit("currentUser",t)}},remoteDB(){return this.$pouch.getDB(this.remoteDbUrl)}},methods:{async setCurrentUser(){try{const{userCtx:{name:t}}=await this.remoteDB.getSession();if(t)return this.currentUser=await this.remoteDB.getUser(t),this.$pouch.getDB(new URL(this.userDBname(this.currentUser.name),this.remoteDbUrl));new Error("No session available.")}catch(t){console.error(t)}},userDBname(t){return"userdb-"+Array.from(t).map(t=>t.charCodeAt(0)<128?t.charCodeAt(0).toString(16):encodeURIComponent(t).replace(/%/g,"").toLowerCase()).join("")},getUserStats(t){return Promise.allSettled([t.query("user/count-items",{group:!0}).then(({rows:t})=>t.reduce((t,e)=>(t[e.key]=e.value,t),{})),navigator.storage.estimate().then(({usage:t,quota:e})=>({storage:t/e}))]).then(t=>t.reduce((t,{status:e,value:r})=>("fulfilled"==e&&(t={...t,...r}),t),{})).catch(console.error)},startSync(t,e){this.stopSync(),this.syncHandle=this.$pouch.sync(t,{}),e&&this.syncHandle.on("active",t=>e("active",t)).on("change",t=>e("change",t)).on("paused",t=>e("paused",t)).on("complete",t=>e("complete",t)).on("error",t=>e("error",t)).on("denied",t=>e("denied",t))},stopSync(){if(this.syncHandle)return this.syncHandle.cancel()},async cleanLocal(){await this.$pouch.viewCleanup();try{await this.$pouch.destroy()}finally{this.$store.commit("cleanStore")}}}};var l=r("08df"),d={name:"UserDetails",mixins:[u,l["c"]],data(){return{newPassword:null,confirm:{deleteUser:{title:"Deleting account",message:"Are you sure you want to <b>delete</b> your account? This action cannot be undone.",confirmText:"Delete Account"},updatePassword:{type:"is-warning",title:"Change Password",message:"Are you sure you want to <b>change</b> current password.",confirmText:"Change password"}}}},props:["value"],computed:{metadata(){const{_id:t,_rev:e,type:r,name:i,roles:a,...n}=this.value;return n}},methods:{async confirmAnddeleteUser(){const{result:t}=await this.confirmAction(this.confirm.deleteUser);if(t)try{await this.remoteDB.deleteUser(this.value.name),this.$emit("update-user"),this.$emit("close"),this.openWarning({message:"Account deleted."})}catch(e){this.openWarning(e)}},async updateMetadata(t){try{await this.remoteDB.putUser(this.value.name,{metadata:t}),this.$emit("update-user"),this.$emit("close"),this.openWarning({message:"Account saved."})}catch(e){this.openWarning(e)}},async confirmAndupdatePassword(t){const{result:e}=await this.confirmAction(this.confirm.updatePassword);if(e)try{await this.remoteDB.changePassword(this.value.name,t),this.$emit("close"),this.openWarning({message:"Password changed."})}catch(r){this.openWarning(r)}finally{this.newPassword=null}}},filters:{asDate(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"})}}},h=d,p=r("2877"),m=Object(p["a"])(h,UserDetailsvue_type_template_id_2fe7fb40_render,c,!1,null,null,null),f=m.exports,g={name:"Login",mixins:[u,l["c"]],data(){return{statsFeed:void 0,username:null,password:null,userStats:{},importData:{title:"Import data",type:"is-warning",message:"Some data are present in this device. Would you like to import them into your account ?",confirmText:"Yes",cancelText:"No"},syncStatus:"complete",syncIcons:{active:"cloud-sync-outline fade",change:"cloud-sync-outline fade",paused:"cloud-check-outline",complete:"cloud-off-outline",error:"weather-cloudy-alert",denied:"weather-cloudy-alert"},serverPresent:void 0,error:!1}},async mounted(){this.serverPresent=await this.checkServer("navue")},async created(){await this.setupUser()},beforeDestroy(){this.statsFeed&&this.statsFeed.cancel()},computed:{gotLocalData(){return this.userStats.constructor===Object&&Object.keys(this.userStats).length>1}},methods:{async checkServer(t){try{return clearTimeout(this.error),this.error=!1,await this.remoteDB.info()}catch(e){this.error=setTimeout(this.checkServer,3e3,t)}},async createUser(t,e){try{await this.remoteDB.signUp(t,e,{metadata:{created_at:new Date}}),this.openWarning({message:"Welcome on navue !",duration:5e3}),await this.loginUser(t,e)}catch(r){this.openWarning(r)}},async setupUser(){try{this.setUserStats(),this.setStatsFeed();const t=await this.setCurrentUser();if(t)return await this.startSync(t,this.syncHandler),!0}catch(t){console.error(t)}},async loginUser(t,e){this.stopSync();try{if(await this.remoteDB.logIn(t,e),this.gotLocalData){const{result:t}=await this.confirmAction(this.importData);t||this.cleanLocal()}await this.setupUser(),this.openWarning({message:"You're in !",duration:1e3}),this.username=this.password=null}catch(r){this.openWarning(r)}},async logoutUser(){this.stopSync();try{await this.remoteDB.logOut(),this.currentUser=void 0,this.openWarning({message:"You're out !",duration:1e3})}catch(t){this.openWarning(t)}finally{this.cleanLocal()}},setStatsFeed(){this.statsFeed=this.$pouch.getDB().on("destroyed",t=>{t&&(this.$pouch.getDB(),this.statsFeed&&this.statsFeed.cancel(),this.setUserStats(),this.statsFeed=this.setStatsFeed())}).changes({since:"now",live:!0,view:"user/count-items",filter:"_view"}).on("change",this.setUserStats)},async setUserStats(){this.userStats=await this.getUserStats(this.$pouch)},async checkSession(){try{return await this.setCurrentUser()}catch{this.logoutUser()}},syncHandler(t,e){this.syncStatus=t,t in["error","denied"]&&this.openWarning(e)},openDetails(){this.modal=this.$buefy.modal.open({parent:this,component:f,props:{value:this.currentUser},events:{"update-user":this.checkSession},hasModalCard:!1,trapFocus:!0,"append-to-body":!0})}},filters:{percent(t){return Math.ceil(100*t)+"%"}}},b=g,v=(r("039a"),Object(p["a"])(b,Loginvue_type_template_id_bffc7274_render,o,!1,null,null,null)),y=v.exports,_={name:"Navbar",components:{AircraftManager:s["a"],Login:y},computed:{currentAircraft(){return this.$store.state.currentAircraft}}},w=_,k=Object(p["a"])(w,Navbarvue_type_template_id_51df16b2_render,n,!1,null,null,null),S=k.exports,D={components:{Navbar:S}},x=D,N=(r("5c0b"),Object(p["a"])(x,render,a,!1,null,null,null)),$=N.exports,C=r("acfa"),A=r("2c4e");const L=new C["a"]("/service-worker.js");var O=L;if("serviceWorker"in navigator){const t={type:"is-warning",actionText:null,indefinite:!1,duration:1e3};L.addEventListener("installed",e=>{e.isUpdate?A["a"].open({...t,message:"Loading new version of naVue."}):A["a"].open({...t,message:"naVue is now installed on your device."})}),L.addEventListener("waiting",()=>{A["a"].open({...t,indefinite:!0,message:"A new version of naVue is available.",actionText:"Use it now",onAction:()=>{L.messageSW({type:"SKIP_WAITING"})}})}),L.addEventListener("controlling",()=>{window.location.reload()}),L.addEventListener("activated",()=>{A["a"].open({...t,message:"Welcome to the new version of naVue."})}),L.register()}var P=r("8c4f");i["a"].use(P["a"]);const F=[{path:"/",name:"Home",component:()=>r.e("chunk-0fc0d246").then(r.bind(null,"bb51"))},{path:"/aircraft",name:"Aircraft",component:()=>Promise.all([r.e("chunk-2f5398a4"),r.e("chunk-2d221f18")]).then(r.bind(null,"cd01"))},{path:"/brief",name:"Briefing",component:()=>Promise.all([r.e("chunk-005ab131"),r.e("chunk-2f5398a4"),r.e("chunk-b6b35876"),r.e("chunk-62628b26")]).then(r.bind(null,"a0f4"))},{path:"/fly",name:"Fly",component:()=>Promise.all([r.e("chunk-005ab131"),r.e("chunk-2f5398a4"),r.e("chunk-b6b35876"),r.e("chunk-03abcb2e")]).then(r.bind(null,"ef23"))},{path:"/debrief",name:"Debriefing",component:()=>r.e("chunk-2d0c8dd2").then(r.bind(null,"5760"))},{path:"/monitor",name:"Monitor",component:()=>r.e("chunk-2d0c8dd2").then(r.bind(null,"5760"))},{path:"/preflight",name:"Preflight",component:()=>Promise.all([r.e("chunk-005ab131"),r.e("chunk-4eb1fb42")]).then(r.bind(null,"80b7"))},{path:"/about",name:"About",component:()=>r.e("chunk-698fb2b4").then(r.bind(null,"f820"))}],M=new P["a"]({mode:"history",routes:F,linkActiveClass:"is-active"});var U=M,W=r("2f62"),B=r("1caf"),j=r("b98f"),T=r("f9de"),q=r("00b4");i["a"].use(W["a"]);var E=new W["a"].Store({state:{currentUser:void 0,currentAircraft:void 0,currentNavigation:void 0,currentLocation:void 0,currentFlight:void 0,currentQueries:{}},getters:{pois(t){return t.currentNavigation&&t.currentNavigation.poi||[]}},mutations:{currentUser(t,{derived_key:e,iterations:r,password_scheme:i,salt:a,...n}={}){t.currentUser=0==Object.keys(n).length?void 0:n},currentAircraft(t,e){t.currentAircraft=e?j["a"].from(e):e},currentNavigation(t,e){t.currentNavigation=e?B["a"].from(e):e},currentFlight(t,e){t.currentFlight=e?q["a"].from(e):e},currentLocation(t,e){t.currentLocation=e?T["a"].from(e):e},currentQueries(t,e){t.currentQueries={...t.currentQueries,...e}},cleanStore(t){t.currentUser=void 0,t.currentAircraft=void 0,t.currentNavigation=void 0,t.currentFlight=void 0,t.currentLocation=void 0,t.currentQueries={}}},actions:{async saveToDB(t,e){let r=JSON.parse(JSON.stringify(e));r._id||(r._id=`${r.type}-${Date.now()}`);let{id:i}=await this._vm.$pouch.put(r);return await this._vm.$pouch.get(i,{include_docs:!0})},deleteFromDB(t,e){return this._vm.$pouch.remove(e)}}}),I=r("289d"),J=(r("5363"),r("d6e1")),R=r("fcd3"),Q=r("eae4");i["a"].use(I["a"],{defaultProgrammaticPromise:!0}),J["a"].plugin(R["a"]),i["a"].use(Q["a"],"navue"),i["a"].config.productionTip=!1,new i["a"]({router:U,store:E,render:t=>t($)}).$mount("#app").$sw=O},"5c0b":function(t,e,r){"use strict";r("9c0c")},7174:function(t,e,r){},7226:function(t,e,r){"use strict";var render=function(){var t=this,e=this,r=e.$createElement,i=e._self._c||r;return i("b-dropdown",e._b({scopedSlots:e._u([{key:"trigger",fn:function(){return[e._t("default",(function(){return[i("b-button",[i("b-tooltip",{attrs:{position:"is-bottom",label:e.selectedData?e.selectedData.registration:"Aircraft"}},[i("b-icon",{attrs:{icon:"airplane",type:e.selectedData?"is-success":""}})],1)],1)]}),{selected:e.selectedData})]},proxy:!0}],null,!0)},"b-dropdown",e.$attrs,!1),[e.selectedData?[e.$slots.header||e.$scopedSlots.header?i("b-dropdown-item",{attrs:{custom:""}},[e._t("header",null,{selected:e.selectedData})],2):e._e(),e.$slots.header||e.$scopedSlots.header?i("b-dropdown-item",{attrs:{separator:""}}):e._e(),e.edit?[i("b-dropdown-item",{on:{click:e.saveData}},[i("b-icon",{attrs:{icon:"cloud-upload-outline",type:"is-warning"}}),e._v(" Save ")],1),i("b-dropdown-item",{on:{click:e.exportData}},[i("b-icon",{attrs:{icon:"download-outline"}}),e._v(" Export ")],1),e.create?i("b-dropdown-item",{attrs:{disabled:!e.fromDB},on:{click:function(t){e.selectedData=e.cloneData(e.selectedData)}}},[i("b-icon",{attrs:{icon:"plus-circle-multiple-outline"}}),e._v(" Clone ")],1):e._e(),i("b-dropdown-item",{attrs:{disabled:!e.fromDB},on:{click:e.deleteData}},[i("b-icon",{attrs:{icon:"delete-outline",type:"is-danger"}}),e._v(" Delete ")],1)]:e._e(),i("b-dropdown-item",e._g({},e.persistent?{click:e.createData}:{click:e.discardData}),[i("b-icon",{attrs:{icon:"selection-off"}}),e._v(" Discard ")],1)]:[i("b-dropdown-item",{attrs:{custom:""}},[i("b-autocomplete",{attrs:{placeholder:"Choose an aircraft",data:e.availableData||[],field:e.searchedProperty,"open-on-focus":"","keep-first":"","clear-on-select":"",clearable:""},on:{select:function(e,r){r.stopPropagation(),t.selectedData=e}},scopedSlots:e._u([e.search?{key:"empty",fn:function(){return[i("i",[e._v(e._s(e.search))]),e._v(" not found ")]},proxy:!0}:{key:"empty",fn:function(){return[e._v(" No aircraft registered ")]},proxy:!0}],null,!0),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.create?i("b-dropdown-item",{on:{click:e.createData}},[i("b-icon",{attrs:{icon:"plus-circle-outline"}}),e._v(" New Aircraft ")],1):e._e(),e.create?i("b-dropdown-item",[i("b-upload",{attrs:{accept:"application/json",expanded:""},on:{input:e.importData},model:{value:e.upload,callback:function(t){e.upload=t},expression:"upload"}},[i("b-icon",{attrs:{icon:"upload"}}),e._v(" Import ")],1)],1):e._e()],"Aircraft"!=e.$route.name?i("b-dropdown-item",{attrs:{"has-link":""}},[i("router-link",{attrs:{to:{name:"Aircraft"}}},[e._v(" Manage Aircrafts ")])],1):e._e()],2)},i=[],a=r("1db5"),n=r("b98f"),s={name:"AircraftManager",mixins:[a["a"]],data(){return{constructor:n["a"],storeKey:"currentAircraft",searchedProperty:"registration"}}},o=s,c=r("2877"),u=Object(c["a"])(o,render,i,!1,null,null,null);e["a"]=u.exports},"9c0c":function(t,e,r){},b98f:function(t,e,r){"use strict";r.d(e,"a",(function(){return Aircraft}));var i=r("bd67"),a=r("3634"),n=r("0c9a");class Aircraft extends i["a"]{constructor({registration:t,manufacturer:e,model:r,paces:s=new i["b"],consumptions:o=new i["b"],balance:c=new i["b"]({date:void 0}),envelopes:u=new i["b"],checklists:l=new i["b"]}={}){s.keep(t=>t instanceof a["g"]?t:void 0),o.keep(t=>t instanceof a["c"]?t:void 0),c.keep(t=>t instanceof n["a"]?t:void 0),u.keep(t=>t instanceof i["b"]?t:void 0),l.keep(t=>t instanceof i["b"]?t:void 0),super({registration:t,manufacturer:e,model:r,paces:s,consumptions:o,balance:c,envelopes:u,checklists:l})}static from({_id:t,_rev:e,type:r,registration:s,manufacturer:o,model:c,paces:u,consumptions:l,balance:d,envelopes:h,checklists:p}={}){if(arguments[0]instanceof this)return arguments[0];if(r!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${r}'`;{u&&(u=i["b"].from(u,a["g"])),l&&(l=i["b"].from(l,a["c"])),d&&(d=i["b"].from(d,n["a"])),h&&(h=i["b"].from(h,i["b"],n["a"])),p&&(p=i["b"].from(p,i["b"]));let r=new this({registration:s,manufacturer:o,model:c,paces:u,consumptions:l,balance:d,envelopes:h,checklists:p});return t&&e&&Object.assign(r,{_id:t,_rev:e}),r}}}},bd67:function(t,e,r){"use strict";r.d(e,"a",(function(){return Model})),r.d(e,"b",(function(){return Store}));class Model{constructor({type:t,...e}={}){Object.assign(this,e)}toJSON(){return{...this,type:this.constructor.name}}clone(){return this.constructor.from(JSON.parse(JSON.stringify(this)))}static from({type:t,...e}={}){if(arguments[0]instanceof this)return arguments[0];if(t==this.name)return new this(e);throw`Invalid data : 'type' should be '${this.name}' got '${t}'`}}class Store{constructor(t={},...e){this.items=e,Object.assign(this,t)}[Symbol.iterator](){return this.items[Symbol.iterator]()}get length(){return this.items.length}valueOf(){return this.items}get properties(){let{items:t,...e}={...this};return e}get first(){return this.items[0]}get last(){return this.items[this.length-1]}add(t,e){return e?this.items.splice(e,0,t):this.items.push(t),this.length}remove(t,e){return void 0===e&&(e=this.items.indexOf(t)),e>=0&&1==this.items.splice(e,1).length}keep(t){let e=this.items.length;while(e--){let r=t.call(this.items,this.items[e]);void 0==r?this.items.splice(e,1):Object.is(r,this.items[e])||this.items.splice(e,1,r)}return this}toJSON(){return{...this.properties,items:this.items,type:this.constructor.name}}static from({type:t,items:e=[],...r},...i){if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;{let t=i.shift();return new this(r,...e.map(e=>t?t.from(e,...i):e))}}}},f9de:function(t,e,r){"use strict";r.d(e,"b",(function(){return Waypoint})),r.d(e,"a",(function(){return Location}));var i=r("bd67"),a=r("3634"),n=r("d425");class Waypoint extends i["a"]{constructor(t,e,r,i={}){!r||r instanceof a["a"]||(r=new a["a"](r)),super({latitude:t,longitude:e,altitude:r,...i})}set latlng({lat:t,lng:e}={}){this.latitude=t,this.longitude=e}get latlng(){return{lat:this.latitude,lng:this.longitude}}get point(){return new n["a"](this.latitude,this.longitude)}distanceTo(t,e){return new a["d"](this.point.rhumbDistanceTo(t.point),"m",e)}bearingTo(t,e){return new a["b"](this.point.rhumbBearingTo(t.point),"°",e)}destinationPoint(t,e){let r=this.point.rhumbDestinationPoint(t,e);return new this.constructor(r.lat,r.lng)}toGeoJSON(t="Feature"){const{latitude:e,longitude:r,altitude:i,...a}=this;switch(t){case"Feature":return{type:t,properties:{...a,altitude:i.toJSON()},geometry:this.toGeoJSON("Point")};case"Point":return{type:t,coordinates:this.toGeoJSON("Position")};case"Position":return[e,r,Number(i)];default:throw"not a valid GeoJSON object"}}static from({type:t,latitude:e,longitude:r,altitude:i,latlng:n,...s}){if(arguments[0]instanceof this)return arguments[0];if(t!=this.name)throw`Invalid data : 'type' should be '${this.name}' got '${t}'`;return i&&(i=a["a"].from(i)),n&&(e=e||n.lat,r=r||n.lng),new this(e,r,i,s)}}class Location extends Waypoint{constructor(t,e,r,{accuracy:i,speed:a,heading:n,timestamp:s,...o}={}){super(t,e,r,{accuracy:i,speed:a,heading:n,timestamp:s,...o})}_delayFrom({timestamp:t}){return this.timestamp-t}_climbFrom({altitude:t}){return this.altitude-t}_speedFrom(t){if(0==this._delayFrom(t))throw"Teleportation is not yet a possibility";return new a["g"](this.distanceTo(t)/this._delayFrom(t)*1e3)}_verticalSpeedFrom(t){if(0==this._delayFrom(t))throw"Teleportation is not yet a possibility";return new a["g"](this._climbFrom(t)/this._delayFrom(t)*1e3)}movementFrom(t){return{speed:this._speedFrom(t),verticalSpeed:this._verticalSpeedFrom(t),heading:t.bearingTo(this)}}toBounds(t=this.accuracy){const e=180*t/40075017,r=e/Math.cos(Math.PI/180*this.latitude);return[[this.latitude-e,this.longitude-r],[this.latitude+e,this.longitude+r]]}positionInSeconds(t,e=this.heading){if(this.speed&&e)return this.destinationPoint(this.speed*t,e.value);throw"cannot calculate futur position, speed & heading should be provided"}static from({accuracy:t,speed:e,heading:r,timestamp:i,...n}={}){return arguments[0]instanceof this?arguments[0]:(t&&(t=a["d"].from(t)),e&&(e=a["g"].from(e)),r&&(r=a["b"].from(r)),delete n._id,delete n._rev,super.from({...n,accuracy:t,speed:e,heading:r,timestamp:i}))}static fromGeolocationPosition(t){let e,r,i,n;return t.coords.altitude&&(e=new a["a"](t.coords.altitude,"m",{reference:"WGS84",accuracy:t.coords.altitudeAccuracy})),t.coords.accuracy&&(n=new a["d"](t.coords.accuracy,"m")),t.coords.speed&&(r=new a["g"](t.coords.speed,"m/s")),t.coords.heading&&(i=new a["b"](t.coords.heading,"°")),this.from({type:"Location",latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:n,altitude:e,speed:r,heading:i,timestamp:t.timestamp})}static fromLocate({latitude:t,longitude:e,accuracy:r,altitude:i,altitudeAccuracy:n,speed:s,heading:o,timestamp:c}){return i&&(i=new a["a"](i,"m",{reference:"WGS84",accuracy:n})),r&&(r=new a["d"](r,"m")),s&&(s=new a["g"](s,"m/s")),o&&(o=new a["b"](o,"°")),this.from({type:"Location",latitude:t,longitude:e,accuracy:r,altitude:i,speed:s,heading:o,timestamp:c})}}}});
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4b4e2a4"],{"0223":function(t,a,e){"use strict";var i=e("ae67"),n=e.n(i);n.a},"0f66":function(t,a,e){},1849:function(t,a,e){"use strict";var i=e("0f66"),n=e.n(i);n.a},3935:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticStyle:{height:"100%"}},[e("l-map",{ref:"movingMap",attrs:{options:{zoomSnap:.5}},on:{ready:t.setupMap,contextmenu:function(a){t.nextDestination={latlng:a.latlng}}}},[e("l-base-layer-group"),e("l-moving-map-settings-control",{attrs:{position:"topleft"},on:{action:t.removeLocations},model:{value:t.settings,callback:function(a){t.settings=a},expression:"settings"}}),e("l-moving-map-instruments-control",{attrs:{position:"topright"},model:{value:t.lastKnownLocation,callback:function(a){t.lastKnownLocation=a},expression:"lastKnownLocation"}}),e("l-location-marker",{attrs:{futur:60},model:{value:t.lastKnownLocation,callback:function(a){t.lastKnownLocation=a},expression:"lastKnownLocation"}}),t.trace?e("l-polyline",{attrs:{"lat-lngs":t.trace,color:"black",opacity:.5,weight:5}}):t._e(),e("l-destination-marker",{attrs:{origin:t.lastKnownLocation},model:{value:t.nextDestination,callback:function(a){t.nextDestination=a},expression:"nextDestination"}}),e("vue-leaflet-minimap",{attrs:{layer:t.miniMap.layer,options:{toggleDisplay:!0,minimized:!0,position:"bottomright"}}})],1)],1)},n=[],s=e("e11e"),o=e.n(s),r=(e("6cc5"),e("29ae"),e("2699")),l=e("635f"),h=e("4a3e"),c=e.n(h);e("995f");let u=" ";class d{static get separator(){return u}static set separator(t){u=t}static parse(t){if(!isNaN(parseFloat(t))&&isFinite(t))return Number(t);const a=String(t).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==a[a.length-1]&&a.splice(a.length-1),""==a)return NaN;let e=null;switch(a.length){case 3:e=a[0]/1+a[1]/60+a[2]/3600;break;case 2:e=a[0]/1+a[1]/60;break;case 1:e=a[0];break;default:return NaN}return/^-|[WS]$/i.test(t.trim())&&(e=-e),Number(e)}static toDms(t,a="d",e){if(isNaN(t))return null;if("string"==typeof t&&""==t.trim())return null;if("boolean"==typeof t)return null;if(t==1/0)return null;if(null==t)return null;if(void 0===e)switch(a){case"d":case"deg":e=4;break;case"dm":case"deg+min":e=2;break;case"dms":case"deg+min+sec":e=0;break;default:a="d",e=4;break}t=Math.abs(t);let i=null,n=null,s=null,o=null;switch(a){default:case"d":case"deg":n=t.toFixed(e),n<100&&(n="0"+n),n<10&&(n="0"+n),i=n+"°";break;case"dm":case"deg+min":n=Math.floor(t),s=(60*t%60).toFixed(e),60==s&&(s=(0).toFixed(e),n++),n=("000"+n).slice(-3),s<10&&(s="0"+s),i=n+"°"+d.separator+s+"′";break;case"dms":case"deg+min+sec":n=Math.floor(t),s=Math.floor(3600*t/60)%60,o=(3600*t%60).toFixed(e),60==o&&(o=(0).toFixed(e),s++),60==s&&(s=0,n++),n=("000"+n).slice(-3),s=("00"+s).slice(-2),o<10&&(o="0"+o),i=n+"°"+d.separator+s+"′"+d.separator+o+"″";break}return i}static toLat(t,a,e){const i=d.toDms(d.wrap90(t),a,e);return null===i?"–":i.slice(1)+d.separator+(t<0?"S":"N")}static toLon(t,a,e){const i=d.toDms(d.wrap180(t),a,e);return null===i?"–":i+d.separator+(t<0?"W":"E")}static toBrng(t,a,e){const i=d.toDms(d.wrap360(t),a,e);return null===i?"–":i.replace("360","0")}static fromLocale(t){const a=123456.789.toLocaleString(),e={thousands:a.slice(3,4),decimal:a.slice(7,8)};return t.replace(e.thousands,"⁜").replace(e.decimal,".").replace("⁜",",")}static toLocale(t){const a=123456.789.toLocaleString(),e={thousands:a.slice(3,4),decimal:a.slice(7,8)};return t.replace(/,([0-9])/,"⁜$1").replace(".",e.decimal).replace("⁜",e.thousands)}static compassPoint(t,a=3){if(![1,2,3].includes(Number(a)))throw new RangeError(`invalid precision ‘${a}’`);t=d.wrap360(t);const e=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],i=4*2**(a-1),n=e[Math.round(t*i/360)%i*16/i];return n}static wrap360(t){return 0<=t&&t<360?t:(t%360+360)%360}static wrap180(t){return-180<t&&t<=180?t:(t+540)%360-180}static wrap90(t){return-90<=t&&t<=90?t:Math.abs((t%360+270)%360-180)-90}}Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var p=d;const g=Math.PI;class m{constructor(t,a){if(isNaN(t))throw new TypeError(`invalid lat ‘${t}’`);if(isNaN(a))throw new TypeError(`invalid lon ‘${a}’`);this._lat=p.wrap90(Number(t)),this._lon=p.wrap180(Number(a))}get lat(){return this._lat}get latitude(){return this._lat}set lat(t){if(this._lat=isNaN(t)?p.wrap90(p.parse(t)):p.wrap90(Number(t)),isNaN(this._lat))throw new TypeError(`invalid lat ‘${t}’`)}set latitude(t){if(this._lat=isNaN(t)?p.wrap90(p.parse(t)):p.wrap90(Number(t)),isNaN(this._lat))throw new TypeError(`invalid latitude ‘${t}’`)}get lon(){return this._lon}get lng(){return this._lon}get longitude(){return this._lon}set lon(t){if(this._lon=isNaN(t)?p.wrap180(p.parse(t)):p.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid lon ‘${t}’`)}set lng(t){if(this._lon=isNaN(t)?p.wrap180(p.parse(t)):p.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid lng ‘${t}’`)}set longitude(t){if(this._lon=isNaN(t)?p.wrap180(p.parse(t)):p.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid longitude ‘${t}’`)}static get metresToKm(){return.001}static get metresToMiles(){return 1/1609.344}static get metresToNauticalMiles(){return 1/1852}static parse(...t){if(0==t.length)throw new TypeError("invalid (empty) point");if(null===t[0]||null===t[1])throw new TypeError("invalid (null) point");let a=void 0,e=void 0;if(2==t.length&&([a,e]=t,a=p.wrap90(p.parse(a)),e=p.wrap180(p.parse(e)),isNaN(a)||isNaN(e)))throw new TypeError(`invalid point ‘${t.toString()}’`);if(1==t.length&&"string"==typeof t[0]&&([a,e]=t[0].split(","),a=p.wrap90(p.parse(a)),e=p.wrap180(p.parse(e)),isNaN(a)||isNaN(e)))throw new TypeError(`invalid point ‘${t[0]}’`);if(1==t.length&&"object"==typeof t[0]){const i=t[0];if("Point"==i.type&&Array.isArray(i.coordinates)?[e,a]=i.coordinates:(void 0!=i.latitude&&(a=i.latitude),void 0!=i.lat&&(a=i.lat),void 0!=i.longitude&&(e=i.longitude),void 0!=i.lng&&(e=i.lng),void 0!=i.lon&&(e=i.lon),a=p.wrap90(p.parse(a)),e=p.wrap180(p.parse(e))),isNaN(a)||isNaN(e))throw new TypeError(`invalid point ‘${JSON.stringify(t[0])}’`)}if(isNaN(a)||isNaN(e))throw new TypeError(`invalid point ‘${t.toString()}’`);return new m(a,e)}distanceTo(t,a=6371e3){if(t instanceof m||(t=m.parse(t)),isNaN(a))throw new TypeError(`invalid radius ‘${a}’`);const e=a,i=this.lat.toRadians(),n=this.lon.toRadians(),s=t.lat.toRadians(),o=t.lon.toRadians(),r=s-i,l=o-n,h=Math.sin(r/2)*Math.sin(r/2)+Math.cos(i)*Math.cos(s)*Math.sin(l/2)*Math.sin(l/2),c=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),u=e*c;return u}initialBearingTo(t){if(t instanceof m||(t=m.parse(t)),this.equals(t))return NaN;const a=this.lat.toRadians(),e=t.lat.toRadians(),i=(t.lon-this.lon).toRadians(),n=Math.cos(a)*Math.sin(e)-Math.sin(a)*Math.cos(e)*Math.cos(i),s=Math.sin(i)*Math.cos(e),o=Math.atan2(s,n),r=o.toDegrees();return p.wrap360(r)}finalBearingTo(t){t instanceof m||(t=m.parse(t));const a=t.initialBearingTo(this)+180;return p.wrap360(a)}midpointTo(t){t instanceof m||(t=m.parse(t));const a=this.lat.toRadians(),e=this.lon.toRadians(),i=t.lat.toRadians(),n=(t.lon-this.lon).toRadians(),s={x:Math.cos(a),y:0,z:Math.sin(a)},o={x:Math.cos(i)*Math.cos(n),y:Math.cos(i)*Math.sin(n),z:Math.sin(i)},r={x:s.x+o.x,y:s.y+o.y,z:s.z+o.z},l=Math.atan2(r.z,Math.sqrt(r.x*r.x+r.y*r.y)),h=e+Math.atan2(r.y,r.x),c=l.toDegrees(),u=h.toDegrees();return new m(c,u)}intermediatePointTo(t,a){if(t instanceof m||(t=m.parse(t)),this.equals(t))return new m(this.lat,this.lon);const e=this.lat.toRadians(),i=this.lon.toRadians(),n=t.lat.toRadians(),s=t.lon.toRadians(),o=n-e,r=s-i,l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e)*Math.cos(n)*Math.sin(r/2)*Math.sin(r/2),h=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),c=Math.sin((1-a)*h)/Math.sin(h),u=Math.sin(a*h)/Math.sin(h),d=c*Math.cos(e)*Math.cos(i)+u*Math.cos(n)*Math.cos(s),p=c*Math.cos(e)*Math.sin(i)+u*Math.cos(n)*Math.sin(s),g=c*Math.sin(e)+u*Math.sin(n),M=Math.atan2(g,Math.sqrt(d*d+p*p)),f=Math.atan2(p,d),w=M.toDegrees(),v=f.toDegrees();return new m(w,v)}destinationPoint(t,a,e=6371e3){const i=t/e,n=Number(a).toRadians(),s=this.lat.toRadians(),o=this.lon.toRadians(),r=Math.sin(s)*Math.cos(i)+Math.cos(s)*Math.sin(i)*Math.cos(n),l=Math.asin(r),h=Math.sin(n)*Math.sin(i)*Math.cos(s),c=Math.cos(i)-Math.sin(s)*r,u=o+Math.atan2(h,c),d=l.toDegrees(),p=u.toDegrees();return new m(d,p)}static intersection(t,a,e,i){if(t instanceof m||(t=m.parse(t)),e instanceof m||(e=m.parse(e)),isNaN(a))throw new TypeError(`invalid brng1 ‘${a}’`);if(isNaN(i))throw new TypeError(`invalid brng2 ‘${i}’`);const n=t.lat.toRadians(),s=t.lon.toRadians(),o=e.lat.toRadians(),r=e.lon.toRadians(),l=Number(a).toRadians(),h=Number(i).toRadians(),c=o-n,u=r-s,d=2*Math.asin(Math.sqrt(Math.sin(c/2)*Math.sin(c/2)+Math.cos(n)*Math.cos(o)*Math.sin(u/2)*Math.sin(u/2)));if(Math.abs(d)<Number.EPSILON)return new m(t.lat,t.lon);const p=(Math.sin(o)-Math.sin(n)*Math.cos(d))/(Math.sin(d)*Math.cos(n)),M=(Math.sin(n)-Math.sin(o)*Math.cos(d))/(Math.sin(d)*Math.cos(o)),f=Math.acos(Math.min(Math.max(p,-1),1)),w=Math.acos(Math.min(Math.max(M,-1),1)),v=Math.sin(r-s)>0?f:2*g-f,b=Math.sin(r-s)>0?2*g-w:w,N=l-v,y=b-h;if(0==Math.sin(N)&&0==Math.sin(y))return null;if(Math.sin(N)*Math.sin(y)<0)return null;const _=-Math.cos(N)*Math.cos(y)+Math.sin(N)*Math.sin(y)*Math.cos(d),L=Math.atan2(Math.sin(d)*Math.sin(N)*Math.sin(y),Math.cos(y)+Math.cos(N)*_),E=Math.asin(Math.min(Math.max(Math.sin(n)*Math.cos(L)+Math.cos(n)*Math.sin(L)*Math.cos(l),-1),1)),x=Math.atan2(Math.sin(l)*Math.sin(L)*Math.cos(n),Math.cos(L)-Math.sin(n)*Math.sin(E)),T=s+x,$=E.toDegrees(),k=T.toDegrees();return new m($,k)}crossTrackDistanceTo(t,a,e=6371e3){t instanceof m||(t=m.parse(t)),a instanceof m||(a=m.parse(a));const i=e;if(this.equals(t))return 0;const n=t.distanceTo(this,i)/i,s=t.initialBearingTo(this).toRadians(),o=t.initialBearingTo(a).toRadians(),r=Math.asin(Math.sin(n)*Math.sin(s-o));return r*i}alongTrackDistanceTo(t,a,e=6371e3){t instanceof m||(t=m.parse(t)),a instanceof m||(a=m.parse(a));const i=e;if(this.equals(t))return 0;const n=t.distanceTo(this,i)/i,s=t.initialBearingTo(this).toRadians(),o=t.initialBearingTo(a).toRadians(),r=Math.asin(Math.sin(n)*Math.sin(s-o)),l=Math.acos(Math.cos(n)/Math.abs(Math.cos(r)));return l*Math.sign(Math.cos(o-s))*i}maxLatitude(t){const a=Number(t).toRadians(),e=this.lat.toRadians(),i=Math.acos(Math.abs(Math.sin(a)*Math.cos(e)));return i.toDegrees()}static crossingParallels(t,a,e){if(t.equals(a))return null;const i=Number(e).toRadians(),n=t.lat.toRadians(),s=t.lon.toRadians(),o=a.lat.toRadians(),r=a.lon.toRadians(),l=r-s,h=Math.sin(n)*Math.cos(o)*Math.cos(i)*Math.sin(l),c=Math.sin(n)*Math.cos(o)*Math.cos(i)*Math.cos(l)-Math.cos(n)*Math.sin(o)*Math.cos(i),u=Math.cos(n)*Math.cos(o)*Math.sin(i)*Math.sin(l);if(u*u>h*h+c*c)return null;const d=Math.atan2(-c,h),g=Math.acos(u/Math.sqrt(h*h+c*c)),m=s+d-g,M=s+d+g,f=m.toDegrees(),w=M.toDegrees();return{lon1:p.wrap180(f),lon2:p.wrap180(w)}}rhumbDistanceTo(t,a=6371e3){t instanceof m||(t=m.parse(t));const e=a,i=this.lat.toRadians(),n=t.lat.toRadians(),s=n-i;let o=Math.abs(t.lon-this.lon).toRadians();Math.abs(o)>g&&(o=o>0?-(2*g-o):2*g+o);const r=Math.log(Math.tan(n/2+g/4)/Math.tan(i/2+g/4)),l=Math.abs(r)>1e-11?s/r:Math.cos(i),h=Math.sqrt(s*s+l*l*o*o),c=h*e;return c}rhumbBearingTo(t){if(t instanceof m||(t=m.parse(t)),this.equals(t))return NaN;const a=this.lat.toRadians(),e=t.lat.toRadians();let i=(t.lon-this.lon).toRadians();Math.abs(i)>g&&(i=i>0?-(2*g-i):2*g+i);const n=Math.log(Math.tan(e/2+g/4)/Math.tan(a/2+g/4)),s=Math.atan2(i,n),o=s.toDegrees();return p.wrap360(o)}rhumbDestinationPoint(t,a,e=6371e3){const i=this.lat.toRadians(),n=this.lon.toRadians(),s=Number(a).toRadians(),o=t/e,r=o*Math.cos(s);let l=i+r;Math.abs(l)>g/2&&(l=l>0?g-l:-g-l);const h=Math.log(Math.tan(l/2+g/4)/Math.tan(i/2+g/4)),c=Math.abs(h)>1e-11?r/h:Math.cos(i),u=o*Math.sin(s)/c,d=n+u,p=l.toDegrees(),M=d.toDegrees();return new m(p,M)}rhumbMidpointTo(t){t instanceof m||(t=m.parse(t));const a=this.lat.toRadians();let e=this.lon.toRadians();const i=t.lat.toRadians(),n=t.lon.toRadians();Math.abs(n-e)>g&&(e+=2*g);const s=(a+i)/2,o=Math.tan(g/4+a/2),r=Math.tan(g/4+i/2),l=Math.tan(g/4+s/2);let h=((n-e)*Math.log(l)+e*Math.log(r)-n*Math.log(o))/Math.log(r/o);isFinite(h)||(h=(e+n)/2);const c=s.toDegrees(),u=h.toDegrees();return new m(c,u)}static areaOf(t,a=6371e3){const e=a,i=t[0].equals(t[t.length-1]);i||t.push(t[0]);const n=t.length-1;let s=0;for(let l=0;l<n;l++){const a=t[l].lat.toRadians(),e=t[l+1].lat.toRadians(),i=(t[l+1].lon-t[l].lon).toRadians(),n=2*Math.atan2(Math.tan(i/2)*(Math.tan(a/2)+Math.tan(e/2)),1+Math.tan(a/2)*Math.tan(e/2));s+=n}r(t)&&(s=Math.abs(s)-2*g);const o=Math.abs(s*e*e);return i||t.pop(),o;function r(t){let a=0,e=t[0].initialBearingTo(t[1]);for(let s=0;s<t.length-1;s++){const i=t[s].initialBearingTo(t[s+1]),n=t[s].finalBearingTo(t[s+1]);a+=(i-e+540)%360-180,a+=(n-i+540)%360-180,e=n}const i=t[0].initialBearingTo(t[1]);a+=(i-e+540)%360-180;const n=Math.abs(a)<90;return n}}equals(t){return t instanceof m||(t=m.parse(t)),!(Math.abs(this.lat-t.lat)>Number.EPSILON)&&!(Math.abs(this.lon-t.lon)>Number.EPSILON)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat]}}toString(t="d",a){if(!["d","dm","dms","n"].includes(t))throw new RangeError(`invalid format ‘${t}’`);if("n"==t)return void 0==a&&(a=4),`${this.lat.toFixed(a)},${this.lon.toFixed(a)}`;const e=p.toLat(this.lat,t,a),i=p.toLon(this.lon,t,a);return`${e}, ${i}`}}const M={methods:{stopLocate(){this.map.stopLocate()},startLocate(){this.map.locate({watch:!0,enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},_computeFromLastLocation(t,a){let e=new m(a.latlng.lat,a.latlng.lng),i=new m(t.latlng.lat,t.latlng.lng);t.heading=t.heading||e.rhumbBearingTo(i),t.speed=t.speed||e.rhumbDistanceTo(i)/Math.floor((t.timestamp-a.timestamp)/1e3),t.vario=(a.altitude-t.altitude)/Math.floor((t.timestamp-a.timestamp)/1e3)},_debounceLocation(t,a){return t.accuracy>100?(t.type="locationerror",t.message="Geolocation error: low accuracy.",!1):t.altitudeAccuracy>15?(delete t.altitude,delete t.altitudeAccuracy,!0):!(a&&new m(a.latlng.lat,a.latlng.lng).rhumbDistanceTo(new m(t.latlng.lat,t.latlng.lng))<=1)},_fakeLocation({latlng:t={lat:0,lng:0},accuracy:a=20,altitude:e=1e3},i=5){let n=(t=i)=>(Math.random()-.5)*t;return{type:"fakelocation",latlng:o.a.latLng(t.lat+n(),t.lng+n()),accuracy:a+n(a*i/100),altitude:e+n(e*i/100),altitudeAccuracy:a+n(a*i/100),timestamp:Date.now()}}}};var f=e("b8bf"),w=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("l-control",t._b({},"l-control",t.$attrs,!1),[e("b-dropdown",{attrs:{hoverable:"","aria-role":"list",position:"is-bottom-right"}},[e("b-button",{attrs:{slot:"trigger","icon-left":"cog"},slot:"trigger"}),e("b-dropdown-item",{attrs:{"aria-role":"listitem",custom:""}},[e("b-switch",{model:{value:t.value.getLocation,callback:function(a){t.$set(t.value,"getLocation",a)},expression:"value.getLocation"}},[t._v("Use GNSS")])],1),e("b-dropdown-item",{attrs:{"aria-role":"listitem",custom:""}},[e("b-switch",{attrs:{disabled:!t.value.getLocation},model:{value:t.value.setView,callback:function(a){t.$set(t.value,"setView",a)},expression:"value.setView"}},[t._v("Keep view centered")])],1),e("b-dropdown-item",{attrs:{"aria-role":"listitem",custom:""}},[e("b-switch",{attrs:{disabled:!t.value.getLocation},model:{value:t.value.recordLocation,callback:function(a){t.$set(t.value,"recordLocation",a)},expression:"value.recordLocation"}},[t._v("Record track ")])],1),e("b-dropdown-item",{attrs:{"aria-role":"listitem",custom:""}},[e("b-button",{attrs:{size:"is-small","icon-right":"delete",outlined:"",expanded:""},on:{click:function(a){return t.$emit("action","delete_track")}}},[t._v("Delete track")])],1),e("b-dropdown-item",{attrs:{"aria-role":"listitem",custom:""}},[e("b-switch",{model:{value:t.value.allowWarning,callback:function(a){t.$set(t.value,"allowWarning",a)},expression:"value.allowWarning"}},[t._v("Display warnings")])],1)],1)],1)},v=[],b=e("2253"),N={name:"LMovingMapsSettingsControl",components:{LControl:b["a"]},props:{value:{type:Object,default:()=>({getLocation:!0,setView:!0,recordLocation:!1,allowWarning:!0})}},watch:{value:{deep:!0,handler(t){this.$emit("input",t)}}}},y=N,_=e("2877"),L=Object(_["a"])(y,w,v,!1,null,null,null),E=L.exports,x=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("l-control",t._b({},"l-control",t.$attrs,!1),[e("b-field",{attrs:{grouped:"","group-multiline":""}},[e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asSpeed")(t.value.speed),0)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("kt")])],1)],1),e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asHeading")(t.value.heading),0)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("°")])],1)],1),e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asAltitude")(t.value.altitude),-1)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("ft")])],1)],1),e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-dark",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asSpeed")(t.value.vario,"ft/min"),-1)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("ft/min")])],1)],1)])],1)},T=[],$=e("08df"),k={name:"LMovingMapInstrumentsControl",components:{LControl:b["a"]},props:{value:{type:Object,default:()=>({speed:null,altitude:null,heading:null,vario:null})}},mixins:[$["d"]]},R=k,D=Object(_["a"])(R,x,T,!1,null,null,null),z=D.exports,S=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("l-layer-group",[t.value.latlng?e("l-marker",{attrs:{"lat-lng":t.value.latlng}},[e("l-icon",{attrs:{"class-name":"leaflet-diamond-icon"}},[e("div")]),e("l-popup",[e("pre",[t._v("        "+t._s(t.value)+"\n          ")])])],1):t._e(),t.value.latlng&&t.value.accuracy?e("l-circle",{attrs:{"lat-lng":t.value.latlng,radius:t.value.accuracy,className:"accuracyCircle"}}):t._e(),this.value.latlng&&this.value.heading&&this.value.speed?e("l-polyline",{attrs:{"lat-lngs":t.speedVector,className:"speedVector"}}):t._e()],1)},W=[],q=e("1ebb"),F=e("4e2b6"),B=e("fbba"),P=e("0dbd"),O=e("f60f"),V={name:"LLocationMarker",components:{LLayerGroup:q["a"],LMarker:F["a"],LIcon:B["a"],LPolyline:l["a"],LCircle:P["a"],LPopup:O["a"]},props:{value:{type:Object,default:()=>({latlng:null,speed:null,heading:null,accuracy:null})},futur:{type:Number,default:()=>60}},computed:{speedVector(){return[this.value.latlng,new m(this.value.latlng.lat,this.value.latlng.lng).rhumbDestinationPoint(this.value.speed*this.futur,this.value.heading)]}}},j=V,C=(e("0223"),Object(_["a"])(j,S,W,!1,null,null,null)),I=C.exports,K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.origin&&t.value?e("span",[e("l-layer-group",[e("l-marker",{attrs:{"lat-lng":t.value.latlng},on:{contextmenu:function(a){return t.$emit("input")}}},[e("l-icon",{attrs:{"class-name":"leaflet-destination-icon"}},[e("div")]),e("l-popup",[e("pre",[t._v("        "+t._s(t.value)+"\n        "+t._s(t.origin)+"\n        "+t._s(t.route)+"\n      ")])])],1),e("l-polyline",{attrs:{"lat-lngs":t.destinationVector,className:"destinationVector"}})],1),e("l-moving-map-destination-control",{attrs:{position:"bottomleft"},model:{value:t.route,callback:function(a){t.route=a},expression:"route"}})],1):t._e()},G=[];class A{constructor(t,a,e){if(isNaN(t)||isNaN(t)||isNaN(t))throw new TypeError(`invalid vector [${t},${a},${e}]`);this.x=Number(t),this.y=Number(a),this.z=Number(e)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}plus(t){if(!(t instanceof A))throw new TypeError("v is not Vector3d object");return new A(this.x+t.x,this.y+t.y,this.z+t.z)}minus(t){if(!(t instanceof A))throw new TypeError("v is not Vector3d object");return new A(this.x-t.x,this.y-t.y,this.z-t.z)}times(t){if(isNaN(t))throw new TypeError(`invalid scalar value ‘${t}’`);return new A(this.x*t,this.y*t,this.z*t)}dividedBy(t){if(isNaN(t))throw new TypeError(`invalid scalar value ‘${t}’`);return new A(this.x/t,this.y/t,this.z/t)}dot(t){if(!(t instanceof A))throw new TypeError("v is not Vector3d object");return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){if(!(t instanceof A))throw new TypeError("v is not Vector3d object");const a=this.y*t.z-this.z*t.y,e=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return new A(a,e,i)}negate(){return new A(-this.x,-this.y,-this.z)}unit(){const t=this.length;if(1==t)return this;if(0==t)return this;const a=this.x/t,e=this.y/t,i=this.z/t;return new A(a,e,i)}angleTo(t,a){if(!(t instanceof A))throw new TypeError("v is not Vector3d object");if(!(a instanceof A||void 0==a))throw new TypeError("n is not Vector3d object");const e=void 0==a||this.cross(t).dot(a)>=0?1:-1,i=this.cross(t).length*e,n=this.dot(t);return Math.atan2(i,n)}rotateAround(t,a){if(!(t instanceof A))throw new TypeError("axis is not Vector3d object");const e=a.toRadians(),i=this.unit(),n=t.unit(),s=Math.sin(e),o=Math.cos(e),r=1-o,l=n.x,h=n.y,c=n.z,u=[[r*l*l+o,r*l*h-s*c,r*l*c+s*h],[r*l*h+s*c,r*h*h+o,r*h*c-s*l],[r*l*c-s*h,r*h*c+s*l,r*c*c+o]],d=[u[0][0]*i.x+u[0][1]*i.y+u[0][2]*i.z,u[1][0]*i.x+u[1][1]*i.y+u[1][2]*i.z,u[2][0]*i.x+u[2][1]*i.y+u[2][2]*i.z],p=new A(d[0],d[1],d[2]);return p}toString(t=3){return`[${this.x.toFixed(t)},${this.y.toFixed(t)},${this.z.toFixed(t)}]`}}Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var J=A;const H={WGS84:{a:6378137,b:6356752.314245,f:1/298.257223563}},U={WGS84:{ellipsoid:H.WGS84}};Object.freeze(H.WGS84),Object.freeze(U.WGS84);class Q{constructor(t,a,e=0){if(isNaN(t))throw new TypeError(`invalid lat ‘${t}’`);if(isNaN(a))throw new TypeError(`invalid lon ‘${a}’`);if(isNaN(e))throw new TypeError(`invalid height ‘${e}’`);this._lat=p.wrap90(Number(t)),this._lon=p.wrap180(Number(a)),this._height=Number(e)}get lat(){return this._lat}get latitude(){return this._lat}set lat(t){if(this._lat=isNaN(t)?p.wrap90(p.parse(t)):p.wrap90(Number(t)),isNaN(this._lat))throw new TypeError(`invalid lat ‘${t}’`)}set latitude(t){if(this._lat=isNaN(t)?p.wrap90(p.parse(t)):p.wrap90(Number(t)),isNaN(this._lat))throw new TypeError(`invalid latitude ‘${t}’`)}get lon(){return this._lon}get lng(){return this._lon}get longitude(){return this._lon}set lon(t){if(this._lon=isNaN(t)?p.wrap180(p.parse(t)):p.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid lon ‘${t}’`)}set lng(t){if(this._lon=isNaN(t)?p.wrap180(p.parse(t)):p.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid lng ‘${t}’`)}set longitude(t){if(this._lon=isNaN(t)?p.wrap180(p.parse(t)):p.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid longitude ‘${t}’`)}get height(){return this._height}set height(t){if(this._height=Number(t),isNaN(this._height))throw new TypeError(`invalid height ‘${t}’`)}get datum(){return this._datum}set datum(t){this._datum=t}static get ellipsoids(){return H}static get datums(){return U}static parse(...t){if(0==t.length)throw new TypeError("invalid (empty) point");let a=void 0,e=void 0,i=void 0;if("object"==typeof t[0]&&(1==t.length||!isNaN(parseFloat(t[1])))){const n=t[0];if("Point"==n.type&&Array.isArray(n.coordinates)?([e,a,i]=n.coordinates,i=i||0):(void 0!=n.latitude&&(a=n.latitude),void 0!=n.lat&&(a=n.lat),void 0!=n.longitude&&(e=n.longitude),void 0!=n.lng&&(e=n.lng),void 0!=n.lon&&(e=n.lon),void 0!=n.height&&(i=n.height),a=p.wrap90(p.parse(a)),e=p.wrap180(p.parse(e))),void 0!=t[1]&&(i=t[1]),isNaN(a)||isNaN(e))throw new TypeError(`invalid point ‘${JSON.stringify(t[0])}’`)}if("string"==typeof t[0]&&2==t[0].split(",").length&&([a,e]=t[0].split(","),a=p.wrap90(p.parse(a)),e=p.wrap180(p.parse(e)),i=t[1]||0,isNaN(a)||isNaN(e)))throw new TypeError(`invalid point ‘${t[0]}’`);if(void 0==a&&void 0==e&&([a,e]=t,a=p.wrap90(p.parse(a)),e=p.wrap180(p.parse(e)),i=t[2]||0,isNaN(a)||isNaN(e)))throw new TypeError(`invalid point ‘${t.toString()}’`);return new this(a,e,i)}toCartesian(){const t=this.datum?this.datum.ellipsoid:this.referenceFrame?this.referenceFrame.ellipsoid:H.WGS84,a=this.lat.toRadians(),e=this.lon.toRadians(),i=this.height,{a:n,f:s}=t,o=Math.sin(a),r=Math.cos(a),l=Math.sin(e),h=Math.cos(e),c=2*s-s*s,u=n/Math.sqrt(1-c*o*o),d=(u+i)*r*h,p=(u+i)*r*l,g=(u*(1-c)+i)*o;return new X(d,p,g)}equals(t){if(!(t instanceof Q))throw new TypeError(`invalid point ‘${t}’`);return!(Math.abs(this.lat-t.lat)>Number.EPSILON)&&(!(Math.abs(this.lon-t.lon)>Number.EPSILON)&&(!(Math.abs(this.height-t.height)>Number.EPSILON)&&(this.datum==t.datum&&(this.referenceFrame==t.referenceFrame&&this.epoch==t.epoch))))}toString(t="d",a,e=null){if(!["d","dm","dms","n"].includes(t))throw new RangeError(`invalid format ‘${t}’`);const i=(this.height>=0?" +":" ")+this.height.toFixed(e)+"m";if("n"==t){void 0==a&&(a=4);const t=this.lat.toFixed(a),n=this.lon.toFixed(a);return`${t}, ${n}${null==e?"":i}`}const n=p.toLat(this.lat,t,a),s=p.toLon(this.lon,t,a);return`${n}, ${s}${null==e?"":i}`}}class X extends J{constructor(t,a,e){super(t,a,e)}toLatLon(t=H.WGS84){if(!t||!t.a)throw new TypeError(`invalid ellipsoid ‘${t}’`);const{x:a,y:e,z:i}=this,{a:n,b:s,f:o}=t,r=2*o-o*o,l=r/(1-r),h=Math.sqrt(a*a+e*e),c=Math.sqrt(h*h+i*i),u=s*i/(n*h)*(1+l*s/c),d=u/Math.sqrt(1+u*u),p=d/u,g=isNaN(p)?0:Math.atan2(i+l*s*d*d*d,h-r*n*p*p*p),m=Math.atan2(e,a),M=Math.sin(g),f=Math.cos(g),w=n/Math.sqrt(1-r*M*M),v=h*f+i*M-n*n/w,b=new Q(g.toDegrees(),m.toDegrees(),v);return b}toString(t=0){const a=this.x.toFixed(t),e=this.y.toFixed(t),i=this.z.toFixed(t);return`[${a},${e},${i}]`}}const Y=Math.PI,Z=Number.EPSILON;class tt extends Q{distanceTo(t){try{const a=this.inverse(t).distance;return Number(a.toFixed(3))}catch(a){if(a instanceof EvalError)return NaN;throw a}}initialBearingTo(t){try{const a=this.inverse(t).initialBearing;return Number(a.toFixed(7))}catch(a){if(a instanceof EvalError)return NaN;throw a}}finalBearingTo(t){try{const a=this.inverse(t).finalBearing;return Number(a.toFixed(7))}catch(a){if(a instanceof EvalError)return NaN;throw a}}destinationPoint(t,a){return this.direct(Number(t),Number(a)).point}finalBearingOn(t,a){const e=this.direct(Number(t),Number(a)).finalBearing;return Number(e.toFixed(7))}direct(t,a){if(0!=this.height)throw new RangeError("point must be on the surface of the ellipsoid");const e=this.lat.toRadians(),i=this.lon.toRadians(),n=a.toRadians(),s=t,o=this.datum?this.datum.ellipsoid:Q.ellipsoids.WGS84,{a:r,b:l,f:h}=o,c=Math.sin(n),u=Math.cos(n),d=(1-h)*Math.tan(e),g=1/Math.sqrt(1+d*d),m=d*g,M=Math.atan2(d,u),f=g*c,w=1-f*f,v=w*(r*r-l*l)/(l*l),b=1+v/16384*(4096+v*(v*(320-175*v)-768)),N=v/1024*(256+v*(v*(74-47*v)-128));let y=s/(l*b),_=null,L=null,E=null,x=null,T=null,$=0;do{x=Math.cos(2*M+y),_=Math.sin(y),L=Math.cos(y),E=N*_*(x+N/4*(L*(2*x*x-1)-N/6*x*(4*_*_-3)*(4*x*x-3))),T=y,y=s/(l*b)+E}while(Math.abs(y-T)>1e-12&&++$<100);if($>=100)throw new EvalError("Vincenty formula failed to converge");const k=m*_-g*L*u,R=Math.atan2(m*L+g*_*u,(1-h)*Math.sqrt(f*f+k*k)),D=Math.atan2(_*c,g*L-m*_*u),z=h/16*w*(4+h*(4-3*w)),S=D-(1-z)*h*f*(y+z*_*(x+z*L*(2*x*x-1))),W=i+S,q=Math.atan2(f,-k),F=new tt(R.toDegrees(),W.toDegrees(),0,this.datum);return{point:F,finalBearing:p.wrap360(q.toDegrees()),iterations:$}}inverse(t){if(!(t instanceof Q))throw new TypeError(`invalid point ‘${t}’`);if(0!=this.height||0!=t.height)throw new RangeError("point must be on the surface of the ellipsoid");const a=this,e=t,i=a.lat.toRadians(),n=a.lon.toRadians(),s=e.lat.toRadians(),o=e.lon.toRadians(),r=this.datum?this.datum.ellipsoid:Q.ellipsoids.WGS84,{a:l,b:h,f:c}=r,u=o-n,d=(1-c)*Math.tan(i),g=1/Math.sqrt(1+d*d),m=d*g,M=(1-c)*Math.tan(s),f=1/Math.sqrt(1+M*M),w=M*f,v=Math.abs(u)>Y/2||Math.abs(s-i)>Y/2;let b=u,N=null,y=null,_=v?Y:0,L=0,E=v?-1:1,x=null,T=1,$=null,k=1,R=null,D=null,z=0;do{if(N=Math.sin(b),y=Math.cos(b),x=f*N*(f*N)+(g*w-m*f*y)*(g*w-m*f*y),Math.abs(x)<Z)break;L=Math.sqrt(x),E=m*w+g*f*y,_=Math.atan2(L,E),$=g*f*N/L,k=1-$*$,T=0!=k?E-2*m*w/k:0,R=c/16*k*(4+c*(4-3*k)),D=b,b=u+(1-R)*c*$*(_+R*L*(T+R*E*(2*T*T-1)));const t=v?Math.abs(b)-Y:Math.abs(b);if(t>Y)throw new EvalError("λ > π")}while(Math.abs(b-D)>1e-12&&++z<1e3);if(z>=1e3)throw new EvalError("Vincenty formula failed to converge");const S=k*(l*l-h*h)/(h*h),W=1+S/16384*(4096+S*(S*(320-175*S)-768)),q=S/1024*(256+S*(S*(74-47*S)-128)),F=q*L*(T+q/4*(E*(2*T*T-1)-q/6*T*(4*L*L-3)*(4*T*T-3))),B=h*W*(_-F),P=Math.abs(x)<Z?0:Math.atan2(f*N,g*w-m*f*y),O=Math.abs(x)<Z?Y:Math.atan2(g*N,-m*f+g*w*y);return{distance:B,initialBearing:Math.abs(B)<Z?NaN:p.wrap360(P.toDegrees()),finalBearing:Math.abs(B)<Z?NaN:p.wrap360(O.toDegrees()),iterations:z}}}var at=e("ef62"),et=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("l-control",t._b({},"l-control",t.$attrs,!1),[e("b-field",{attrs:{grouped:"","group-multiline":""}},[e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-success",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asDistance")(t.value.distance,"NM"),0)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("NM")])],1)],1),e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asHeading")(t.value.heading),0)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("°")])],1)],1),e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-warning",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asAltitude")(t.value.altitude),-1)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("ft")]),e("b-tag",{attrs:{type:"is-danger",size:"is-medium"}},[t._v(t._s(t._f("precision")(t._f("asSpeed")(t.value.vertical_speed,"ft/min"),-1)))]),e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("ft/min")])],1)],1),e("div",{staticClass:"control"},[e("b-taglist",{attrs:{attached:""}},[e("b-tag",{attrs:{type:"is-light",size:"is-medium"}},[t._v("ETE")]),e("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(t._f("asDuration")(t.value.ETE)))])],1)],1)])],1)},it=[],nt={name:"LMovingMapDestinationControl",components:{LControl:b["a"]},props:{value:{type:Object,default:()=>({distance:null,heading:null,altitude:null,vario:null,ETE:null})}},mixins:[$["d"]]},st=nt,ot=Object(_["a"])(st,et,it,!1,null,null,null),rt=ot.exports,lt={name:"LDestinationMarker",components:{LLayerGroup:q["a"],LMarker:F["a"],LIcon:B["a"],LPolyline:l["a"],LPopup:O["a"],LMovingMapDestinationControl:rt},props:["value","origin"],mounted(){this.map=Object(at["d"])(this.$parent,!0).mapObject},computed:{destinationVector(){return[this.origin.latlng,this.value.latlng]},route(){let t=new tt(this.origin.latlng.lat,this.origin.latlng.lng),a=new tt(this.value.latlng.lat,this.value.latlng.lng),e=t.distanceTo(a),i=t.initialBearingTo(a),n=e/this.origin.speed;return{distance:e,heading:i,ETE:n,relative_bearing:i-this.origin.heading,vertical_speed:(this.value.altitude-this.origin.altitude)/n}}}},ht=lt,ct=(e("1849"),Object(_["a"])(ht,K,G,!1,null,null,null)),ut=ct.exports,dt={name:"MovingMap",components:{LMap:r["a"],LPolyline:l["a"],LBaseLayerGroup:f["a"],LMovingMapSettingsControl:E,LMovingMapInstrumentsControl:z,LLocationMarker:I,LDestinationMarker:ut,VueLeafletMinimap:c.a},mixins:[M],data(){return{lastKnownLocation:void 0,lastKnownError:void 0,nextDestination:void 0,wakeLock:null,settings:{getLocation:!0,setView:!0,recordLocation:!0,allowWarning:!0},miniMap:{layer:new o.a.TileLayer("https://{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{subdomains:["server","services"]}),options:{toggleDisplay:!0,minimized:!0,position:"bottomright"}}}},mounted(){this.requestWakeLock(),document.addEventListener("visibilitychange",this.requestWakeLock)},beforeDestroy(){this.stopLocate(),document.removeEventListener("visibilitychange",this.requestWakeLock),this.wakeLock&&this.wakeLock.release()},computed:{map(){return this.$refs.movingMap.mapObject},trace(){return(this.reportedLocations||[]).filter(t=>!!t.latlng).map(t=>t.latlng)}},watch:{"settings.setView":function(t){t&&this.lastKnownLocation&&this.bestView(this.lastKnownLocation)},"settings.getLocation":{handler(t){t?this.startLocate():this.stopLocate()}}},pouch:{reportedLocations(){return{database:"navue",selector:{type:"location"}}}},methods:{setupMap(t){t.on("locationfound",this._locationFound,this).on("locationerror",this._locationError,this),this.settings.getLocation&&this.startLocate()},bestView(t){this.map.flyToBounds(t.latlng.toBounds(t.speed?60*t.speed:t.accuracy))},addLocation(t){return this.$pouch.post({...t,type:"location",_id:t.timestamp.toString()})},removeLocations(){this.$pouch.bulkDocs(this.reportedLocations.map(t=>({...t,_deleted:!0})))},async requestWakeLock(){try{if(!("wakeLock"in navigator)||"visible"!==document.visibilityState)throw"wakelock unavaliable";this.wakeLock=await navigator.wakeLock.request("screen")}catch(t){this.openWarning({message:"Caution : Not able to keep screen on, try another browser"}),console.error(t)}},openWarning(t){this.$buefy.snackbar.open({message:t.message,position:"is-bottom",type:"is-danger",duration:5e3,actionText:"Deactivate",onAction:()=>{this.settings.allowWarning=!1,this.$buefy.toast.open({message:"Warnings Deactivated",queue:!1})}})},_locationFound:function(t){this._debounceLocation(t,this.lastKnownLocation)?(this.lastKnownLocation&&this._computeFromLastLocation(t,this.lastKnownLocation),delete t.sourceTarget,delete t.target,delete t.bounds,delete t.latitude,delete t.longitude,this.lastKnownLocation={...t},this.settings.recordLocation&&this.addLocation(t),this.settings.setView&&this.bestView(t)):"locationerror"==t.type&&this._locationError(t)},_locationError:function(t){delete t.sourceTarget,delete t.target,t.timestamp=Date.now(),this.settings.allowWarning&&this.openWarning(t),this.lastKnownError={...t}}}},pt=dt,gt=(e("f1a3"),Object(_["a"])(pt,i,n,!1,null,null,null));a["default"]=gt.exports},7502:function(t,a,e){},"995f":function(t,a,e){},ae67:function(t,a,e){},f1a3:function(t,a,e){"use strict";var i=e("7502"),n=e.n(i);n.a}}]);